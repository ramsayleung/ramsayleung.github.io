<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>EmacsæŠ€å·§ on è èæ²¹ä¸å¤©å…‰å¢Ÿ</title>
    <link>https://ramsayleung.github.io/zh/categories/emacs%E6%8A%80%E5%B7%A7/</link>
    <description>Recent content in EmacsæŠ€å·§ on è èæ²¹ä¸å¤©å…‰å¢Ÿ</description>
    <image>
      <title>è èæ²¹ä¸å¤©å…‰å¢Ÿ</title>
      <url>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.146.7</generator>
    <language>zh</language>
    <copyright>See this site&amp;rsquo;s source code here, licensed under GPLv3 Â·</copyright>
    <lastBuildDate>Thu, 09 Jan 2025 19:18:24 -0800</lastBuildDate>
    <atom:link href="https://ramsayleung.github.io/zh/categories/emacs%E6%8A%80%E5%B7%A7/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>å•ç‹¬ä½¿ç”¨Emacsçš„Magitæ’ä»¶</title>
      <link>https://ramsayleung.github.io/zh/post/2024/%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8emacs%E7%9A%84magit%E6%8F%92%E4%BB%B6/</link>
      <pubDate>Wed, 11 Dec 2024 16:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2024/%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8emacs%E7%9A%84magit%E6%8F%92%E4%BB%B6/</guid>
      <description>&lt;h2 id=&#34;emacs-ä¸-magit&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Emacs ä¸ Magit&lt;/h2&gt;
&lt;p&gt;ä¸çŸ¥ä¸è§‰ï¼Œæˆ‘å·²ç»ä½¿ç”¨Emacs å¿«10å¹´äº†ï¼Œåœ¨æˆ‘ä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨ä¸­ï¼ŒEmacsæ˜¯æ‰©å±•æ€§æœ€å¼ºçš„ç¼–è¾‘å™¨ï¼Œæ¯•ç«ŸEmacsæ˜¯ä¸ªæŠ«ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lispè™šæ‹Ÿæœºã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="emacs-ä¸-magit"><span class="section-num">1</span> Emacs ä¸ Magit</h2>
<p>ä¸çŸ¥ä¸è§‰ï¼Œæˆ‘å·²ç»ä½¿ç”¨Emacs å¿«10å¹´äº†ï¼Œåœ¨æˆ‘ä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨ä¸­ï¼ŒEmacsæ˜¯æ‰©å±•æ€§æœ€å¼ºçš„ç¼–è¾‘å™¨ï¼Œæ¯•ç«ŸEmacsæ˜¯ä¸ªæŠ«ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lispè™šæ‹Ÿæœºã€‚</p>
<p>åœ¨Emacsæ— æ‰€ä¸èƒ½çš„æ‰©å±•æ€§ä¹‹ä¸‹ï¼Œè¯ç”Ÿäº†éå¸¸å¤šå¼ºå¤§çš„æ’ä»¶ï¼Œ
ä¹Ÿè®©Emacsæœ‰äº†ã€Œä¼ªè£…æˆæ“ä½œç³»ç»Ÿçš„ç¼–è¾‘å™¨ã€çš„ç¾åï¼Œè€ŒEmacså…¬è®¤çš„æ€æ‰‹é”æ’ä»¶æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ <a href="https://orgmode.org/">org-mode</a>ï¼Œå¦ä¸€ä¸ªæ˜¯ <a href="https://magit.vc/">magit</a>. (æˆ‘ä¸ªäººè§‰å¾—è¿˜æœ‰ä¸ª <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html">dired</a>)</p>
<p>Orgmodeæ˜¯ç±»ä¼¼Markdownï¼Œä¸Emacsæ·±åº¦ç»‘å®šä¼˜åŒ–çš„æ ‡è®°è¯­è¨€ï¼Œä½¿ç”¨Emacsæ¥ç¼–å†™org-mode æ–‡æ¡£å°±æœ‰ä¸‹ç¬”æœ‰ç¥ï¼Œæ–‡æ€æ³‰æ¶Œï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘(è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”¨org-modeå†™çš„)ã€‚</p>
<p>å› ä¸ºorg-mode ä¸Emacs æ·±åº¦ç»“åˆï¼Œè‡ªç„¶æ— æ³•è„±ç¦»Emacså•ç‹¬ä½¿ç”¨ï¼Œè€Œå…¶ä»–ç¼–è¾‘å™¨æ¨¡ä»¿org-mode å¼€å‘çš„æ’ä»¶ï¼Œå¦‚ <a href="https://github.com/jceb/vim-orgmode">vim-orgmode</a>, <a href="https://github.com/nvim-orgmode/orgmode">nvim-orgmode</a> å’Œ <a href="https://github.com/vscode-org-mode/vscode-org-mode">vscode-orgmode</a>, éš¾å…åªå¾—å…¶å½¢ï¼Œæœªå¾—å…¶ç¥ï¼Œè¿˜ä¸å¦‚ç”¨Markdown.</p>
<p>è€Œ Magit æ˜¯ Gitçš„Emacså›¾å½¢åŒ–å®¢æˆ·ç«¯, ä¹Ÿæ˜¯æˆ‘ç”¨è¿‡çš„æœ€å¥½ç”¨çš„Git å®¢æˆ·ç«¯è½¯ä»¶ï¼Œæ—¢ç›´è§‚åˆæ˜“ç”¨(çœ‹çœ‹Emacs é“å‹ä»¬å¤¸ Magit çš„<a href="https://emacs-china.org/t/magit/22521/5">å¸–å­</a>):</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-02203" hidden>
    <label for="zoomCheck-02203">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/magit_dashboard.jpg"/> 
    
    
    </label>
</figure>

<p>è™½ç„¶æˆ‘å·²ç»ç”¨äº†Emacså¾ˆå¤šå¹´ï¼Œä½†æ˜¯å·²ç»è¿‡äº†Live with Emacsçš„å¢ƒç•Œ, ä¸ä¼šç”¨Emacså¤„ç†æ‰€æœ‰äº‹æƒ…, æ¯”å¦‚ç”¨VSCode å†™Rust, ç”¨Intellij Ideaå†™Java, æ—¢ç„¶ Magit é‚£ä¹ˆå¥½ç”¨ï¼Œæœ‰æ²¡å¯èƒ½ç‹¬ç«‹äºEmacsä½¿ç”¨å‘¢?</p>
<h2 id="emacs-daemon"><span class="section-num">2</span> Emacs daemon</h2>
<p>ä½œä¸ºæ— æ‰€ä¸èƒ½çš„ã€Œæ“ä½œç³»ç»Ÿã€, Emacs ä½œä¸º<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html">server</a> ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œç„¶åå†ä½¿ç”¨ <code>emacsclient</code> è¿æ¥ server:</p>
<p>å‰æ–‡æåˆ°, Emacs æ˜¯æ‰¹ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lisp VM, è€Œ Magit æœ¬è´¨ä¹Ÿåªæ˜¯ä¸€ä¸ª lisp function, åªè¦åœ¨å¯åŠ¨emacsclientçš„æ—¶å€™ï¼Œå†è°ƒç”¨ magitçš„å‡½æ•°, é‚£ä¹ˆå°±å¯ä»¥å¯åŠ¨ Magit:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">magit</span><span class="o">=</span><span class="s2">&#34;emacsclient -nw -eval &#39;(magit-status)&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
<figure>
    
    
    <input type="checkbox" id="zoomCheck-cc913" hidden>
    <label for="zoomCheck-cc913">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/magit.gif"/> 
    
    
    </label>
</figure>

<p>è¿™æ ·å°±å¯ä»¥åœ¨VSCodeå’ŒIdeaé‡Œé¢æ„‰å¿«åœ°ä½¿ç”¨ magitäº†.</p>
<h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>åœ¨Emacs-China è®ºå›æœç´¢Magitçš„æ—¶å€™, å‘ç°äº†ä¹Ÿæœ‰ä¸€ä¸ªå¸–å­è®¨è®ºæŠŠ <a href="https://emacs-china.org/t/magit/25527/6">magitå½“ä½œçš„å•ç‹¬çš„å·¥å…·</a>, æ²¡æƒ³åˆ°æœ‰ä¸ªå›å¤çš„æ€è·¯å’Œæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Emacsä½œä¸ºdaemon æ¥å¯ç”¨.</p>
<p>åªæ˜¯æ²¡æœ‰æƒ³åˆ°ä»–æ›´evil, åœ¨Nvim é‡Œé¢ä½¿ç”¨Magit, æˆ‘ä¹Ÿå­¦ä¹ ä¸€ä¸‹ Nvim+Emacs çš„ç»„åˆ :)</p>
<h2 id="å‚è€ƒ"><span class="section-num">4</span> å‚è€ƒ</h2>
<ul>
<li><a href="https://orgmode.org/">https://orgmode.org/</a></li>
<li><a href="https://magit.vc/">https://magit.vc/</a></li>
<li><a href="https://emacs-china.org/t/magit/22521/5">https://emacs-china.org/t/magit/22521/5</a></li>
<li><a href="https://emacs-china.org/t/magit/25527/6">https://emacs-china.org/t/magit/25527/6</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html">https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html">https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html</a></li>
</ul>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>EmacsæŠ€å·§åˆ†äº«: ä½¿ç”¨ewwæ‰“å¼€åœ¨çº¿org-modeæ–‡æ¡£</title>
      <link>https://ramsayleung.github.io/zh/post/2023/emacs%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_%E4%BD%BF%E7%94%A8eww%E6%89%93%E5%BC%80%E5%9C%A8%E7%BA%BForg-mode%E6%96%87%E6%A1%A3/</link>
      <pubDate>Sat, 04 Mar 2023 21:55:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2023/emacs%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_%E4%BD%BF%E7%94%A8eww%E6%89%93%E5%BC%80%E5%9C%A8%E7%BA%BForg-mode%E6%96%87%E6%A1%A3/</guid>
      <description>&lt;h2 id=&#34;æŠ€å·§&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; æŠ€å·§&lt;/h2&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨org-mode æ ¼å¼çš„æ–‡æœ¬ï¼Œä¾‹å¦‚Emacså®˜æ–¹&lt;a href=&#34;https://git.savannah.gnu.org/cgit/emacs.git/plain/admin/notes/tree-sitter/starter-guide?h=feature/tree-sitter&#34;&gt; tree-sitter çš„ä½¿ç”¨æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨çº¿é˜…è¯»ä¸æ˜¯å¾ˆæ˜“è¯»ï¼Œç›¸å½“äºäººè„‘è§£æ &lt;code&gt;org-mode&lt;/code&gt;. æˆ‘çš„ä¸ªäººä¹ æƒ¯æ˜¯ä½¿ç”¨ &lt;code&gt;eww&lt;/code&gt; æµè§ˆå™¨æ¥é˜…è¯»:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="æŠ€å·§"><span class="section-num">1</span> æŠ€å·§</h2>
<p>å¯¹äºä½¿ç”¨org-mode æ ¼å¼çš„æ–‡æœ¬ï¼Œä¾‹å¦‚Emacså®˜æ–¹<a href="https://git.savannah.gnu.org/cgit/emacs.git/plain/admin/notes/tree-sitter/starter-guide?h=feature/tree-sitter"> tree-sitter çš„ä½¿ç”¨æ•™ç¨‹</a></p>
<p>åœ¨çº¿é˜…è¯»ä¸æ˜¯å¾ˆæ˜“è¯»ï¼Œç›¸å½“äºäººè„‘è§£æ <code>org-mode</code>. æˆ‘çš„ä¸ªäººä¹ æƒ¯æ˜¯ä½¿ç”¨ <code>eww</code> æµè§ˆå™¨æ¥é˜…è¯»:</p>

<figure><a href="/ox-hugo/tree-sitter-doc.png">
    
    
    <input type="checkbox" id="zoomCheck-e30a7" hidden>
    <label for="zoomCheck-e30a7">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/tree-sitter-doc.png"/> 
    
    
    </label></a>
</figure>

<ol>
<li>å¤åˆ¶ç½‘é¡µé“¾æ¥</li>
<li>ä½¿ç”¨ <code>eww</code> æ‰“å¼€é“¾æ¥</li>
<li><code>major-mode</code> åˆ‡æ¢åˆ° <code>org-mode</code>, å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨ Emacs æ¥é˜…è¯» <code>org-mode</code> æ–‡æœ¬.</li>
</ol>

<figure><a href="/ox-hugo/eww.gif">
    
    
    <input type="checkbox" id="zoomCheck-f22f6" hidden>
    <label for="zoomCheck-f22f6">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/eww.gif"/> 
    
    
    </label></a>
</figure>

<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Emacs æŠ€å·§åˆ†äº«ï¼šdired-mode æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å</title>
      <link>https://ramsayleung.github.io/zh/post/2023/%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_dired%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D/</link>
      <pubDate>Sat, 04 Mar 2023 21:34:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2023/%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_dired%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D/</guid>
      <description>&lt;h2 id=&#34;æŠ€å·§&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; æŠ€å·§&lt;/h2&gt;
&lt;p&gt;åˆ†äº«ä¸€ä¸‹å¹³æ—¶ä½¿ç”¨ &lt;code&gt;dired-mode&lt;/code&gt; æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åçš„æŠ€å·§:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;C-x C-f&lt;/code&gt; æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ï¼Œè¿›å…¥ &lt;code&gt;dired-mode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-x C-q&lt;/code&gt; &lt;code&gt;dired-toggle-read-only&lt;/code&gt;: Edit Dired buffer with Wdired.&lt;/li&gt;
&lt;li&gt;æ‰¹é‡ä¿®æ”¹ï¼Œæ‰‹æ®µæœ‰
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;query-replace&lt;/code&gt; æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;rectangle-command&lt;/code&gt;: &lt;code&gt;C-x r t&lt;/code&gt; &lt;code&gt;string-rectangle&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-c C-c&lt;/code&gt; æäº¤ä¿®æ”¹æˆ– &lt;code&gt;C-c C-k&lt;/code&gt; æ”¾å¼ƒä¿®æ”¹&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;&lt;a href=&#34;https://ramsayleung.github.io/ox-hugo/dired_rename_multi_files.gif&#34;&gt;
    
    
    &lt;input type=&#34;checkbox&#34; id=&#34;zoomCheck-3d34b&#34; hidden&gt;
    &lt;label for=&#34;zoomCheck-3d34b&#34;&gt;
    
    
    &lt;img class=&#34;zoomCheck&#34; loading=&#34;lazy&#34; src=&#34;~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files.gif&#34;
         alt=&#34;Figure 1: ä½¿ç”¨ rectangle-command è¿›è¡Œæ‰¹é‡ä¿®æ”¹&#34;/&gt; 
    
    
    &lt;/label&gt;&lt;/a&gt;&lt;figcaption&gt;
            &lt;p&gt;&lt;span class=&#34;figure-number&#34;&gt;Figure 1: &lt;/span&gt;ä½¿ç”¨ &lt;code&gt;rectangle-command&lt;/code&gt; è¿›è¡Œæ‰¹é‡ä¿®æ”¹&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="æŠ€å·§"><span class="section-num">1</span> æŠ€å·§</h2>
<p>åˆ†äº«ä¸€ä¸‹å¹³æ—¶ä½¿ç”¨ <code>dired-mode</code> æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åçš„æŠ€å·§:</p>
<ol>
<li><code>C-x C-f</code> æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ï¼Œè¿›å…¥ <code>dired-mode</code></li>
<li><code>C-x C-q</code> <code>dired-toggle-read-only</code>: Edit Dired buffer with Wdired.</li>
<li>æ‰¹é‡ä¿®æ”¹ï¼Œæ‰‹æ®µæœ‰
<ul>
<li>ä½¿ç”¨ <code>query-replace</code> æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å</li>
<li>ä½¿ç”¨evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼</li>
<li>ä½¿ç”¨ <code>rectangle-command</code>: <code>C-x r t</code> <code>string-rectangle</code></li>
</ul>
</li>
<li><code>C-c C-c</code> æäº¤ä¿®æ”¹æˆ– <code>C-c C-k</code> æ”¾å¼ƒä¿®æ”¹</li>
</ol>

<figure><a href="/ox-hugo/dired_rename_multi_files.gif">
    
    
    <input type="checkbox" id="zoomCheck-3d34b" hidden>
    <label for="zoomCheck-3d34b">
    
    
    <img class="zoomCheck" loading="lazy" src="~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files.gif"
         alt="Figure 1: ä½¿ç”¨ rectangle-command è¿›è¡Œæ‰¹é‡ä¿®æ”¹"/> 
    
    
    </label></a><figcaption>
            <p><span class="figure-number">Figure 1: </span>ä½¿ç”¨ <code>rectangle-command</code> è¿›è¡Œæ‰¹é‡ä¿®æ”¹</p>
        </figcaption>
</figure>


<figure><a href="/ox-hugo/dired_rename_multi_files_2.gif">
    
    
    <input type="checkbox" id="zoomCheck-135a4" hidden>
    <label for="zoomCheck-135a4">
    
    
    <img class="zoomCheck" loading="lazy" src="~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files_2.gif"
         alt="Figure 2: ä½¿ç”¨ evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼è¿›è¡Œæ‰¹é‡ä¿®æ”¹"/> 
    
    
    </label></a><figcaption>
            <p><span class="figure-number">Figure 2: </span>ä½¿ç”¨ evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼è¿›è¡Œæ‰¹é‡ä¿®æ”¹</p>
        </figcaption>
</figure>

<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Eshellå®ç°fzfçš„å†å²å‘½ä»¤æœç´¢åŠŸèƒ½</title>
      <link>https://ramsayleung.github.io/zh/post/2017/search_eshell_history_like_fzf/</link>
      <pubDate>Sun, 17 Dec 2017 15:46:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/search_eshell_history_like_fzf/</guid>
      <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç›®æ ‡: åœ¨=Eshell=ä¸­åƒåœ¨bash/zshä¸­ä½¿ç”¨=fzf=é‚£èˆ¬æœç´¢å†å²å‘½ä»¤&lt;/p&gt;
&lt;h2 id=&#34;fzf&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; fzf&lt;/h2&gt;
&lt;p&gt;æˆ‘çš„ä¸»åŠ›Shell æ˜¯Eshell, ä½†æ˜¯å¹³æ—¶æˆ‘ä¹Ÿä¼šç”¨Zsh, è€Œ&lt;a href=&#34;https://github.com/junegunn/fzf&#34;&gt;fzf&lt;/a&gt; æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº†=fzf=æœç´¢å†å²å‘½ä»¤:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><span class="section-num">1</span> å‰è¨€</h2>
<p>ç›®æ ‡: åœ¨=Eshell=ä¸­åƒåœ¨bash/zshä¸­ä½¿ç”¨=fzf=é‚£èˆ¬æœç´¢å†å²å‘½ä»¤</p>
<h2 id="fzf"><span class="section-num">2</span> fzf</h2>
<p>æˆ‘çš„ä¸»åŠ›Shell æ˜¯Eshell, ä½†æ˜¯å¹³æ—¶æˆ‘ä¹Ÿä¼šç”¨Zsh, è€Œ<a href="https://github.com/junegunn/fzf">fzf</a> æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº†=fzf=æœç´¢å†å²å‘½ä»¤:</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-ae06a" hidden>
    <label for="zoomCheck-ae06a">
    
    
    <img class="zoomCheck" loading="lazy" src="https://i.imgur.com/pPMxauw.gif"
         alt="Figure 1: fzf"/> 
    
    
    </label><figcaption>
            <p><span class="figure-number">Figure 1: </span>fzf</p>
        </figcaption>
</figure>

<h2 id="eshell"><span class="section-num">3</span> Eshell</h2>
<p>æˆ‘æ—¥å¸¸çš„æ“ä½œåŸºæœ¬éƒ½æ˜¯åœ¨ Eshell ä¸Šé¢è¿›è¡Œçš„ï¼Œä¸è¿‡ Eshell æ˜¯æ²¡åŠæ³•ç›´æ¥åƒ Bash é‚£æ ·è°ƒç”¨ =fzf=æ¥æŸ¥æ‰¾å‘½ä»¤å†å²çš„ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›æŠŠè¿™ä¸ªåŠŸèƒ½è¿ç§»åˆ°åˆ°Eshell ä¸Šé¢æ¥ã€‚</p>
<p>æˆ‘åœ¨ Emacs ä½¿ç”¨çš„è¡¥å…¨æ¡†æ¶æ˜¯ <code>Ivy/Counsel</code>,å®ƒæœ‰ä¸€ä¸ª <code>counsel-esh-history=çš„å‘½ä»¤å¯ä»¥ä½¿ç”¨ =Ivy</code> æ¥æœç´¢å‘½ä»¤ï¼Œä½†æ˜¯æ²¡åŠæ³•ä½¿ç”¨ç”¨æˆ·å·²ç»è¾“å…¥çš„å†…å®¹æ¥è¿‡æ»¤å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨è‡ªå·±æŠ˜è…¾äº†ä¸€ä¸ª</p>
<p><code>counsel-esh-history</code> å‘½ä»¤ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-a5648" hidden>
    <label for="zoomCheck-a5648">
    
    
    <img class="zoomCheck" loading="lazy" src="https://i.imgur.com/3tvGDzW.gif"
         alt="Figure 2: æ„Ÿè§‰å¾ˆä¸é”™å˜› :)"/> 
    
    
    </label><figcaption>
            <p><span class="figure-number">Figure 2: </span>æ„Ÿè§‰å¾ˆä¸é”™å˜› :)</p>
        </figcaption>
</figure>

<h2 id="æºä»£ç "><span class="section-num">4</span> æºä»£ç </h2>
<p>å¾—ç›Šäº =Ivy=å¼ºå¤§çš„å†…ç½®å‡½æ•°, åŠŸèƒ½å®ç°èµ·æ¥ç›¸å½“ä¾¿åˆ©ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lisp" data-lang="lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">samray/esh-history</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Interactive search eshell history.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;em-hist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">save-excursion</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">start-pos</span> <span class="p">(</span><span class="nv">eshell-bol</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">end-pos</span> <span class="p">(</span><span class="nv">point-at-eol</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">input</span> <span class="p">(</span><span class="nv">buffer-substring-no-properties</span> <span class="nv">start-pos</span> <span class="nv">end-pos</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">command</span> <span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&#34;Command: &#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="p">(</span><span class="nv">delete-dups</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nv">ring-size</span> <span class="nv">eshell-history-ring</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                                   <span class="p">(</span><span class="nv">ring-elements</span> <span class="nv">eshell-history-ring</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                                <span class="ss">:preselect</span> <span class="nv">input</span>
</span></span><span class="line"><span class="cl">                                <span class="ss">:action</span> <span class="nf">#&#39;</span><span class="nv">ivy-completion-in-region-action</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="nv">cursor-move</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">command</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">kill-region</span> <span class="p">(</span><span class="nf">+</span> <span class="nv">start-pos</span> <span class="nv">cursor-move</span><span class="p">)</span> <span class="p">(</span><span class="nf">+</span> <span class="nv">end-pos</span> <span class="nv">cursor-move</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; move cursor to eol</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">end-of-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç ä¸æ˜¯å¾ˆå¤æ‚, ä¸»è¦åŠŸèƒ½æ˜¯è·å–ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤, ç„¶åæŠŠæ‰€æœ‰çš„å†å²å‘½ä»¤è¯»å–å‡ºæ¥,æœ€åä½¿ç”¨=ivy-read=å†…ç½®çš„=ivy-completion-in-region-action=åŠŸèƒ½, ç”¨ç”¨æˆ·çš„è¾“å…¥çš„å‘½ä»¤ä¸å†å²å‘½ä»¤è¿›è¡ŒåŒ¹é…, ç”±ç”¨æˆ·é€‰æ‹©æœ€ç»ˆçš„å‘½ä»¤.</p>
<p>=ivy-read=æ˜¯Emacså†…ç½®=completing-read=çš„å‡½æ•°çš„å¼ºåŒ–, å…³äº=ivy-read=å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒæ–‡æ¡£<a href="https://oremacs.com/swiper/#getting-started">ivy-read</a>.</p>
<h2 id="æ€»ç»“"><span class="section-num">5</span> æ€»ç»“</h2>
<p>æœ€å, æˆ‘ä¹Ÿé¡ºä¾¿æŠŠä»£ç åˆ†äº«åˆ° <a href="https://www.reddit.com/r/emacs/comments/7k54px/snippet_share_make_eshell_search_command_history/">Emacsç¤¾åŒº</a>, è€Œ <a href="https://github.com/manateelazycat">manateelazycat</a>ä¹ŸæŠŠè¿™æ®µä»£ç çš„åŠŸèƒ½åŠ å…¥åˆ°<a href="https://github.com/manateelazycat/aweshell/commit/ecaddac98b87f881910dbee8b51a98f00b6d9d5d">aweshell</a>, Oh yeah !</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Eshellæç¤ºç¬¦ä¼˜åŒ–</title>
      <link>https://ramsayleung.github.io/zh/post/2017/tweak_eshell_prompt/</link>
      <pubDate>Wed, 07 Jun 2017 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/tweak_eshell_prompt/</guid>
      <description>Tweak with Emacs shell prompt</description>
      <content:encoded><![CDATA[<h2 id="å‘ç°å¸…æ°”çš„æç¤ºç¬¦"><span class="section-num">1</span> å‘ç°å¸…æ°”çš„æç¤ºç¬¦</h2>
<p>è¿‘æ—¥ï¼Œæˆ‘åœ¨æµè§ˆ <a href="https://www.reddit.com/r/emacs/comments/6f0rkz/my_fancy_eshell_prompt/">Reddit</a> çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä½ Emacs ç”¨æˆ·æŠŠä»–çš„ Eshell æç¤ºç¬¦ä¿®æ”¹å¾—å¾ˆå¸…ï¼Œå¦‚å›¾ï¼š</p>
<p><a href="/ox-hugo/eshell_prompt.png"><img loading="lazy" src="/ox-hugo/eshell_prompt.png"></a>
æœ¬ç€æ‹¿æ¥ä¸»ä¹‰çš„æƒ³æ³•ï¼Œæˆ‘å°±ç›´æ¥æŠŠè¿™ä½å°å“¥çš„ä»£ç æ·»åŠ åˆ°äº†æˆ‘çš„é…ç½®æ–‡ä»¶é‡Œé¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-function</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">user-login-name</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;red&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">system-name</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;blue&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%H:%M&#34;</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;yellow&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;white&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]\n&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;â””â”€&gt;&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34; # &#34;</span> <span class="s">&#34; $ &#34;</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ•ˆæœè‡ªç„¶æ˜¯å¾ˆ sexy.</p>
<h2 id="ä¸åŸæœ‰æç¤ºç¬¦å†²çª"><span class="section-num">2</span> ä¸åŸæœ‰æç¤ºç¬¦å†²çª</h2>
<p>ä½†æ˜¯æˆ‘åŸæ¥ä½¿ç”¨çš„ <a href="https://github.com/kaihaosw/eshell-prompt-extras">eshell-prompt-extra</a> çš„æ•ˆæœå°±è¢«è¦†ç›–äº†ã€‚è€Œ <code>eshell_prompt_extra</code> å¯ä»¥æä¾›çš„é¢å¤–ä¿¡æ¯éå¸¸å¤šï¼ŒåŒ…æ‹¬ï¼šgit, python virtualenv, ä»¥åŠè¿œç¨‹ç™»å½•æ—¶çš„ä¸»æœºä¿¡æ¯ï¼Œå¦‚å›¾ï¼š</p>

<figure><a href="/ox-hugo/eshell_extra_prompt.png">
    
    
    <input type="checkbox" id="zoomCheck-0fac0" hidden>
    <label for="zoomCheck-0fac0">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/eshell_extra_prompt.png"/> 
    
    
    </label></a>
</figure>

<p>å¦‚æœç”¨ä¸Šè¿™ä¸ª sexy çš„æç¤ºç¬¦ï¼Œeshell-extra-prompt çš„é¢å¤–çš„ä¿¡æ¯å°±ä¸èƒ½æ˜¾ç¤ºï¼Œæ„Ÿè§‰å¥½äº:(</p>
<p>é±¼å’Œç†ŠæŒæˆ‘éƒ½æƒ³è¦ï¼Œä¼¼ä¹å¤ªè´ªå¿ƒäº†ï¼Ÿæ€ä¹ˆåŠï¼Œè‡ªå·±å»ä¿®æ”¹ <code>eshell_prompt_extra</code> çš„<a href="https://github.com/kaihaosw/eshell-prompt-extras/blob/master/eshell-prompt-extras.el">æºç </a> :).</p>
<h2 id="æŠ˜è…¾æºç "><span class="section-num">3</span> æŠ˜è…¾æºç </h2>
<p><code>eshell_prompt_extra</code> è¿™ä¸ªåŒ…æ³¨é‡ŠåŠ ä¸Šå…¨éƒ¨ä»£ç ä¹Ÿåªæ˜¯ 400 è¡Œï¼Œä»£ç ä¹Ÿå†™å¾—å¾ˆæ¸…æ™°. å…¶ä¸­å¤§éƒ¨ä»½æ˜¯è¾…åŠ©å‡½æ•°ï¼Œè€Œ Eshell çš„æç¤ºç¬¦æ•ˆæœæ˜¯é€šè¿‡ä¸¤ä¸ª eshell-theme å‡½æ•°æ¥å®ç°çš„ã€‚use-package çš„é…ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell-prompt-extras</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/Code/github/eshell-prompt-extras&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="s">&#34;esh-opt&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nb">use-package</span> <span class="nv">virtualenvwrapper</span> <span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nv">venv-initialize-eshell</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;epe-theme-lambda</span> <span class="s">&#34;eshell-prompt-extras&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-highlight-prompt</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">eshell-prompt-function</span> <span class="ss">&#39;epe-theme-lambda</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€Œ <code>epe-theme-lambda</code> çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">epe-theme-lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;A eshell-prompt lambda theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-regexp</span> <span class="s">&#34;^[^#\nÎ»]*[#Î»] &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-remote-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-remote-user</span><span class="p">)</span> <span class="s">&#34;@&#34;</span> <span class="p">(</span><span class="nv">epe-remote-host</span><span class="p">)</span> <span class="s">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="ss">&#39;epe-remote-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="nv">epe-show-python-info</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;epe-venv-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">epe-venv-p</span><span class="p">)</span> <span class="nv">venv-current-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;(&#34;</span> <span class="nv">venv-current-name</span> <span class="s">&#34;) &#34;</span><span class="p">)</span> <span class="ss">&#39;epe-venv-face</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">f</span> <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;fish</span><span class="p">)</span> <span class="ss">&#39;epe-fish-path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;single</span><span class="p">)</span> <span class="ss">&#39;epe-abbrev-dir-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;full</span><span class="p">)</span> <span class="ss">&#39;abbreviate-file-name</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;epe-dir-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-git-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;:&#34;</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-git-branch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-dirty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-untracked</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">unpushed</span> <span class="p">(</span><span class="nv">epe-git-unpushed-number</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="nv">unpushed</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:&#34;</span> <span class="p">(</span><span class="nf">number-to-string</span> <span class="nv">unpushed</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">       <span class="ss">&#39;epe-git-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34; Î»&#34;</span> <span class="ss">&#39;epe-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34;#&#34;</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="ss">&#39;epe-sudo-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34; &#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç ä¸»è¦é€»è¾‘æ˜¯è°ƒç”¨ä¹‹å‰å®šä¹‰çš„è¾…åŠ©å‡½æ•°ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ˜¾ç¤º git, python, è¿œç¨‹ä¸»æœºç­‰ä¿¡æ¯ï¼Œç„¶åå¯¹ç›¸åº”çš„æç¤ºç¬¦è¿›è¡Œæ‹¼æ¥ã€‚</p>
<p>è€Œå…¶ä¸­å‡ºç°å¾—æ¯”è¾ƒé¢‘ç¹çš„ <code>epe-colorize-with-face</code> å°±æ˜¯ä½œè€…å®šä¹‰çš„ä¸€ä¸ªå®(macro), ç”¨æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ä»¥åŠå¯¹åº”çš„ face(å…¶å®å°±æ˜¯ä¸åŒçš„é¢œè‰²å•¦). çœ‹æ‡‚äº†ä»£ç å°±å¥½åŠäº†ï¼Œç°åœ¨å°±å¯ä»¥è‡ªå·±æ·»åŠ ä¸€ä¸ª Eshell ä¸»é¢˜ã€‚</p>
<h3 id="å®šä¹‰æ‰€éœ€çš„-face"><span class="section-num">3.1</span> å®šä¹‰æ‰€éœ€çš„ face</h3>
<p>å› ä¸ºæˆ‘éœ€è¦æ˜¾ç¤ºçš„ face(é¢œè‰²), <code>eshell-extra-prompt</code> å¹¶æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥å°±åªå¥½è‡ªå·±åŠ¨æ‰‹å•¦ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-delimiter-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for pipeline theme delimiter.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-user-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;red&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for user in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-host-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;blue&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for host in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-time-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;yellow&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for time in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå°±æ˜¯æŒ‰ç€åŸæœ‰çš„ Eshell æç¤ºç¬¦æ¥ç»„è£…ä¸€ä¸ªæ–°çš„ Eshell ä¸»é¢˜äº†ï¼Œç„¶åæŠŠè¿™ä¸ªä¸»é¢˜å®šä¹‰æˆ pipeline (å…¶å®æ˜¯æˆ‘è‡ªå·±ä¹Ÿæ²¡æƒ³å‡ºæ¯”è¾ƒæ–°é¢–çš„åå­—å•¦):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">epe-theme-pipeline</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;A eshell-prompt theme with full path, smiliar to oh-my-zsh theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-regexp</span> <span class="s">&#34;^[^#\nÎ»]* Î»[#]* &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">epe-remote-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nv">epe-remote-user</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-user-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nv">epe-remote-host</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-host-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">user-login-name</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-user-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">system-name</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-host-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">     <span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%H:%M&#34;</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                            <span class="ss">&#39;epe-pipeline-time-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span>  <span class="s">&#34;]\n&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â””â”€&gt;&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="nv">epe-show-python-info</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;epe-venv-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">epe-venv-p</span><span class="p">)</span> <span class="nv">venv-current-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;(&#34;</span> <span class="nv">venv-current-name</span> <span class="s">&#34;) &#34;</span><span class="p">)</span> <span class="ss">&#39;epe-venv-face</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-git-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;:&#34;</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-git-branch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-dirty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-untracked</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">unpushed</span> <span class="p">(</span><span class="nv">epe-git-unpushed-number</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="nv">unpushed</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:&#34;</span> <span class="p">(</span><span class="nf">number-to-string</span> <span class="nv">unpushed</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">       <span class="ss">&#39;epe-git-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34; Î»&#34;</span> <span class="ss">&#39;epe-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34;#&#34;</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="ss">&#39;epe-sudo-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34; &#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ€»ç»“"><span class="section-num">4</span> æ€»ç»“</h2>
<p>è¿™æ ·ä¸€ä¸ªæ–°çš„ Eshell ä¸»é¢˜å°±å®Œå·¥äº†ï¼Œç„¶åæˆ‘ç»™ <code>eshell-extra-prompt</code> å‘äº†ä¸€ä¸ª<a href="https://github.com/kaihaosw/eshell-prompt-extras/pull/16">Pull Request</a>, æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p>

<figure><a href="/ox-hugo/epe.png">
    
    
    <input type="checkbox" id="zoomCheck-45cf5" hidden>
    <label for="zoomCheck-45cf5">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/epe.png"/> 
    
    
    </label></a>
</figure>

<p>Enjoy Emacs, Enjor Tweaking :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Shellç¥å™¨fasdä¸Eshellçš„ä¸æœŸè€Œé‡</title>
      <link>https://ramsayleung.github.io/zh/post/2017/fasd-meet-eshell/</link>
      <pubDate>Thu, 02 Mar 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/fasd-meet-eshell/</guid>
      <description>An introduction about tweaking eshell with fasd</description>
      <content:encoded><![CDATA[<blockquote>
<p>fasd - quick access to files and directory</p></blockquote>
<p>ä¹‹å‰ä¸€ä½ Windows ç”¨æˆ·çœ‹åˆ°æˆ‘åœ¨ Shell ä¸‹é¢çš„æ“ä½œï¼Œä»–å¾ˆå¥‡æ€ªï¼Œè§‰å¾—æ˜æ˜å·²ç»æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨è¿™ç§å‘½ä»¤è¡Œå‘¢ï¼Œç›´æ¥ç”¨é¼ æ ‡ç‚¹å‡»ä¸å°±å¾ˆå¥½äº†ä¹ˆã€‚</p>
<p>æˆ‘è§‰å¾—å¾ˆéš¾ç›´æ¥è·Ÿä»–è§£é‡Šï¼Œå› ä¸ºä»–æ²¡æœ‰ç”¨è¿‡Linux/Unix,å®Œå…¨ä¸ç†Ÿæ‚‰å‘½ä»¤è¡Œï¼Œä¸çŸ¥é“å…¶å¼ºå¤§ä¹‹å¤„ï¼Œå…¶é«˜æ•ˆç‡æ˜¯å›¾å½¢åŒ–ç•Œé¢å®Œå…¨æ— æ³•æ¯”æ‹Ÿçš„(å½“ç„¶ï¼Œå‘½ä»¤è¡Œçš„å­¦ä¹ æˆæœ¬å’Œå­¦ä¹ æ›²çº¿è‚¯å®šæ¯”å›¾å‹åŒ–ç•Œé¢é«˜), So I live in terminal.</p>
<p>è€Œä»Šå¤©æˆ‘è¦ä»‹ç»çš„ç¥å™¨ fasd å°±æ˜¯å¯ä»¥è®©å‘½ä»¤è¡Œæ“ä½œå˜å¾—æ›´åŠ é«˜æ•ˆ</p>
<h2 id="fasd"><span class="section-num">1</span> Fasd</h2>
<p>åœ¨ Shell ä¸‹é¢æœ‰éå¸¸å¤šçš„å‘½ä»¤æ“ä½œæ˜¯ä¸æ–‡ä»¶å’Œç›®å½•ç›¸å…³çš„ï¼Œå¦‚æœä½ è¦è¿›å…¥åˆ°å¦å¤–ä¸€ä¸ªç›® å½•ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„æ¥è®¿é—®è¯¥ç›®å½•ï¼Œä½†æ˜¯å¦‚æœè¿™æ˜¯ä¸€ä¸ªä¸å½“å‰ç›®å½•ä¸ç›¸å…³çš„ç›® å½•ä½ å°±åªèƒ½é€šè¿‡ç»å¯¹è·¯å¾„æ¥è®¿é—®ã€‚</p>
<p>ä»¥æˆ‘è‡ªå·±çš„ç›®å½•ä¸ºä¾‹ï¼Œå½“å‰ç›®å½•æ˜¯ <strong><em>home/samray</em>.emacs.d/elisp/</strong> ,æˆ‘å¸Œæœ›è®¿é—® <strong>Document</strong> ç›®å½•ä¸‹ä¸€ä¸ªçš„å­ç›®å½• <strong>Python</strong>, æˆ‘å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥è®¿é—®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> ~/Document/Programming/Python
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /home/samray/Document/Programming/Python
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™å°±æ˜¯æˆ‘éœ€è¦çš„å‘½ä»¤ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ <strong>tab</strong> è¿›è¡Œç›®å½•åçš„è¡¥å…¨ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è§‰å¾—è¦è¾“å…¥çš„ä¸œè¥¿å¤ªå¤šäº†(æ­£å¦‚ Larry Wall æ‰€è¯´ï¼Œæ‡’æƒ°æ˜¯ç¨‹åºå‘˜çš„ç¾å¾·). ç„¶åï¼Œæˆ‘å‘ç°äº† <a href="https://github.com/clvv/fasd">Fasd </a>è¿™ä¸ªç¥å™¨ã€‚å®ƒå¯ä»¥è®©æˆ‘åªè¾“å…¥ <strong>Python</strong> å°±è¿›å…¥åˆ°æˆ‘æƒ³è®¿é—®çš„ <strong>Python</strong> ç›®å½•ï¼Œ</p>
<p>ç¥å¥‡å§ï¼:)</p>
<hr>
<p>Fasdä»¥è®¿é—®çš„é¢‘ç¹ç¨‹åº¦å’Œæœ€è¿‘æ˜¯å¦æœ‰è®¿é—®å¯¹æ–‡ä»¶å’Œç›®å½•åˆ†é…ä¼˜å…ˆçº§ï¼Œç„¶åé€šè¿‡åˆ¤æ–­å·²è®¿é—®çš„æ–‡ä»¶ä»¥åŠå…¶ä¼˜å…ˆçº§æ¥åˆ‡æ¢ç›®å½•æˆ–è€…æ‰“å¼€æ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœä½ ä¹‹å‰å·²ç»è®¿é—®è¿‡æŸä¸ªç›®å½•.</p>
<p>é‚£ä¹ˆ ä½ å¾ˆå®¹æ˜“å°±å¯ä»¥åˆ‡æ¢åˆ°é‚£ä¸ªç›®å½•</p>
<h3 id="å¸¸ç”¨é€‰é¡¹"><span class="section-num">1.1</span> å¸¸ç”¨é€‰é¡¹</h3>
<ul>
<li>
<p><strong>-a(any)</strong>: åŒ¹é…æ–‡ä»¶å’Œç›®å½•</p>
</li>
<li>
<p><strong>-i(interactive)</strong>: ä»¥äº¤äº’çš„æ–¹å¼é€‰æ‹©æ–‡ä»¶æˆ–è€…ç›®å½•</p>
</li>
<li>
<p><strong>-s(show/search)</strong>: æŒ‰ç…§ä¼˜å…ˆçº§å±•ç¤ºæ–‡ä»¶æˆ–è€…ç›®å½•</p>
</li>
<li>
<p><strong>-e &lt;cmd&gt;</strong>:å¯¹åŒ¹é…çš„æ–‡ä»¶è°ƒç”¨å‘½ä»¤&lt;cmd&gt;</p>
</li>
<li>
<p><strong>-d</strong>:åªåŒ¹é…ç›®å½•</p>
</li>
<li>
<p><strong>-f</strong>:åªåŒ¹é…æ–‡ä»¶
Fasd æ–‡æ¡£è¿˜å»ºè®®ä½ ä¸º fasdçš„å‘½ä»¤é€‰é¡¹è®¾ç½®åˆ«å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">a</span><span class="o">=</span><span class="s1">&#39;fasd -a&#39;</span>        <span class="c1"># any</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">s</span><span class="o">=</span><span class="s1">&#39;fasd -si&#39;</span>       <span class="c1"># show / search / select</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">d</span><span class="o">=</span><span class="s1">&#39;fasd -d&#39;</span>        <span class="c1"># directory</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">f</span><span class="o">=</span><span class="s1">&#39;fasd -f&#39;</span>        <span class="c1"># file</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">sd</span><span class="o">=</span><span class="s1">&#39;fasd -sid&#39;</span>     <span class="c1"># interactive directory selection</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">sf</span><span class="o">=</span><span class="s1">&#39;fasd -sif&#39;</span>     <span class="c1"># interactive file selection</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">z</span><span class="o">=</span><span class="s1">&#39;fasd_cd -d&#39;</span>     <span class="c1"># cd, same functionality as j in autojump</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">zz</span><span class="o">=</span><span class="s1">&#39;fasd_cd -d -i&#39;</span> <span class="c1"># cd with interactive selection</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ä½ å°±å¯ä»¥é€šè¿‡ <strong>z some-dir</strong> ç›´æ¥è¿›å…¥åˆ°æŸä¸ªç›®å½•æˆ–è€… <strong>zz some-dir</strong> é€‰æ‹©è¿›å…¥æœ‰å¤šä¸ªåŒ¹é…çš„ç‰¹å®šç›®å½•ã€‚</p>
<p>Fasd è¿˜ä¼šåˆ¤æ–­åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰çš„åŒ¹é…é€‰é¡¹æˆ–è€…æ˜¯ç›´æ¥é€‰æ‹©æœ€ä½³åŒ¹é…. ä¾‹å¦‚ä½ ä¹Ÿå¯ä»¥å°†fasdé…åˆ <em>subshell</em> ä½¿ç”¨ï¼Œä¾‹å¦‚æ‰“å¼€ <strong>foo</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim <span class="sb">`</span>f foo<span class="sb">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…æ‰“å¼€  <strong>/etc/rc.conf</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim <span class="sb">`</span>f rc conf<span class="sb">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="ä¾‹å­"><span class="section-num">1.2</span> ä¾‹å­</h3>
<p>ä½ å¯ä»¥å°†fasd é…åˆæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ï¼Œä¾‹å¦‚åˆ—ä¸¾ä»¥ <em>py</em> ç»“å°¾çš„æœ€è¿‘è®¿é—®çš„æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">f py$
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…ä½¿ç”¨Emacs æ‰“å¼€æœ€è¿‘é¢‘ç¹è®¿é—®çš„æ–‡ä»¶ <em>bar</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">f -e emacs bar
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="fasd-plus-eshell"><span class="section-num">2</span> Fasd +Eshell</h2>
<p>fasd çœŸçš„å¯ä»¥å¤§å¹…åº¦æé«˜æ•ˆç‡ï¼Œä½†æ˜¯æˆ‘æœ‰ç‚¹ä¸å¤ªæ»¡æ„çš„æ˜¯ï¼Œæˆ‘æ˜¯ä¸ª Emacser, æˆ‘çš„æ“ä½œåŸºæœ¬æ˜¯åœ¨ Emacs é‡Œå®Œæˆçš„ï¼Œè€Œæˆ‘åœ¨ Emacsé‡Œé¢ä½¿ç”¨çš„ shell æ˜¯ Eshell,Eshell ä¼¼ä¹ä¸èƒ½ä¸ fasd æ— ç¼ç»“åˆï¼Œä¼¼ä¹å¯ä»¥æŠ˜è…¾ä¸€ä¸‹ã€‚</p>
<hr>
<p><strong>z</strong> å’Œ <strong>zz</strong> å‘½ä»¤æ˜¯æ— æ³•åœ¨Eshell é‡Œé¢è¿è¡Œï¼Œå› ä¸º <strong>z</strong> æ˜¯ <strong>fasd_cd</strong> çš„åˆ«åï¼Œè€Œ*fasd_cd* æ˜¯ä¸€ä¸ªshell script å‡½æ•°ï¼ŒEshellæ— æ³•è¿è¡Œè¯¥å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">fasd_cd <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$#</span> -le <span class="m">1</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">then</span>
</span></span><span class="line"><span class="cl">        fasd <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">_fasd_ret</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>fasd -e <span class="s1">&#39;printf %s&#39;</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="o">[</span> -d <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">||</span> <span class="nb">printf</span> %s<span class="se">\n</span> <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Eshellæ— æ³•è¿è¡Œè¯¥å‡½æ•°ï¼Œå› ä¸ºEshellæ–‡æ¡£çš„åŒ®ä¹ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å¦‚ä½•ç¼–å†™è·Ÿä¸Šé¢ä»£ç ç­‰ä»·çš„ &ldquo;Eshell script&rdquo;,æ‰€ä»¥å°±ç”¨ elisp å†™ä¸€æ®µåŒæ ·åŠŸèƒ½çš„å‡½æ•°å¥½äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">samray/eshell-fasd-z</span> <span class="p">(</span><span class="kp">&amp;rest</span> <span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Use fasd to change directory more effectively by passing ARGS.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">args</span> <span class="p">(</span><span class="nv">eshell-flatten-list</span> <span class="nv">args</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">fasd</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;fasd &#34;</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">args</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">fasd-result</span> <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="nv">fasd</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">path</span> <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="s">&#34;\n$&#34;</span> <span class="s">&#34;&#34;</span> <span class="nv">fasd-result</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">eshell/cd</span> <span class="nv">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">eshell/echo</span> <span class="nv">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‡½æ•°åŠŸèƒ½å¾ˆå¿«å°±å†™å¥½äº†ï¼Œå®ç°äº† <strong>z</strong> çš„åŠŸèƒ½ï¼Œä½†æ˜¯åŸæ¥çš„ä»£ç ä¸€ç›´ä¸èƒ½æ­£å¸¸è¿è¡Œï¼ŒæŠ˜è…¾äº†ä¸€ä¸ªå¤šå°æ—¶éƒ½æ²¡è§£å†³ï¼Œè¾“å‡ºä»€ä¹ˆéƒ½æ­£å¸¸ï¼Œæœ€å debug å‘ç°æ˜¯å› ä¸ºæ˜¾ç¤ºçš„è·¯å¾„åé¢å¤šäº†ä¸€ä¸ªæ¢è¡Œç¬¦å³ <strong>/home/samray</strong> å˜æˆäº† <strong>/home/samray\n</strong>,è€Œè¾“å‡ºæ¢è¡Œç¬¦åˆä¸ä¼šæ˜¾ç¤ºï¼ŒçœŸ
çš„å‘ã€‚</p>
<p>æœ€åä¸ºå‘½ä»¤èµ‹äºˆåˆ«åå°±å¯ä»¥åƒåœ¨ <strong>zsh</strong> ä¸‹é‚£æ ·å·¥ä½œäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> z <span class="s1">&#39;samray/shell-fasd-z $1&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>æ›´å¤šçš„ç”¨æ³•å°±è¦æŸ¥é˜…å®˜æ–¹æ–‡æ¡£äº†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man fasd
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Emacs and Shell :)</p>
<p>å‚è€ƒï¼š
<a href="https://github.com/clvv/fasd">https://github.com/clvv/fasd</a></p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>æé«˜Emacså¯åŠ¨é€Ÿåº¦</title>
      <link>https://ramsayleung.github.io/zh/post/2016/emacs_startup/</link>
      <pubDate>Sat, 22 Oct 2016 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2016/emacs_startup/</guid>
      <description>Tips to reduce emacs startup time</description>
      <content:encoded><![CDATA[<p>ä¹‹å‰çœ‹åˆ°ä¸ªç¬‘è¯ï¼š</p>
<blockquote>
<ul>
<li>A: åœ¨ç­‰å¾…emacs åŠ è½½çš„æ—¶é—´é‡Œï¼Œä½ ä¼šå¹²ä»€ä¹ˆï¼Ÿ</li>
<li>B: æ‰“å¼€Vim,ä¿®æ”¹ä»£ç ï¼Œä¿å­˜ï¼Œé€€å‡º</li>
</ul></blockquote>
<p>æœ‰æ—¶å€™ï¼Œç»å¸¸çœ‹åˆ°ç¤¾åŒºé‡Œé¢æœ‰äººåå˜ˆEmacs ä»€ä¹ˆéƒ½å¥½ï¼Œå°±æ˜¯å¯åŠ¨æ—¶é—´å¤ªé•¿äº†ï¼Œå…¶å®æ˜¯å­˜åœ¨ä¸€äº›æŠ€å·§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´çš„</p>
<h2 id="æŠ€å·§1"><span class="section-num">1</span> æŠ€å·§1</h2>
<p>åœ¨ä½ çš„ <code>.emacs</code> æˆ–è€…ç›¸åº”çš„åˆå§‹åŒ–æ–‡ä»¶é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">Increase</span> <span class="nv">the</span> <span class="nv">garbage</span> <span class="nv">collection</span> <span class="nv">threshold</span> <span class="nv">to</span> <span class="mi">128</span> <span class="nv">MB</span> <span class="nv">to</span> <span class="nv">ease</span> <span class="nv">startup</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">128</span> <span class="mi">1024</span> <span class="mi">1024</span> <span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">your</span> <span class="nv">configuration</span> <span class="nv">code</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="o">......</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">Garbage</span> <span class="nv">collector-decrease</span> <span class="nv">threshold</span> <span class="nv">to</span> <span class="mi">5</span> <span class="nv">MB</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">5</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">init.el</span> <span class="nv">ends</span> <span class="nv">here</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>gc-cons-threshold</code> æŒ‡å®šäº†emacs è¿›è¡Œåƒåœ¾å›æ”¶çš„é˜€å€¼ï¼Œé»˜è®¤å€¼æ˜¯ <code>800000byte</code>,å®åœ¨æ˜¯å¤ªå°äº†ï¼Œæ‰€ä»¥Emacs ä¼šåœ¨å¯åŠ¨æœŸé—´è¿›è¡Œéå¸¸å¤šæ¬¡çš„åƒåœ¾å›æ”¶ï¼Œå¯åŠ¨æ—¶é—´è‡ªç„¶é•¿äº†ã€‚</p>
<p>åœ¨åŠ è½½å®Œä»¥åï¼Œå†æŠŠ <code>gc-cons-threshold</code> çš„å€¼è°ƒä½ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ çš„å†…å­˜å¾ˆå¤§ï¼Œä¹Ÿå¯ä»¥ä¸æ”¹å›æ¥</p>
<h2 id="æŠ€å·§2"><span class="section-num">2</span> æŠ€å·§2</h2>
<p><code>(let((file-name-hander-alist nil))init.file)</code> åŒ…è£¹(wrap)ä½ çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œå³ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">500</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">file-name-handler-alist</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">**</span> <span class="nv">your</span> <span class="nv">config</span> <span class="nv">goes</span> <span class="nv">here</span> <span class="nv">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">5</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;; init.el ends here</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸º <code>file-name-handler-alist</code> çš„é»˜è®¤å€¼æ˜¯ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´Emacs åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åŠ è½½elå’Œelc æ–‡ä»¶éƒ½ä¼šå°†æ–‡ä»¶åå’Œæ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…</p>
<h2 id="æŠ€å·§3"><span class="section-num">3</span> æŠ€å·§3</h2>
<p>Emacs lisp æœ‰ä¸€é¡¹auto-load çš„æŠ€æœ¯ï¼Œç±»ä¼¼å»¶è¿ŸåŠ è½½ï¼Œåˆç†è¿ç”¨å»¶è¿Ÿï¼Œè®©ç¬”è€…çš„Emacså¯åŠ¨åŠ è½½æ—¶é—´å‡å°‘ä¸€åŠï¼Œå› ä¸ºç¬”è€…ç”¨ <code>use-package</code> è¿™ä¸ªmacro,è€Œ <code>use-package</code> åˆé›†æˆäº†å»¶è¿ŸåŠ è½½çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ç¬”è€…å°±ç›´æ¥æ‹¿è‡ªå·±çš„ä»£ç ä¸¾ä¾‹äº†</p>
<h3 id="after"><span class="section-num">3.1</span> :after</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;; Export to twitter bootstrap</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-twbs</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">org</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="nv">ox-twbs</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>:after</code> å…³é”®å­—çš„ä½œç”¨åŸºæœ¬è·Ÿ <code>with-eval-after-load</code> çš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ç¬”è€…æ‰€
æœ‰ç±»ä¼¼çš„org-mode æ’ä»¶åŒ…éƒ½ä¼šåœ¨org-mode åŠ è½½ä»¥åæ‰ä¼šåŠ è½½</p>
<h3 id="commands"><span class="section-num">3.2</span> :commands</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">avy</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="p">(</span><span class="nv">avy-goto-char</span> <span class="nv">avy-goto-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œå°±è´´ä¸Š<a href="https://github.com/jwiegley/use-package">use-package</a>æ–‡æ¡£ çš„è¯´æ˜äº†</p>
<blockquote>
<p>When you use the :commands keyword, it creates autoloads for those commands
and defers loading of the module until they are used</p></blockquote>
<p>ä¹Ÿå°±æ˜¯ <code>:commands</code> å…³é”®å­—å°±åˆ›å»ºäº†åé¢æ‰€æ¥çš„å‘½ä»¤çš„ <code>autoloads</code> æœºåˆ¶äº†</p>
<h3 id="bind-mode"><span class="section-num">3.3</span> :bind :mode</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">hi-lock</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;M-o l&#34;</span> <span class="o">.</span> <span class="nv">highlight-lines-matching-regexp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o r&#34;</span> <span class="o">.</span> <span class="nv">highlight-regexp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o w&#34;</span> <span class="o">.</span> <span class="nv">highlight-phrase</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vue-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.vue\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">vue-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">setq</span> <span class="nv">mmm-submode-decoration-level</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™„ä¸Šæ–‡æ¡£è¯´æ˜</p>
<blockquote>
<p>In almost all cases you don&rsquo;t need to manually specify :defer t. This is implied
whenever :bind or :mode or :interpreter is used</p></blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ ä½¿ç”¨äº† <code>:bind</code> æˆ–è€… <code>:mode</code> å…³é”®å­—çš„æ—¶å€™ï¼Œä¸ç”¨æ˜ç¡®æŒ‡å®š <code>:defer</code> ä¹Ÿå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚</p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ï¼Œç›´æ¥ä½¿ç”¨ <code>:defer</code> å…³é”®å­—æ¥æŒ‡å®šå»¶è¿ŸåŠ è½½. ä¸è¿‡å‰ææ˜¯ï¼Œä½ è¦æ˜ç¡®å®ƒåŠ è½½çš„æ—¶æœº</p>
<blockquote>
<p>Typically, you only need to specify :defer if you know for a fact that some
other package will do something to cause your package to load at the appropriate
time, and thus you would like to defer loading even though use-package isn&rsquo;t
creating any autoloads for you.</p></blockquote>
<p>è´´ä¸Šç¬”è€…è‡ªå·±çš„ä»£ç ï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">anaconda-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span><span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;anaconda-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;anaconda-eldoc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ · <code>anaconda-mode</code> å°±ä¼šåœ¨ <code>python-mode</code> åŠ è½½ä»¥åè¢«åŠ è½½</p>
<p>Enjoy Emacs :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>åœ¨Emacsä¸­ä½¿ç”¨Ipython</title>
      <link>https://ramsayleung.github.io/zh/post/2016/emacs_ipython/</link>
      <pubDate>Wed, 03 Aug 2016 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2016/emacs_ipython/</guid>
      <description>Use Ipython in Emasc</description>
      <content:encoded><![CDATA[<h2 id="emacs-ipython-è¾“å‡ºé”™è¯¯"><span class="section-num">1</span> Emacs Ipython è¾“å‡ºé”™è¯¯</h2>
<p>åœ¨Emacs è¿è¡Œ <code>run-python</code> çš„æ—¶å€™ï¼ŒæŠ¥é”™äº†ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">[</span><span class="sc">?1</span><span class="nv">2l</span><span class="p">[</span><span class="sc">?2</span><span class="nv">5h2+2</span>
</span></span><span class="line"><span class="cl">      <span class="p">[</span><span class="nv">J</span><span class="p">[</span><span class="sc">?7</span><span class="nv">h</span><span class="p">[</span><span class="sc">?1</span><span class="nv">2l</span><span class="p">[</span><span class="sc">?2</span><span class="nv">5h</span><span class="p">[</span><span class="sc">?2</span><span class="nv">004l</span><span class="p">[</span><span class="sc">?7</span><span class="nv">hOut</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="mi">4</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºæˆ‘çš„ç‰ˆæœ¬æ—¶Ipython5,æŸ¥é˜…æ–‡æ¡£<a href="http://ipython.readthedocs.io/en/stable/whatsnew/version5.html#id1">http://ipython.readthedocs.io/en/stable/whatsnew/version5.html#id1</a>
ä¹‹åï¼Œå‘ç°Ipython5 æœ‰äº†æ–°çš„terminal æ¥å£ï¼Œå’ŒEmacs ç»§æ‰¿çš„shell ä¸å…¼å®¹ï¼Œæ‰€ä»¥
ä¼šå‡ºç°ä¸Šè¿°çš„é”™è¯¯ï¼Œåªè¦ç»™Ipython åŠ ä¸Šè¿è¡Œå‚æ•°å°±èƒ½è§£å†³äº†ï¼Œæ‰€ä»¥åªè¦åœ¨ <strong>.emacs</strong>
æˆ–è€…å¯¹åº”çš„åˆå§‹åŒ–æ–‡ä»¶åŠ ä¸Šä¸‹é¢è¯­å¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">python-shell-interpreter</span> <span class="s">&#34;ipython&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nv">python-shell-interpreter-args</span> <span class="s">&#34;--simple-prompt -i&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="update-2017-3-15"><span class="section-num">1.1</span> Update 2017-3-15</h3>
<p>åœ¨æ·»åŠ äº† <code>--simple-promp -i</code> å‚æ•°ä»¥åï¼Œè™½è¯´ä¹±ç çš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†
åœ¨Ipython é‡Œé¢æ˜¯æ²¡æ³•æ— æ³•è¾“å…¥å¤šè¡Œå†…å®¹çš„ï¼Œå³ä½¿æ˜¯ä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼Œè¯¦æƒ…æŸ¥çœ‹è¿™æ¡issue
<a href="https://github.com/ipython/ipython/issues/9816">https://github.com/ipython/ipython/issues/9816</a>. ç°åœ¨Ipython å¼€å‘ç¤¾åŒºè¿˜æ²¡æœ‰è§£å†³è¿™ä¸ª
é—®é¢˜ï¼Œæ‰€ä»¥ç°åœ¨çš„æƒå®œä¹‹è®¡å°±æ˜¯ä½¿ç”¨ Ipython4,ç­‰åˆ°ç¤¾åŒºè§£å†³äº†è¿™ä¸ªé—®é¢˜åœ¨å‡çº§ä¸º Ipython5</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pip install --force-reinstall <span class="nv">ipython</span><span class="o">==</span>4.2.1
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="emacs-ipython-çš„ä½¿ç”¨ä¼˜åŒ–"><span class="section-num">2</span> Emacs Ipython çš„ä½¿ç”¨ä¼˜åŒ–</h2>
<h3 id="python-pop"><span class="section-num">2.1</span> python-pop</h3>
<p>å› ä¸ºæˆ‘ä¹‹å‰ä½¿ç”¨Emacsçš„æ—¶å€™ï¼Œæ˜¯ä½¿ç”¨Spacemacsçš„é…ç½®çš„ï¼Œä½†æ˜¯åæ¥è§‰å¾—è¿˜æ˜¯è‡ªå·±çš„ é…ç½®ç”¨çš„æ›´èˆ’æœï¼Œæ‰€ä»¥åˆåˆ‡æ¢å›è‡ªå·±çš„é…ç½®ã€‚</p>
<p>ä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆæƒ³å¿µSpacemacsçš„ä¸€äº›ç»‘å®šï¼Œ ä¾‹å¦‚shellåœ¨åº•ä¸‹å¼¹å‡ºï¼Œæˆ–è€…æ˜¯å…³é—­ï¼Œç„¶åæ‰¾åˆ°äº†<a href="https://github.com/kyagi/shell-pop-el">Shell-pop</a> è¿™package,å°±å¯ä»¥ç”¨å›
Spacemacsçš„shellä½¿ç”¨ä¹ æƒ¯ã€‚</p>
<p>ç„¶åæˆ‘è§‰å¾—ï¼ŒIpython shellä¹Ÿå¯ä»¥è¿™æ ·é…ç½®ï¼Œåªä¸è¿‡æˆ‘æ²¡æœ‰å‘ç°ç±»ä¼¼çš„package,åˆå› ä¸ºEmacs Lispçš„å¼ºå¤§ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±å†™äº†ä¸€æ®µå°å‡½æ•°å®ç°
shell-pop çš„åŠŸèƒ½</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">samray/python-pop</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Run python and switch to the python buffer.
</span></span></span><span class="line"><span class="cl"><span class="s">similar to shell-pop&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">get-buffer</span> <span class="s">&#34;*Python*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">string=</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">)</span> <span class="s">&#34;*Python*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nv">one-window-p</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nb">progn</span> <span class="p">(</span><span class="nv">bury-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                     <span class="p">(</span><span class="nv">delete-window</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">progn</span> <span class="p">(</span><span class="nv">switch-to-buffer-other-window</span> <span class="s">&#34;*Python*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">end-of-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">evil-insert-state</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">run-python</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">switch-to-buffer-other-window</span> <span class="s">&#34;*Python*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">end-of-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">evil-insert-state</span><span class="p">))))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨Evil,å¯ä»¥æŠŠ <code>(evil-insert-state)</code> å»æ‰</p>
<h3 id="ipython-history"><span class="section-num">2.2</span> Ipython History</h3>
<p>æˆ‘åœ¨æ™®é€šçš„Shellä½¿ç”¨Ipythonçš„æ—¶å€™ï¼Œå¾ˆè‡ªç„¶åœ°ä½¿ç”¨ä¸Šä¸‹æ–¹å‘é”®ç¿»åˆ°ä¸Šä¸€æ¡/ä¸‹ä¸€æ¡
æ‰§è¡Œçš„å‘½ä»¤ï¼Œå› ä¸ºshellçš„ä½¿ç”¨ä¹ æƒ¯å°±æ˜¯è¿™æ ·æ»´ã€‚</p>
<p>ä½†æ˜¯åœ¨Emacsé‡Œé¢ä½¿ç”¨Ipython,ä¸Šä¸‹ æ–¹å‘é”®æ˜¯å»åˆ°ä¸Šä¸€è¡Œ/ä¸‹ä¸€è¡Œï¼Œå°±å¥½åƒ vim çš„ <code>j</code> <code>k</code>,å¦‚æœè¦ç¿»åˆ°ä¸Šä¸€æ¡å‘½ä»¤ï¼Œå¿«æ·é”®
æ˜¯ <code>M-p</code>,å®åœ¨å¾ˆä¸ä¹ æƒ¯ï¼Œæ‰€ä»¥åœ¨æŸ¥äº†ä¸€ä¸‹Emacs manual åï¼Œæˆ‘æ”¹äº†ä¸€ä¸‹æŒ‰é”®ç»‘å®šå°±å®ç°äº†æˆ‘æƒ³è¦çš„æ•ˆæœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nf">define-key</span> <span class="nv">comint-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;up&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;comint-previous-input</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">define-key</span> <span class="nv">comint-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;&lt;down&gt;&#34;</span><span class="p">)</span> <span class="ss">&#39;comint-next-input</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Emacs :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
  </channel>
</rss>
