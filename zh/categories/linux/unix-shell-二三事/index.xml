<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Linux/Unix Shell äºŒä¸‰äº‹ on èŠ±ç”Ÿåœ°</title>
    <link>https://ramsayleung.github.io/zh/categories/linux/unix-shell-%E4%BA%8C%E4%B8%89%E4%BA%8B/</link>
    <description>Recent content in Linux/Unix Shell äºŒä¸‰äº‹ on èŠ±ç”Ÿåœ°</description>
    <image>
      <title>èŠ±ç”Ÿåœ°</title>
      <url>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.120.4</generator>
    <language>zh</language>
    <copyright>See this site&amp;rsquo;s source code here, licensed under GPLv3 Â·</copyright>
    <atom:link href="https://ramsayleung.github.io/zh/categories/linux/unix-shell-%E4%BA%8C%E4%B8%89%E4%BA%8B/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨grep</title>
      <link>https://ramsayleung.github.io/zh/post/2017/grep/</link>
      <pubDate>Mon, 13 Mar 2017 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/grep/</guid>
      <description>an introduction about grep</description>
      <content:encoded><![CDATA[<p>æ–‡æœ¬ä¸‰å‰‘å®¢ä¹‹ Grep</p>
<blockquote>
<p>grep - print  lines matching a pattern</p>
</blockquote>
<p>ä»Šå¤©æˆ‘æƒ³èŠèŠ <strong>grep</strong> è¿™ä¸ªå‘½ä»¤ï¼›æ®è¯´ï¼Œæœ‰Unix/Linux çš„åœ°æ–¹å°±ä¼šæœ‰ <strong>grep</strong>, è¿™ä¸ªå¯èƒ½æ˜¯å®‰è£…å¾—æœ€å¹¿æ³›çš„å‘½ä»¤ä¹‹ä¸€ï¼›é‚£ä¹ˆ <strong>grep</strong> æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿ</p>
<p>grep å…¶å®æ˜¯ç”¨æ¥åœ¨æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šå†…å®¹æˆ–è€…æ¨¡å¼çš„å·¥å…·(é…åˆæ­£åˆ™è¡¨è¾¾å¼â€œé£Ÿç”¨â€ï¼Œå‘³é“æ›´ä½³ :))ç°åœ¨å°±æ¥ä¸€èµ·çœ‹çœ‹*grep* çš„ç”¨æ³•</p>
<h2 id="åŸºæœ¬ç”¨æ³•"><span class="section-num">1</span> åŸºæœ¬ç”¨æ³•</h2>
<h3 id="åŸºç¡€ç”¨æ³•"><span class="section-num">1.1</span> åŸºç¡€ç”¨æ³•</h3>
<p>ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ–‡ä»¶(åŒåŸè®°å¼€å¤´)tinytale.txt,å†…å®¹å¦‚ä¸‹</p>
<blockquote>
<p>it was the best of times it was the worst of times
it was the age of wisdom it was age of foolishness
it was the epoch of belief it was the epoch of incredulity
it was the season of light it was the season of darkness
IT WAS THE SPRING OF HOPE IT WAS THE WINTER OF DESPAIRE</p>
</blockquote>
<p>ç°åœ¨å¼€å§‹ä»‹ç» <strong>grep</strong> çš„åŸºæœ¬ç”¨æ³•ï¼š <strong>grep</strong> çš„åŸºæœ¬ç”¨æ³•å¾ˆç®€å•çš„ï¼Œå‡è®¾æˆ‘æƒ³è¦æœç´¢å•è¯ <strong>darkness</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep darkness /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the season of light it was the season of darkness
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç»“åˆæ­£åˆ™è¡¨è¾¾å¼"><span class="section-num">1.2</span> ç»“åˆæ­£åˆ™è¡¨è¾¾å¼</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ <strong>grep</strong> æ˜¯å¼€å¯æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶æœç´¢ä¸­ä½¿ç”¨
æ­£åˆ™è¡¨è¾¾å¼ã€‚ç°åœ¨åœ¨æ–‡ä»¶ä¸­æœç´¢ä»¥å­—æ¯ <strong>e</strong> å¼€å¤´åæ¥ä¸‰ä¸ªå­—ç¬¦ï¼Œç„¶åä»¥ <strong>h</strong> ç»“å°¾çš„å•è¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep <span class="s2">&#34;e...h&#34;</span> /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the epoch of belief it was the epoch of incredulity
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…äº† <strong>epoch</strong> è¿™ä¸ªå•è¯ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„å¨åŠ›æ— ä¸ä¼¦æ¯”çš„ï¼ŒæŠŠ <strong>grep*å’Œæ­£åˆ™è¡¨è¾¾å¼ç»“åˆèµ·æ¥å¯ä»¥æ›´å¥½åœ°å‘æŒ¥ *grep</strong> è¿™ä¸ªå·¥å…·çš„æ½œåŠ›ï¼›è€Œæœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç» <strong>grep</strong>, æ›´å¤šæœ‰å…³æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ä¸ç»†è®²äº†</p>
<h3 id="ç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°"><span class="section-num">1.3</span> ç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°</h3>
<p>æœ‰æ—¶ï¼Œå¦‚æœä½ éœ€è¦ç»Ÿè®¡æŸç§æ¨¡å¼æˆ–è€…æŸä¸ªå•è¯å‡ºç°çš„ä¸ªæ•°ï¼Œä½ ä¼šå‘ç° <strong>grep</strong> éå¸¸æœ‰ç”¨ï¼›</p>
<p>è¦å®ç°è¯¥åŠŸèƒ½ï¼Œåªéœ€ç»™ <strong>grep</strong> æ·»åŠ  <strong>-c</strong> å‚æ•°ï¼›ä¾‹å¦‚ç»Ÿè®¡å•è¯ <strong>the</strong> å‡ºç°çš„ä¸ªæ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -c the /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">4
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–‡æœ¬ä¸­åŒ…å«4ä¸ª <strong>the</strong></p>
<h3 id="å¿½ç•¥å¤§å°å†™"><span class="section-num">1.4</span> å¿½ç•¥å¤§å°å†™</h3>
<p>å‰é¢æåˆ°ï¼Œ <strong>grep</strong> é»˜è®¤æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æœç´¢æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ <strong>grep</strong> æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼›</p>
<p>å¦‚æœä½ æƒ³ä¿®æ”¹ <strong>grep</strong> çš„é»˜è®¤è¡Œä¸ºæ¥å¿½ç•¥å¤§å°å†™ï¼Œä½ å¯ä»¥æ·»åŠ  <strong>-i</strong> å‚æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -i the /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the best of times it was the worst of times
</span></span><span class="line"><span class="cl">it was the age of wisdom it was age of foolishness
</span></span><span class="line"><span class="cl">it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">it was the season of light it was the season of darkness
</span></span><span class="line"><span class="cl">IT WAS THE SPRING OF HOPE IT WAS THE WINTER OF DESPAIRE
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥å‘ç° <strong>THE</strong> ä¹Ÿæ˜¯å¯ä»¥è¢« grep æœç´¢åˆ°çš„ï¼›ä½†æ˜¯å¦‚æœæ²¡æœ‰æ·»åŠ  <strong>-i</strong> ,ä½ åªä¼šçœ‹åˆ°4è¡Œè¾“å‡ºã€‚</p>
<p>å½“ç„¶ä½ å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æ·»åŠ å¿½ç•¥å¤§å°å†™çš„æ¨¡å¼ï¼Œåªæ˜¯ç›´æ¥æ·»åŠ  <strong>-i</strong> ä¼šç®€å•å¾ˆå¤šã€‚</p>
<h2 id="æœç´¢å¤šä¸ªæ–‡ä»¶"><span class="section-num">2</span> æœç´¢å¤šä¸ªæ–‡ä»¶</h2>
<p>ä¸Šé¢æœç´¢çš„éƒ½åªæ˜¯å•ä¸ªæ–‡ä»¶ï¼Œè€Œ grep å¯ä»¥è®©ä½ åŒæ—¶æœç´¢å¤šä¸ªæ–‡ä»¶ï¼›ç°åœ¨å°±æ¥çœ‹çœ‹æ€ä¹ˆæœç´¢å¤šä¸ªæ–‡ä»¶å§ã€‚</p>
<p>ä¸‹é¢ä¸¤ç§å†™æ³•ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººæ¨å´‡ç¬¬ä¸€ç§ï¼Œå› ä¸ºå¯ä»¥è¾“å…¥æ›´å°‘ä¸€äº›å†…å®¹ :)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/<span class="o">{</span>tinytale.txt,tale.txt<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/tinytale.txt /tmp/tale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">tinytale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">tale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">tale.txt:pains of by rearing her in the belief that her father was dead
</span></span><span class="line"><span class="cl">tale.txt:this was no passive belief but an active weapon which they flashed
</span></span><span class="line"><span class="cl">tale.txt:belief in solomon deducting a mere trifle for this slight mistake
</span></span><span class="line"><span class="cl">tale.txt:you will bear testimony to what i have said and to your belief in it
</span></span><span class="line"><span class="cl">tale.txt:herself into the show of a belief that they would soon be reunited
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œ <strong>grep</strong> æŠŠåŒ¹é…åˆ°å•è¯çš„é‚£ä¸€è¡Œå†…å®¹å’Œå¯¹åº”çš„æ–‡ä»¶éƒ½æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½ å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çœ‹åˆ°æœç´¢ç»“æœï¼Œå¹¶çŸ¥é“åŒ¹é…å•è¯çš„æ¥æºã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™æ ·ï¼Œä¸æƒ³è¾“å…¥é‚£ä¹ˆå¤šçš„å†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/*.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœä¹Ÿä¼šè·Ÿä¸Šé¢ä¸€è‡´ (å‡è®¾ä½  <strong><em>tmp</em></strong> ç›®å½•ä¸‹åªæœ‰ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶); æˆ‘å‘Šè¯‰*grep* æœç´¢*/tmp* ä¸‹æ‰€æœ‰çš„ <strong>.txt</strong> æ–‡ä»¶ã€‚</p>
<h3 id="é€’å½’æœç´¢"><span class="section-num">2.1</span> é€’å½’æœç´¢</h3>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>grep</strong> é€’å½’æœç´¢ç›®å½•ï¼›ä½ åªéœ€åœ¨æŒ‡å®šç›®å½•åï¼Œæ·»åŠ  <strong>-R</strong> , <strong>grep</strong> å°±ä¼š
é€’å½’æœç´¢æŒ‡å®šç›®å½•çš„æ‰€æœ‰å­ç›®å½•ã€‚æˆ‘å·²ç»æŠŠå½“å‰ç›®å½•åˆ‡æ¢åˆ° <strong>/tmp</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -R <span class="s2">&#34;belief&#34;</span> .
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">./tale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">./tale.txt:pains of by rearing her in the belief that her father was dead
</span></span><span class="line"><span class="cl">./tale.txt:this was no passive belief but an active weapon which they flashed
</span></span><span class="line"><span class="cl">./tale.txt:belief in solomon deducting a mere trifle for this slight mistake
</span></span><span class="line"><span class="cl">./tale.txt:you will bear testimony to what i have said and to your belief in it
</span></span><span class="line"><span class="cl">./tale.txt:herself into the show of a belief that they would soon be reunited
</span></span><span class="line"><span class="cl">./tinytale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœå±•ç¤ºäº†ä¸€ç³»åˆ—åœ¨å½“å‰ç›®å½•å’Œå­ç›®å½•åŒ¹é… <strong>belief</strong> çš„æ–‡ä»¶ã€‚æ­¤å¤–ä½ ä¹Ÿå¯ä»¥æ’é™¤æ‰æŸäº›ä½ 
ä¸éœ€è¦æœç´¢çš„æ–‡ä»¶ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ª <strong>foo.xml</strong> çš„æ–‡ä»¶ï¼Œé‡Œé¢ä¹Ÿå¯èƒ½ä¼šæœ‰ <strong>belief</strong> è¿™ä¸ªå•è¯ï¼Œ
ä½†æ˜¯ä½ å°±æ˜¯ä¸æƒ³æœç´¢è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…å…¨éƒ¨çš„ <strong>.xml</strong> æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿™ä¹ˆç©ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -R --exclude<span class="o">=</span><span class="s2">&#34;*.xml&#34;</span> <span class="s2">&#34;belief&#34;</span> .
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åœ¨æ ‡å‡†è¾“å…¥æœç´¢"><span class="section-num">3</span> åœ¨æ ‡å‡†è¾“å…¥æœç´¢</h2>
<p><strong>grep</strong> ä¹Ÿæ˜¯è¿‡æ»¤å™¨ï¼Œæ‰€ä»¥ <strong>grep</strong> è‡ªç„¶è€Œç„¶å…·æœ‰å¤„ç†æ ‡å‡†è¾“å…¥è¾“å‡ºçš„èƒ½åŠ›äº†ï¼›å¤„ç†å…¶ä»–å‘½ä»¤çš„è¾“å‡ºç»“æœä¹Ÿæ˜¯ <strong>grep</strong> éå¸¸å¸¸ç”¨çš„åœºæ™¯ä¹‹ä¸€ã€‚å‡è®¾ä½ ç°åœ¨çš„ <strong>vim</strong> çªç„¶å¡é¡¿ï¼ŒæŒ‚äº†:),ä½ æƒ³è¦ <strong>kill</strong> æ‰ <strong>vim</strong> çš„è¿›ç¨‹ï¼Œä½ å¯ä»¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ps -e<span class="p">|</span>grep vim
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">samray   21939     1  0 19:42 ?        00:00:00 gvim
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ç¬¬ä¸€æ¡è®°å½•å°±æ˜¯ä½ æƒ³è¦æœç´¢çš„è¿›ç¨‹äº†ï¼Œä½ è¿è¡Œ <strong>kill 21939</strong> å°±å¯ä»¥æ€æ‰ vim çš„è¿›ç¨‹äº†ï¼›å› ä¸ºæˆ‘ç³»ç»Ÿçš„æ˜¯å›¾å‹åŒ–ç•Œé¢çš„ vim, æ‰€ä»¥æ˜¯ gvim.</p>
<hr>
<p>æ­£å¦‚æˆ‘ä¹‹å‰çš„æ–‡ç« æåˆ°çš„é‚£æ ·ï¼Œå•çº¯çš„è¿‡æ»¤å™¨çš„ç”¨å¤„ä¼¼ä¹ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœç»“åˆèµ·æ¥å°±ä¼šå¨åŠ›æ— ç©·è‡³äºï¼Œå¦‚ä½•ç»“åˆï¼Œå°±éœ€è¦æ…¢æ…¢æ¢ç´¢äº†ã€‚</p>
<h2 id="åå‘æœç´¢"><span class="section-num">4</span> åå‘æœç´¢</h2>
<p>ç°åœ¨æ‰§è¡Œçš„æœç´¢éƒ½æ˜¯åŒ¹é…æœç´¢ï¼Œå³å°†åŒ¹é…çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œ <strong>grep</strong> è¿˜æœ‰åå‘æœç´¢çš„åŠŸèƒ½ (invert Searches)å°±æ˜¯å°†ä¸åŒ…å«æœ‰æŒ‡å®šæ¨¡å¼çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>è¯¥åŠŸèƒ½åœ¨ç”¨æ¥ä¿®æ”¹æœ‰å¾ˆå¤šæ³¨é‡Šçš„é…ç½®æ–‡ä»¶æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼›ä¾‹å¦‚å¸¸ç”¨çš„æœåŠ¡å™¨è½¯ä»¶ <strong>nginx</strong>  çš„é…ç½®æ–‡ä»¶æ˜¯é»˜è®¤æ˜¯å«æœ‰å¾ˆå¤šæ³¨é‡Šçš„ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="c1">#user www-data;</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_processes auto;</span>
</span></span><span class="line"><span class="cl"><span class="na">pid /run/nginx.pid;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/modules-enabled/*.conf;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">events {</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_connections 1024;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># multi_accept on;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">http {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Basic Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">sendfile on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nopush on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nodelay on;</span>
</span></span><span class="line"><span class="cl"><span class="na">keepalive_timeout 65;</span>
</span></span><span class="line"><span class="cl"><span class="na">types_hash_max_size 2048;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># server_tokens off;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># server_names_hash_bucket_size 64;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># server_name_in_redirect off;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/mime.types;</span>
</span></span><span class="line"><span class="cl"><span class="na">default_type application/octet-stream;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># SSL Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE</span>
</span></span><span class="line"><span class="cl"><span class="na">ssl_prefer_server_ciphers on;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Logging Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="na">log_format main &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; $status $bytes_sent &#34;$http_referer&#34; &#34;$http_user_agent&#34; &#34;$gzip_ratio&#34;&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="na">access_log /var/log/nginx/access.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">error_log /var/log/nginx/error.log;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Gzip Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">gzip on;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip_disable &#34;msie6&#34;;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_vary on;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_proxied any;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_comp_level 6;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_buffers 16 8k;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_http_version 1.1;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Virtual Host Configs</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/conf.d/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/sites-enabled/*;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">ignore_invalid_headers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_header_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_body_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">send_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_max_body_size 100m;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffer_size 128k;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffers 8 128k;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream tomcat_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:8080 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream gunicorn_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:5000 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server_name 127.0.0.1;</span>
</span></span><span class="line"><span class="cl"><span class="na">listen 443;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl on;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl_certificate /etc/letsencrypt/live/samray.ren/fullchain.pem;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl_certificate_key /etc/letsencrypt/live/samray.ren/privkey.pem;</span>
</span></span><span class="line"><span class="cl"><span class="na">location / {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Forward SSL so that Tomcat knows what to do</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Host $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Server $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://tomcat_server;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Proto https;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_connect_timeout      240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_send_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_read_timeout         240;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">location /test{</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">location /weixin {</span>
</span></span><span class="line"><span class="cl"><span class="c1"># try_files $uri @proxy_to_app;</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location @proxy_to_app {</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header Host $http_host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://gunicorn_server;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#mail {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# See sample authentication script at:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# auth_http localhost/auth.php;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# pop3_capabilities &#34;TOP&#34; &#34;USER&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# imap_capabilities &#34;IMAP4rev1&#34; &#34;UIDPLUS&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	server {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		listen     localhost:110;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		protocol   pop3;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		proxy      on;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	server {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		listen     localhost:143;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		protocol   imap;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		proxy      on;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‡Œé¢å®åœ¨æœ‰å¤ªå¤šçš„æ³¨é‡Šäº†ï¼Œè™½è¯´æ˜¯å¾ˆå¥½çš„å‚è€ƒï¼Œä½†æ˜¯çœ‹å¤šäº†ä¼šæ„Ÿè§‰å¾ˆç¢çœ¼ï¼Œæ‰€ä»¥ä½ å¸Œæœ›å¯ä»¥æœ‰ä¸€ä»½æ²¡æœ‰æ³¨é‡Šçš„é…ç½®æ–‡ä»¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <strong>grep</strong> å’Œå‚æ•° <strong>-v</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">egrep -v <span class="s2">&#34;#|^</span>$<span class="s2">&#34;</span> /etc/nginx/nginx.conf &gt;/tmp/nging.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">worker_processes auto;</span>
</span></span><span class="line"><span class="cl"><span class="na">pid /run/nginx.pid;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/modules-enabled/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">events {</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_connections 1024;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">http {</span>
</span></span><span class="line"><span class="cl"><span class="na">sendfile on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nopush on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nodelay on;</span>
</span></span><span class="line"><span class="cl"><span class="na">keepalive_timeout 65;</span>
</span></span><span class="line"><span class="cl"><span class="na">types_hash_max_size 2048;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/mime.types;</span>
</span></span><span class="line"><span class="cl"><span class="na">default_type application/octet-stream;</span>
</span></span><span class="line"><span class="cl"><span class="na">ssl_prefer_server_ciphers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">log_format main &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; $status $bytes_sent &#34;$http_referer&#34; &#34;$http_user_agent&#34; &#34;$gzip_ratio&#34;&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="na">access_log /var/log/nginx/access.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">error_log /var/log/nginx/error.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip on;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip_disable &#34;msie6&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/conf.d/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/sites-enabled/*;</span>
</span></span><span class="line"><span class="cl"><span class="na">ignore_invalid_headers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_header_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_body_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">send_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_max_body_size 100m;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffer_size 128k;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffers 8 128k;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream tomcat_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:8080 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream gunicorn_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:5000 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server_name 127.0.0.1;</span>
</span></span><span class="line"><span class="cl"><span class="na">listen 443;</span>
</span></span><span class="line"><span class="cl"><span class="na">location / {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Host $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Server $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://tomcat_server;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Proto https;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_connect_timeout      240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_send_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_read_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location /test{</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location /weixin {</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location @proxy_to_app {</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header Host $http_host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://gunicorn_server;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>egrep</strong> æ˜¯ <strong>grep</strong> çš„æ‰©å±•ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ <strong>-E</strong> ä½¿ç”¨æ‰©å±•åŠŸèƒ½ã€‚å°±è¿™æ ·ï¼Œä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä»½å¾ˆâ€œå¹²å‡€â€çš„é…ç½®æ–‡ä»¶äº†ã€‚</p>
<h2 id="å°ç»“"><span class="section-num">5</span> å°ç»“</h2>
<p>åœ¨ä»¥å‰ <strong>grep</strong> æ˜¯ <strong>hacker</strong> å·¥å…·ç®±é‡Œé¢å®¡æŸ¥æºä»£ç å¿…ä¸å¯å°‘çš„å·¥å…·ä¹‹ä¸€ï¼Œä½†æ˜¯éšç€æŠ€æœ¯çš„å‘å±•ï¼Œä¼¼ä¹å¯¹æ¯”å…¶ä»–åŒç±»å‹çš„å·¥å…·ï¼Œ <strong>grep</strong> çš„æ€§èƒ½å·²ç»éš¾å°½äººæ„ï¼Œç‰¹åˆ«æ˜¯å¯¹æ¯” <strong>ag</strong> è¿™ä¸ªæœç´¢ç¥å™¨ï¼›</p>
<p>è™½è¯´å¾ˆå¤šäººéƒ½å·²ç»è½¬ç§»åˆ°äº† <strong>ag</strong> é˜µè¥ï¼Œä½†æ˜¯å› ä¸º <strong>grep</strong> è¢«å¹¿æ³›é¢„è£…åˆ°å„ç±»çš„Linux/Unix æœºå™¨ï¼Œæ‰€ä»¥ <strong>grep</strong> è¿˜æ˜¯ä½¿ç”¨å¾—å¾ˆå¹¿æ³›æ»´ã€‚</p>
<p>æ›´å¤š <strong>grep</strong> çš„ç”¨æ³•å°±éœ€è¦æŸ¥è¯¢æ‰‹å†Œäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man grep
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨grep</title>
      <link>https://ramsayleung.github.io/zh/post/2017/grep/</link>
      <pubDate>Mon, 13 Mar 2017 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/grep/</guid>
      <description>an introduction about grep</description>
      <content:encoded><![CDATA[<p>æ–‡æœ¬ä¸‰å‰‘å®¢ä¹‹ Grep</p>
<blockquote>
<p>grep - print  lines matching a pattern</p>
</blockquote>
<p>ä»Šå¤©æˆ‘æƒ³èŠèŠ <strong>grep</strong> è¿™ä¸ªå‘½ä»¤ï¼›æ®è¯´ï¼Œæœ‰Unix/Linux çš„åœ°æ–¹å°±ä¼šæœ‰ <strong>grep</strong>, è¿™ä¸ªå¯èƒ½æ˜¯å®‰è£…å¾—æœ€å¹¿æ³›çš„å‘½ä»¤ä¹‹ä¸€ï¼›é‚£ä¹ˆ <strong>grep</strong> æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿ</p>
<p>grep å…¶å®æ˜¯ç”¨æ¥åœ¨æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šå†…å®¹æˆ–è€…æ¨¡å¼çš„å·¥å…·(é…åˆæ­£åˆ™è¡¨è¾¾å¼â€œé£Ÿç”¨â€ï¼Œå‘³é“æ›´ä½³ :))ç°åœ¨å°±æ¥ä¸€èµ·çœ‹çœ‹*grep* çš„ç”¨æ³•</p>
<h2 id="åŸºæœ¬ç”¨æ³•"><span class="section-num">1</span> åŸºæœ¬ç”¨æ³•</h2>
<h3 id="åŸºç¡€ç”¨æ³•"><span class="section-num">1.1</span> åŸºç¡€ç”¨æ³•</h3>
<p>ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ–‡ä»¶(åŒåŸè®°å¼€å¤´)tinytale.txt,å†…å®¹å¦‚ä¸‹</p>
<blockquote>
<p>it was the best of times it was the worst of times
it was the age of wisdom it was age of foolishness
it was the epoch of belief it was the epoch of incredulity
it was the season of light it was the season of darkness
IT WAS THE SPRING OF HOPE IT WAS THE WINTER OF DESPAIRE</p>
</blockquote>
<p>ç°åœ¨å¼€å§‹ä»‹ç» <strong>grep</strong> çš„åŸºæœ¬ç”¨æ³•ï¼š <strong>grep</strong> çš„åŸºæœ¬ç”¨æ³•å¾ˆç®€å•çš„ï¼Œå‡è®¾æˆ‘æƒ³è¦æœç´¢å•è¯ <strong>darkness</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep darkness /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the season of light it was the season of darkness
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç»“åˆæ­£åˆ™è¡¨è¾¾å¼"><span class="section-num">1.2</span> ç»“åˆæ­£åˆ™è¡¨è¾¾å¼</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ <strong>grep</strong> æ˜¯å¼€å¯æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶æœç´¢ä¸­ä½¿ç”¨
æ­£åˆ™è¡¨è¾¾å¼ã€‚ç°åœ¨åœ¨æ–‡ä»¶ä¸­æœç´¢ä»¥å­—æ¯ <strong>e</strong> å¼€å¤´åæ¥ä¸‰ä¸ªå­—ç¬¦ï¼Œç„¶åä»¥ <strong>h</strong> ç»“å°¾çš„å•è¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep <span class="s2">&#34;e...h&#34;</span> /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the epoch of belief it was the epoch of incredulity
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…äº† <strong>epoch</strong> è¿™ä¸ªå•è¯ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„å¨åŠ›æ— ä¸ä¼¦æ¯”çš„ï¼ŒæŠŠ <strong>grep*å’Œæ­£åˆ™è¡¨è¾¾å¼ç»“åˆèµ·æ¥å¯ä»¥æ›´å¥½åœ°å‘æŒ¥ *grep</strong> è¿™ä¸ªå·¥å…·çš„æ½œåŠ›ï¼›è€Œæœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç» <strong>grep</strong>, æ›´å¤šæœ‰å…³æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•ä¸ç»†è®²äº†</p>
<h3 id="ç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°"><span class="section-num">1.3</span> ç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°</h3>
<p>æœ‰æ—¶ï¼Œå¦‚æœä½ éœ€è¦ç»Ÿè®¡æŸç§æ¨¡å¼æˆ–è€…æŸä¸ªå•è¯å‡ºç°çš„ä¸ªæ•°ï¼Œä½ ä¼šå‘ç° <strong>grep</strong> éå¸¸æœ‰ç”¨ï¼›</p>
<p>è¦å®ç°è¯¥åŠŸèƒ½ï¼Œåªéœ€ç»™ <strong>grep</strong> æ·»åŠ  <strong>-c</strong> å‚æ•°ï¼›ä¾‹å¦‚ç»Ÿè®¡å•è¯ <strong>the</strong> å‡ºç°çš„ä¸ªæ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -c the /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">4
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–‡æœ¬ä¸­åŒ…å«4ä¸ª <strong>the</strong></p>
<h3 id="å¿½ç•¥å¤§å°å†™"><span class="section-num">1.4</span> å¿½ç•¥å¤§å°å†™</h3>
<p>å‰é¢æåˆ°ï¼Œ <strong>grep</strong> é»˜è®¤æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æœç´¢æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ <strong>grep</strong> æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼›</p>
<p>å¦‚æœä½ æƒ³ä¿®æ”¹ <strong>grep</strong> çš„é»˜è®¤è¡Œä¸ºæ¥å¿½ç•¥å¤§å°å†™ï¼Œä½ å¯ä»¥æ·»åŠ  <strong>-i</strong> å‚æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -i the /tmp/tinytale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">it was the best of times it was the worst of times
</span></span><span class="line"><span class="cl">it was the age of wisdom it was age of foolishness
</span></span><span class="line"><span class="cl">it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">it was the season of light it was the season of darkness
</span></span><span class="line"><span class="cl">IT WAS THE SPRING OF HOPE IT WAS THE WINTER OF DESPAIRE
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥å‘ç° <strong>THE</strong> ä¹Ÿæ˜¯å¯ä»¥è¢« grep æœç´¢åˆ°çš„ï¼›ä½†æ˜¯å¦‚æœæ²¡æœ‰æ·»åŠ  <strong>-i</strong> ,ä½ åªä¼šçœ‹åˆ°4è¡Œè¾“å‡ºã€‚</p>
<p>å½“ç„¶ä½ å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æ·»åŠ å¿½ç•¥å¤§å°å†™çš„æ¨¡å¼ï¼Œåªæ˜¯ç›´æ¥æ·»åŠ  <strong>-i</strong> ä¼šç®€å•å¾ˆå¤šã€‚</p>
<h2 id="æœç´¢å¤šä¸ªæ–‡ä»¶"><span class="section-num">2</span> æœç´¢å¤šä¸ªæ–‡ä»¶</h2>
<p>ä¸Šé¢æœç´¢çš„éƒ½åªæ˜¯å•ä¸ªæ–‡ä»¶ï¼Œè€Œ grep å¯ä»¥è®©ä½ åŒæ—¶æœç´¢å¤šä¸ªæ–‡ä»¶ï¼›ç°åœ¨å°±æ¥çœ‹çœ‹æ€ä¹ˆæœç´¢å¤šä¸ªæ–‡ä»¶å§ã€‚</p>
<p>ä¸‹é¢ä¸¤ç§å†™æ³•ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººæ¨å´‡ç¬¬ä¸€ç§ï¼Œå› ä¸ºå¯ä»¥è¾“å…¥æ›´å°‘ä¸€äº›å†…å®¹ :)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/<span class="o">{</span>tinytale.txt,tale.txt<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/tinytale.txt /tmp/tale.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">tinytale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">tale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">tale.txt:pains of by rearing her in the belief that her father was dead
</span></span><span class="line"><span class="cl">tale.txt:this was no passive belief but an active weapon which they flashed
</span></span><span class="line"><span class="cl">tale.txt:belief in solomon deducting a mere trifle for this slight mistake
</span></span><span class="line"><span class="cl">tale.txt:you will bear testimony to what i have said and to your belief in it
</span></span><span class="line"><span class="cl">tale.txt:herself into the show of a belief that they would soon be reunited
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œ <strong>grep</strong> æŠŠåŒ¹é…åˆ°å•è¯çš„é‚£ä¸€è¡Œå†…å®¹å’Œå¯¹åº”çš„æ–‡ä»¶éƒ½æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½ å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çœ‹åˆ°æœç´¢ç»“æœï¼Œå¹¶çŸ¥é“åŒ¹é…å•è¯çš„æ¥æºã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåƒæˆ‘è¿™æ ·ï¼Œä¸æƒ³è¾“å…¥é‚£ä¹ˆå¤šçš„å†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep belief /tmp/*.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœä¹Ÿä¼šè·Ÿä¸Šé¢ä¸€è‡´ (å‡è®¾ä½  <strong><em>tmp</em></strong> ç›®å½•ä¸‹åªæœ‰ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶); æˆ‘å‘Šè¯‰*grep* æœç´¢*/tmp* ä¸‹æ‰€æœ‰çš„ <strong>.txt</strong> æ–‡ä»¶ã€‚</p>
<h3 id="é€’å½’æœç´¢"><span class="section-num">2.1</span> é€’å½’æœç´¢</h3>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>grep</strong> é€’å½’æœç´¢ç›®å½•ï¼›ä½ åªéœ€åœ¨æŒ‡å®šç›®å½•åï¼Œæ·»åŠ  <strong>-R</strong> , <strong>grep</strong> å°±ä¼š
é€’å½’æœç´¢æŒ‡å®šç›®å½•çš„æ‰€æœ‰å­ç›®å½•ã€‚æˆ‘å·²ç»æŠŠå½“å‰ç›®å½•åˆ‡æ¢åˆ° <strong>/tmp</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -R <span class="s2">&#34;belief&#34;</span> .
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">./tale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span><span class="line"><span class="cl">./tale.txt:pains of by rearing her in the belief that her father was dead
</span></span><span class="line"><span class="cl">./tale.txt:this was no passive belief but an active weapon which they flashed
</span></span><span class="line"><span class="cl">./tale.txt:belief in solomon deducting a mere trifle for this slight mistake
</span></span><span class="line"><span class="cl">./tale.txt:you will bear testimony to what i have said and to your belief in it
</span></span><span class="line"><span class="cl">./tale.txt:herself into the show of a belief that they would soon be reunited
</span></span><span class="line"><span class="cl">./tinytale.txt:it was the epoch of belief it was the epoch of incredulity
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœå±•ç¤ºäº†ä¸€ç³»åˆ—åœ¨å½“å‰ç›®å½•å’Œå­ç›®å½•åŒ¹é… <strong>belief</strong> çš„æ–‡ä»¶ã€‚æ­¤å¤–ä½ ä¹Ÿå¯ä»¥æ’é™¤æ‰æŸäº›ä½ 
ä¸éœ€è¦æœç´¢çš„æ–‡ä»¶ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ª <strong>foo.xml</strong> çš„æ–‡ä»¶ï¼Œé‡Œé¢ä¹Ÿå¯èƒ½ä¼šæœ‰ <strong>belief</strong> è¿™ä¸ªå•è¯ï¼Œ
ä½†æ˜¯ä½ å°±æ˜¯ä¸æƒ³æœç´¢è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…å…¨éƒ¨çš„ <strong>.xml</strong> æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿™ä¹ˆç©ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -R --exclude<span class="o">=</span><span class="s2">&#34;*.xml&#34;</span> <span class="s2">&#34;belief&#34;</span> .
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åœ¨æ ‡å‡†è¾“å…¥æœç´¢"><span class="section-num">3</span> åœ¨æ ‡å‡†è¾“å…¥æœç´¢</h2>
<p><strong>grep</strong> ä¹Ÿæ˜¯è¿‡æ»¤å™¨ï¼Œæ‰€ä»¥ <strong>grep</strong> è‡ªç„¶è€Œç„¶å…·æœ‰å¤„ç†æ ‡å‡†è¾“å…¥è¾“å‡ºçš„èƒ½åŠ›äº†ï¼›å¤„ç†å…¶ä»–å‘½ä»¤çš„è¾“å‡ºç»“æœä¹Ÿæ˜¯ <strong>grep</strong> éå¸¸å¸¸ç”¨çš„åœºæ™¯ä¹‹ä¸€ã€‚å‡è®¾ä½ ç°åœ¨çš„ <strong>vim</strong> çªç„¶å¡é¡¿ï¼ŒæŒ‚äº†:),ä½ æƒ³è¦ <strong>kill</strong> æ‰ <strong>vim</strong> çš„è¿›ç¨‹ï¼Œä½ å¯ä»¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ps -e<span class="p">|</span>grep vim
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">samray   21939     1  0 19:42 ?        00:00:00 gvim
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ç¬¬ä¸€æ¡è®°å½•å°±æ˜¯ä½ æƒ³è¦æœç´¢çš„è¿›ç¨‹äº†ï¼Œä½ è¿è¡Œ <strong>kill 21939</strong> å°±å¯ä»¥æ€æ‰ vim çš„è¿›ç¨‹äº†ï¼›å› ä¸ºæˆ‘ç³»ç»Ÿçš„æ˜¯å›¾å‹åŒ–ç•Œé¢çš„ vim, æ‰€ä»¥æ˜¯ gvim.</p>
<hr>
<p>æ­£å¦‚æˆ‘ä¹‹å‰çš„æ–‡ç« æåˆ°çš„é‚£æ ·ï¼Œå•çº¯çš„è¿‡æ»¤å™¨çš„ç”¨å¤„ä¼¼ä¹ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœç»“åˆèµ·æ¥å°±ä¼šå¨åŠ›æ— ç©·è‡³äºï¼Œå¦‚ä½•ç»“åˆï¼Œå°±éœ€è¦æ…¢æ…¢æ¢ç´¢äº†ã€‚</p>
<h2 id="åå‘æœç´¢"><span class="section-num">4</span> åå‘æœç´¢</h2>
<p>ç°åœ¨æ‰§è¡Œçš„æœç´¢éƒ½æ˜¯åŒ¹é…æœç´¢ï¼Œå³å°†åŒ¹é…çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œ <strong>grep</strong> è¿˜æœ‰åå‘æœç´¢çš„åŠŸèƒ½ (invert Searches)å°±æ˜¯å°†ä¸åŒ…å«æœ‰æŒ‡å®šæ¨¡å¼çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>è¯¥åŠŸèƒ½åœ¨ç”¨æ¥ä¿®æ”¹æœ‰å¾ˆå¤šæ³¨é‡Šçš„é…ç½®æ–‡ä»¶æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼›ä¾‹å¦‚å¸¸ç”¨çš„æœåŠ¡å™¨è½¯ä»¶ <strong>nginx</strong>  çš„é…ç½®æ–‡ä»¶æ˜¯é»˜è®¤æ˜¯å«æœ‰å¾ˆå¤šæ³¨é‡Šçš„ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="c1">#user www-data;</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_processes auto;</span>
</span></span><span class="line"><span class="cl"><span class="na">pid /run/nginx.pid;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/modules-enabled/*.conf;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">events {</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_connections 1024;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># multi_accept on;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">http {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Basic Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">sendfile on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nopush on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nodelay on;</span>
</span></span><span class="line"><span class="cl"><span class="na">keepalive_timeout 65;</span>
</span></span><span class="line"><span class="cl"><span class="na">types_hash_max_size 2048;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># server_tokens off;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># server_names_hash_bucket_size 64;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># server_name_in_redirect off;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/mime.types;</span>
</span></span><span class="line"><span class="cl"><span class="na">default_type application/octet-stream;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># SSL Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE</span>
</span></span><span class="line"><span class="cl"><span class="na">ssl_prefer_server_ciphers on;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Logging Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="na">log_format main &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; $status $bytes_sent &#34;$http_referer&#34; &#34;$http_user_agent&#34; &#34;$gzip_ratio&#34;&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="na">access_log /var/log/nginx/access.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">error_log /var/log/nginx/error.log;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Gzip Settings</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">gzip on;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip_disable &#34;msie6&#34;;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_vary on;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_proxied any;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_comp_level 6;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_buffers 16 8k;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_http_version 1.1;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Virtual Host Configs</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/conf.d/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/sites-enabled/*;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">ignore_invalid_headers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_header_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_body_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">send_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_max_body_size 100m;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffer_size 128k;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffers 8 128k;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream tomcat_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:8080 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream gunicorn_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:5000 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server_name 127.0.0.1;</span>
</span></span><span class="line"><span class="cl"><span class="na">listen 443;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl on;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl_certificate /etc/letsencrypt/live/samray.ren/fullchain.pem;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ssl_certificate_key /etc/letsencrypt/live/samray.ren/privkey.pem;</span>
</span></span><span class="line"><span class="cl"><span class="na">location / {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Forward SSL so that Tomcat knows what to do</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Host $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Server $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://tomcat_server;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Proto https;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_connect_timeout      240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_send_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_read_timeout         240;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">location /test{</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">location /weixin {</span>
</span></span><span class="line"><span class="cl"><span class="c1"># try_files $uri @proxy_to_app;</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location @proxy_to_app {</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header Host $http_host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://gunicorn_server;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#mail {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# See sample authentication script at:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# auth_http localhost/auth.php;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# pop3_capabilities &#34;TOP&#34; &#34;USER&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	# imap_capabilities &#34;IMAP4rev1&#34; &#34;UIDPLUS&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	server {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		listen     localhost:110;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		protocol   pop3;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		proxy      on;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	server {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		listen     localhost:143;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		protocol   imap;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#		proxy      on;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#	}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‡Œé¢å®åœ¨æœ‰å¤ªå¤šçš„æ³¨é‡Šäº†ï¼Œè™½è¯´æ˜¯å¾ˆå¥½çš„å‚è€ƒï¼Œä½†æ˜¯çœ‹å¤šäº†ä¼šæ„Ÿè§‰å¾ˆç¢çœ¼ï¼Œæ‰€ä»¥ä½ å¸Œæœ›å¯ä»¥æœ‰ä¸€ä»½æ²¡æœ‰æ³¨é‡Šçš„é…ç½®æ–‡ä»¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <strong>grep</strong> å’Œå‚æ•° <strong>-v</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">egrep -v <span class="s2">&#34;#|^</span>$<span class="s2">&#34;</span> /etc/nginx/nginx.conf &gt;/tmp/nging.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">worker_processes auto;</span>
</span></span><span class="line"><span class="cl"><span class="na">pid /run/nginx.pid;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/modules-enabled/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">events {</span>
</span></span><span class="line"><span class="cl"><span class="na">worker_connections 1024;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">http {</span>
</span></span><span class="line"><span class="cl"><span class="na">sendfile on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nopush on;</span>
</span></span><span class="line"><span class="cl"><span class="na">tcp_nodelay on;</span>
</span></span><span class="line"><span class="cl"><span class="na">keepalive_timeout 65;</span>
</span></span><span class="line"><span class="cl"><span class="na">types_hash_max_size 2048;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/mime.types;</span>
</span></span><span class="line"><span class="cl"><span class="na">default_type application/octet-stream;</span>
</span></span><span class="line"><span class="cl"><span class="na">ssl_prefer_server_ciphers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">log_format main &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; $status $bytes_sent &#34;$http_referer&#34; &#34;$http_user_agent&#34; &#34;$gzip_ratio&#34;&#39;;</span>
</span></span><span class="line"><span class="cl"><span class="na">access_log /var/log/nginx/access.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">error_log /var/log/nginx/error.log;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip on;</span>
</span></span><span class="line"><span class="cl"><span class="na">gzip_disable &#34;msie6&#34;;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/conf.d/*.conf;</span>
</span></span><span class="line"><span class="cl"><span class="na">include /etc/nginx/sites-enabled/*;</span>
</span></span><span class="line"><span class="cl"><span class="na">ignore_invalid_headers on;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_header_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_body_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">send_timeout 240;</span>
</span></span><span class="line"><span class="cl"><span class="na">client_max_body_size 100m;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffer_size 128k;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_buffers 8 128k;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream tomcat_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:8080 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">upstream gunicorn_server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server 127.0.0.1:5000 fail_timeout</span><span class="o">=</span><span class="s">0;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">server{</span>
</span></span><span class="line"><span class="cl"><span class="na">server_name 127.0.0.1;</span>
</span></span><span class="line"><span class="cl"><span class="na">listen 443;</span>
</span></span><span class="line"><span class="cl"><span class="na">location / {</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Host $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Server $host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://tomcat_server;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-Proto https;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_connect_timeout      240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_send_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_read_timeout         240;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location /test{</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location /weixin {</span>
</span></span><span class="line"><span class="cl"><span class="na">return 402;</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">location @proxy_to_app {</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_set_header Host $http_host;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_redirect off;</span>
</span></span><span class="line"><span class="cl"><span class="na">proxy_pass http://gunicorn_server;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span><span class="line"><span class="cl"><span class="na">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>egrep</strong> æ˜¯ <strong>grep</strong> çš„æ‰©å±•ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ <strong>-E</strong> ä½¿ç”¨æ‰©å±•åŠŸèƒ½ã€‚å°±è¿™æ ·ï¼Œä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä»½å¾ˆâ€œå¹²å‡€â€çš„é…ç½®æ–‡ä»¶äº†ã€‚</p>
<h2 id="å°ç»“"><span class="section-num">5</span> å°ç»“</h2>
<p>åœ¨ä»¥å‰ <strong>grep</strong> æ˜¯ <strong>hacker</strong> å·¥å…·ç®±é‡Œé¢å®¡æŸ¥æºä»£ç å¿…ä¸å¯å°‘çš„å·¥å…·ä¹‹ä¸€ï¼Œä½†æ˜¯éšç€æŠ€æœ¯çš„å‘å±•ï¼Œä¼¼ä¹å¯¹æ¯”å…¶ä»–åŒç±»å‹çš„å·¥å…·ï¼Œ <strong>grep</strong> çš„æ€§èƒ½å·²ç»éš¾å°½äººæ„ï¼Œç‰¹åˆ«æ˜¯å¯¹æ¯” <strong>ag</strong> è¿™ä¸ªæœç´¢ç¥å™¨ï¼›</p>
<p>è™½è¯´å¾ˆå¤šäººéƒ½å·²ç»è½¬ç§»åˆ°äº† <strong>ag</strong> é˜µè¥ï¼Œä½†æ˜¯å› ä¸º <strong>grep</strong> è¢«å¹¿æ³›é¢„è£…åˆ°å„ç±»çš„Linux/Unix æœºå™¨ï¼Œæ‰€ä»¥ <strong>grep</strong> è¿˜æ˜¯ä½¿ç”¨å¾—å¾ˆå¹¿æ³›æ»´ã€‚</p>
<p>æ›´å¤š <strong>grep</strong> çš„ç”¨æ³•å°±éœ€è¦æŸ¥è¯¢æ‰‹å†Œäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man grep
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨diff</title>
      <link>https://ramsayleung.github.io/zh/post/2017/diff/</link>
      <pubDate>Tue, 28 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/diff/</guid>
      <description>An introduction about diff</description>
      <content:encoded><![CDATA[<blockquote>
<p>diff - compare files line by line</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡git,é‚£ä¹ˆä½ ä¸€å®šä¸ä¼šå¯¹diff é™Œç”Ÿï¼Œå› ä¸ºå¯¹ä½ æºæ–‡ä»¶å’Œä¿®æ”¹åçš„æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒçš„å°±æ˜¯ <strong>diff</strong> è¿™ä¸ªå¤§åé¼é¼çš„å®¶ä¼™äº†ã€‚</p>
<p>å¤šå¹´ä»¥æ¥ï¼Œ <strong>diff</strong> éƒ½ä¸€ç›´æ˜¯éå¸¸é‡è¦çš„å·¥å…·ï¼Œä¸Šå¤å¤§ç¥ éƒ½æ˜¯ä½¿ç”¨ <strong>diff</strong> å’Œ <strong>patch</strong> å¯¹ç¨‹åºè¿›è¡Œå·®åˆ†å’Œæ‰“è¡¥ä¸æ»´(ç°åœ¨æœ‰gitäº†ï¼Œä½†æ˜¯diffåŒæ ·å‘æŒ¥ç€é‡è¦ä½œç”¨)</p>
<h2 id="è¯­æ³•"><span class="section-num">1</span> è¯­æ³•</h2>
<p>diff çš„è¯­æ³•å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff <span class="o">[</span>OPTION<span class="o">]</span>.... file1 file2
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>OPTION</em> æŒ‡ä¸åŒçš„é€‰é¡¹å‚æ•°ï¼Œfile1,file2 æ˜¯æ–‡æœ¬æ–‡ä»¶çš„åå­—ï¼Œå¦‚æœæ¯”è¾ƒçš„ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒ diff å°†ä¸è¾“å‡ºä»»ä½•ä¸œè¥¿ã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰å·®å¼‚ï¼Œdiff ä¼šæ˜¾ç¤ºä¸€ç³»åˆ—çš„æŒ‡ç¤ºï¼Œè®©ä½ å¯ä»¥æŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºä¸ç¬¬äºŒä¸ªæ–‡ä»¶ä¸€è‡´</p>
<h2 id="ä¾‹å­"><span class="section-num">2</span> ä¾‹å­</h2>
<h3 id="ç”¨æ³•ä¸€"><span class="section-num">2.1</span> ç”¨æ³•ä¸€</h3>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¿å­˜ç€ä¸åŒçš„åœ°å€ã€‚
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijin
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥æ³¨æ„åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸‰è¡Œçš„ <em>beijing</em>.ç„¶åè¿è¡Œ <strong>diff</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">3c3
</span></span><span class="line"><span class="cl">&lt; beijing
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">&gt; beijin
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼¼ä¹æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œè¾“å‡ºç»“æœæè¿°äº†ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®diff æ˜¯åœ¨æŒ‡å¯¼å¦‚ä½•ä¿®æ”¹ä¸åŒçš„æ–‡ä»¶ä½¿ä¹‹ä¸€è‡´ <strong>&lt;</strong> åæ¥çš„æ˜¯æ–‡ä»¶1ä¸­ä¸æ–‡ä»¶2ä¸åŒçš„éƒ¨åˆ†ï¼Œ <strong>&gt;</strong> åæ¥çš„æ˜¯æ–‡ä»¶2ä¸­ä¸æ–‡ä»¶1ä¸åŒçš„éƒ¨åˆ†</p>
<p>diff çš„è¾“å‡ºä½¿ç”¨3ä¸ªä¸åŒçš„å•å­—ç¬¦æŒ‡å¯¼ï¼ša(append,è¿½åŠ ),c(change,ä¿®æ”¹),d(delete,åˆ é™¤). åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œåªæ˜¯çœ‹åˆ°ä¸€ä¸ª <em>c</em>,æ„å‘³ç€ï¼Œå¦‚æœæƒ³æŠŠ <em>address1</em> ä¿®æ”¹æˆ <em>address2</em> åªéœ€å°† <em>address1</em> çš„ç¬¬ä¸‰è¡Œä¿®æ”¹æˆ <em>address2</em> çš„ç¬¬ä¸‰è¡Œ</p>
<h3 id="ç”¨æ³•2"><span class="section-num">2.2</span> ç”¨æ³•2</h3>
<p>ç°åœ¨æŠŠ <em>address2</em> çš„æœ€åä¸€è¡Œåˆ é™¤ï¼Œçœ‹çœ‹è¿è¡Œ <em>diff</em> ç»“æœå¦‚ä½•ï¼š
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">4d3
</span></span><span class="line"><span class="cl">&lt; chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¯¥ä¾‹å­ä¸­ï¼Œä¸ºäº†å°† <em>address1</em> å˜æˆ <em>address2</em> åªéœ€åˆ é™¤ <em>address1</em> çš„ç¬¬å››è¡Œ</p>
<h3 id="ç”¨æ³•3"><span class="section-num">2.3</span> ç”¨æ³•3</h3>
<p>ç°åœ¨æŠŠ <em>address1</em> çš„æœ€åä¸€è¡Œåˆ é™¤ï¼Œçœ‹çœ‹è¿è¡Œ <em>diff</em> ç»“æœå¦‚ä½•ï¼š
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">3a4
</span></span><span class="line"><span class="cl">&gt; chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>æƒ³å°†ç¬¬ä¸€ä¸ªæ–‡ä»¶è½¬æ¢æˆç¬¬äºŒä¸ªæ–‡ä»¶ï¼Œåªéœ€åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶è¿½åŠ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬å››è¡Œ(å³åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ç¬¬ <strong>3</strong> è¡Œä¹‹åè¿½åŠ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬ <strong>4</strong> è¡Œ)</p>
<h2 id="diff-é€‰é¡¹"><span class="section-num">3</span> diff é€‰é¡¹</h2>
<p>å› ä¸ºdiff æ˜¯ä¸€ä¸ªç›¸å½“å¼ºå¤§ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘æ²¡åŠæ³•å°†æ‰€æœ‰çš„ç”¨æ³•ä¸€ä¸€é“
å°½æ‰€ä»¥ç¬”è€…å°†æ¯”è¾ƒå¸¸ç”¨çš„é€‰é¡¹åˆ—ä¸¾å‡ºæ¥</p>
<ul>
<li><strong>-b</strong>:å¿½ç•¥åˆ¶è¡¨ç¬¦(ä¸å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½ç¬¦ï¼ŒæŒ‡å¿½ç•¥ç©ºç™½ç¬¦æ•°é‡çš„å·®å¼‚),ä¾‹å¦‚ä¸‹é¢çš„ä¸¤è¡Œæ˜¯ç›¸åŒçš„</li>
</ul>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a    a
</span></span><span class="line"><span class="cl">a a
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>-B(blank lines)</strong>:å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½è¡Œ</li>
<li><strong>-c(context)</strong>:ä»¥ä¸Šä¸‹æ–‡çš„å½¢å¼æ˜¾ç¤ºå·®å¼‚å†…å®¹ï¼Œå¯¹æ¯”é»˜è®¤è¾“å‡ºæ›´åŠ å®¹æ˜“ç†è§£(ä½†æ˜¯ä¹Ÿæ›´åŠ ç¹æ‚)</li>
<li><strong>-q(quiet)</strong>: diff é™é»˜è®¾ç½®ï¼Œå³å¦‚æœæ–‡ä»¶file1å’Œfile2æœ‰å·®å¼‚ï¼Œdiff ä¹Ÿåªä¼šæ˜¾ç¤º <em>File file1 and file2 differ</em></li>
<li><strong>-w(whitespace)</strong>:å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½ç¬¦</li>
<li><strong>-u(unified output)</strong>: ä¸Šä¸‹æ–‡å½¢å¼æ˜¾ç¤ºçš„æ”¹è¿›ï¼Œä¸ä¼šè¾“å‡ºé‡å¤è¡Œ</li>
<li><strong>-y</strong>:å°†æ–‡ä»¶åˆ†æˆä¸¤åˆ—æˆ–å¤šåˆ—å¹¶æ’è¿›è¡Œè¾“å‡º(éå¸¸ç›´è§‚ï¼Œä½†æ˜¯è¾“å‡ºå¾ˆç¹æ‚)</li>
</ul>
<p>è¿˜æ˜¯è€è¯ï¼Œæ›´å¤šçš„ç”¨æ³•å°±éœ€è¦ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man diff
</span></span></code></pre></td></tr></table>
</div>
</div><div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨diff</title>
      <link>https://ramsayleung.github.io/zh/post/2017/diff/</link>
      <pubDate>Tue, 28 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/diff/</guid>
      <description>An introduction about diff</description>
      <content:encoded><![CDATA[<blockquote>
<p>diff - compare files line by line</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡git,é‚£ä¹ˆä½ ä¸€å®šä¸ä¼šå¯¹diff é™Œç”Ÿï¼Œå› ä¸ºå¯¹ä½ æºæ–‡ä»¶å’Œä¿®æ”¹åçš„æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒçš„å°±æ˜¯ <strong>diff</strong> è¿™ä¸ªå¤§åé¼é¼çš„å®¶ä¼™äº†ã€‚</p>
<p>å¤šå¹´ä»¥æ¥ï¼Œ <strong>diff</strong> éƒ½ä¸€ç›´æ˜¯éå¸¸é‡è¦çš„å·¥å…·ï¼Œä¸Šå¤å¤§ç¥ éƒ½æ˜¯ä½¿ç”¨ <strong>diff</strong> å’Œ <strong>patch</strong> å¯¹ç¨‹åºè¿›è¡Œå·®åˆ†å’Œæ‰“è¡¥ä¸æ»´(ç°åœ¨æœ‰gitäº†ï¼Œä½†æ˜¯diffåŒæ ·å‘æŒ¥ç€é‡è¦ä½œç”¨)</p>
<h2 id="è¯­æ³•"><span class="section-num">1</span> è¯­æ³•</h2>
<p>diff çš„è¯­æ³•å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff <span class="o">[</span>OPTION<span class="o">]</span>.... file1 file2
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>OPTION</em> æŒ‡ä¸åŒçš„é€‰é¡¹å‚æ•°ï¼Œfile1,file2 æ˜¯æ–‡æœ¬æ–‡ä»¶çš„åå­—ï¼Œå¦‚æœæ¯”è¾ƒçš„ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒ diff å°†ä¸è¾“å‡ºä»»ä½•ä¸œè¥¿ã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰å·®å¼‚ï¼Œdiff ä¼šæ˜¾ç¤ºä¸€ç³»åˆ—çš„æŒ‡ç¤ºï¼Œè®©ä½ å¯ä»¥æŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºä¸ç¬¬äºŒä¸ªæ–‡ä»¶ä¸€è‡´</p>
<h2 id="ä¾‹å­"><span class="section-num">2</span> ä¾‹å­</h2>
<h3 id="ç”¨æ³•ä¸€"><span class="section-num">2.1</span> ç”¨æ³•ä¸€</h3>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¿å­˜ç€ä¸åŒçš„åœ°å€ã€‚
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijin
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥æ³¨æ„åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸‰è¡Œçš„ <em>beijing</em>.ç„¶åè¿è¡Œ <strong>diff</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">3c3
</span></span><span class="line"><span class="cl">&lt; beijing
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">&gt; beijin
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼¼ä¹æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œè¾“å‡ºç»“æœæè¿°äº†ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®diff æ˜¯åœ¨æŒ‡å¯¼å¦‚ä½•ä¿®æ”¹ä¸åŒçš„æ–‡ä»¶ä½¿ä¹‹ä¸€è‡´ <strong>&lt;</strong> åæ¥çš„æ˜¯æ–‡ä»¶1ä¸­ä¸æ–‡ä»¶2ä¸åŒçš„éƒ¨åˆ†ï¼Œ <strong>&gt;</strong> åæ¥çš„æ˜¯æ–‡ä»¶2ä¸­ä¸æ–‡ä»¶1ä¸åŒçš„éƒ¨åˆ†</p>
<p>diff çš„è¾“å‡ºä½¿ç”¨3ä¸ªä¸åŒçš„å•å­—ç¬¦æŒ‡å¯¼ï¼ša(append,è¿½åŠ ),c(change,ä¿®æ”¹),d(delete,åˆ é™¤). åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œåªæ˜¯çœ‹åˆ°ä¸€ä¸ª <em>c</em>,æ„å‘³ç€ï¼Œå¦‚æœæƒ³æŠŠ <em>address1</em> ä¿®æ”¹æˆ <em>address2</em> åªéœ€å°† <em>address1</em> çš„ç¬¬ä¸‰è¡Œä¿®æ”¹æˆ <em>address2</em> çš„ç¬¬ä¸‰è¡Œ</p>
<h3 id="ç”¨æ³•2"><span class="section-num">2.2</span> ç”¨æ³•2</h3>
<p>ç°åœ¨æŠŠ <em>address2</em> çš„æœ€åä¸€è¡Œåˆ é™¤ï¼Œçœ‹çœ‹è¿è¡Œ <em>diff</em> ç»“æœå¦‚ä½•ï¼š
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">4d3
</span></span><span class="line"><span class="cl">&lt; chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¯¥ä¾‹å­ä¸­ï¼Œä¸ºäº†å°† <em>address1</em> å˜æˆ <em>address2</em> åªéœ€åˆ é™¤ <em>address1</em> çš„ç¬¬å››è¡Œ</p>
<h3 id="ç”¨æ³•3"><span class="section-num">2.3</span> ç”¨æ³•3</h3>
<p>ç°åœ¨æŠŠ <em>address1</em> çš„æœ€åä¸€è¡Œåˆ é™¤ï¼Œçœ‹çœ‹è¿è¡Œ <em>diff</em> ç»“æœå¦‚ä½•ï¼š
address1 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span></code></pre></td></tr></table>
</div>
</div><p>address2 åŒ…å«ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">guangdong
</span></span><span class="line"><span class="cl">shanghai
</span></span><span class="line"><span class="cl">beijing
</span></span><span class="line"><span class="cl">chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">diff address1 address2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">3a4
</span></span><span class="line"><span class="cl">&gt; chengdu
</span></span></code></pre></td></tr></table>
</div>
</div><p>æƒ³å°†ç¬¬ä¸€ä¸ªæ–‡ä»¶è½¬æ¢æˆç¬¬äºŒä¸ªæ–‡ä»¶ï¼Œåªéœ€åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶è¿½åŠ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬å››è¡Œ(å³åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ç¬¬ <strong>3</strong> è¡Œä¹‹åè¿½åŠ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬ <strong>4</strong> è¡Œ)</p>
<h2 id="diff-é€‰é¡¹"><span class="section-num">3</span> diff é€‰é¡¹</h2>
<p>å› ä¸ºdiff æ˜¯ä¸€ä¸ªç›¸å½“å¼ºå¤§ä¹Ÿæ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘æ²¡åŠæ³•å°†æ‰€æœ‰çš„ç”¨æ³•ä¸€ä¸€é“
å°½æ‰€ä»¥ç¬”è€…å°†æ¯”è¾ƒå¸¸ç”¨çš„é€‰é¡¹åˆ—ä¸¾å‡ºæ¥</p>
<ul>
<li><strong>-b</strong>:å¿½ç•¥åˆ¶è¡¨ç¬¦(ä¸å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½ç¬¦ï¼ŒæŒ‡å¿½ç•¥ç©ºç™½ç¬¦æ•°é‡çš„å·®å¼‚),ä¾‹å¦‚ä¸‹é¢çš„ä¸¤è¡Œæ˜¯ç›¸åŒçš„</li>
</ul>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a    a
</span></span><span class="line"><span class="cl">a a
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>-B(blank lines)</strong>:å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½è¡Œ</li>
<li><strong>-c(context)</strong>:ä»¥ä¸Šä¸‹æ–‡çš„å½¢å¼æ˜¾ç¤ºå·®å¼‚å†…å®¹ï¼Œå¯¹æ¯”é»˜è®¤è¾“å‡ºæ›´åŠ å®¹æ˜“ç†è§£(ä½†æ˜¯ä¹Ÿæ›´åŠ ç¹æ‚)</li>
<li><strong>-q(quiet)</strong>: diff é™é»˜è®¾ç½®ï¼Œå³å¦‚æœæ–‡ä»¶file1å’Œfile2æœ‰å·®å¼‚ï¼Œdiff ä¹Ÿåªä¼šæ˜¾ç¤º <em>File file1 and file2 differ</em></li>
<li><strong>-w(whitespace)</strong>:å¿½ç•¥æ‰€æœ‰çš„ç©ºç™½ç¬¦</li>
<li><strong>-u(unified output)</strong>: ä¸Šä¸‹æ–‡å½¢å¼æ˜¾ç¤ºçš„æ”¹è¿›ï¼Œä¸ä¼šè¾“å‡ºé‡å¤è¡Œ</li>
<li><strong>-y</strong>:å°†æ–‡ä»¶åˆ†æˆä¸¤åˆ—æˆ–å¤šåˆ—å¹¶æ’è¿›è¡Œè¾“å‡º(éå¸¸ç›´è§‚ï¼Œä½†æ˜¯è¾“å‡ºå¾ˆç¹æ‚)</li>
</ul>
<p>è¿˜æ˜¯è€è¯ï¼Œæ›´å¤šçš„ç”¨æ³•å°±éœ€è¦ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man diff
</span></span></code></pre></td></tr></table>
</div>
</div><div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨cat</title>
      <link>https://ramsayleung.github.io/zh/post/2017/cat/</link>
      <pubDate>Wed, 22 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/cat/</guid>
      <description>An introduction about cat</description>
      <content:encoded><![CDATA[<blockquote>
<p>cat - concatenate files and print on the standard output</p>
</blockquote>
<h2 id="è¿‡æ»¤å™¨"><span class="section-num">1</span> è¿‡æ»¤å™¨</h2>
<p>ä½•è°“è¿‡æ»¤å™¨å‘¢ï¼Œä¾‹å¦‚cat,grep,wl ä¹‹ç±»çš„å‘½ä»¤å°±æ˜¯è¿‡æ»¤å™¨äº†ã€‚è¿™æ ·çš„å‘½ä»¤
è¯»å–æ•°æ®ï¼Œå¯¹æ•°æ®æ‰§è¡Œä¸€äº›æ“ä½œï¼Œç„¶åå†™å…¥ç»“æœã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œè¿‡æ»¤å™¨å°±æ˜¯ä»»ä½•èƒ½å¤Ÿä»æ ‡å‡†
è¾“å…¥è¯»å– <strong>æ–‡æœ¬</strong> æ•°æ®ï¼Œå¹¶å‘æ ‡å‡†è¾“å‡ºå†™å…¥ <strong>æ–‡æœ¬</strong> æ•°æ®çš„å‘½ä»¤ã€‚åˆå› ä¸ºUnix çš„ <strong>KISS</strong>
è®¾è®¡ç†å¿µï¼Œæ‰€ä»¥æ¯ä¸ªç¨‹åºéƒ½è¢«è®¾è®¡æˆèƒ½å¤Ÿå‡ºè‰²å®Œæˆä¸€é¡¹ç‰¹å®šä»»åŠ¡çš„å·¥å…·ã€‚åˆå› ä¸ºé‡å®šå‘å’Œ
ç®¡é“çš„å­˜åœ¨ï¼Œä½¿å¾—å¯ä»¥å°†è¿™äº›å·¥å…·ç»„åˆèµ·æ¥ï¼Œå‘æŒ¥æ— ç©·å¨åŠ›</p>
<h2 id="cat"><span class="section-num">2</span> cat</h2>
<p>åœ¨shell é‡Œé¢è¿è¡Œcat,ä½ ä¼šè¢«è¦æ±‚è¾“å…¥æ–‡æœ¬æ•°æ®ï¼Œå½“ä½ è¾“å…¥ä¸€è¡Œæ•°æ®ä»¥åï¼Œç„¶åæŒ‰ä¸‹å›
è½¦ä½ è¾“å…¥çš„æ•°æ®å°±ä¼šæ˜¾ç¤ºåœ¨å±å¹•ï¼Œå½“ä½ æŒ‰ä¸‹ ^D(&lt;ctrl&gt;+d),å‘é€eof ä¿¡å·ç»™shell,é€€å‡º
catã€‚cat åšçš„äº‹å°±æ˜¯æŠŠä½ è¾“å…¥çš„å­—ç¬¦ï¼Œå¤åˆ¶åˆ°æ ‡å‡†è¾“å‡º (ä¸€èˆ¬æƒ…å†µæ˜¯æŒ‡ä½ çš„å±å¹•).çœ‹åˆ°
è¿™é‡Œæœ‰äººæˆ–è®¸ä¼šè´¨ç–‘ï¼Œè¿™ä¸œè¥¿æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿä¼¼ä¹ä»€ä¹ˆéƒ½ä½œä¸äº†ã€‚ä¸ï¼Œå®ƒçš„ç”¨å¤„å¾ˆå¤§å‘¢ï¼Œ
ä¸”å®¹ç¬”è€…ç»†ç»†ç¦€æ¥</p>
<h3 id="åœºæ™¯1"><span class="section-num">2.1</span> åœºæ™¯1</h3>
<p>å‡å¦‚ä½ è¦æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åªæ˜¯å¾ˆå°‘çš„æ–‡æœ¬ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç”¨
vim/emacs æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¾“å…¥å‡ è¡Œæ–‡å­—ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚è¿™æ˜¯ä¸€èˆ¬çš„åšæ³•ï¼Œ
çœ‹åˆ°è¿™é‡Œï¼Œå¾ˆè‡ªç„¶æœ‰äººä¼šå‘é—®ï¼Œéš¾é“æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ³•ï¼Ÿæœ‰ï¼Œä¸ç”¨æ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨å†™å…¥æ–‡æœ¬
çš„hackingæ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &gt; data
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å…¥æ•°æ®ï¼Œç„¶å ^D(&lt;ctrl&gt;+d) ä¿å­˜ã€‚ä½ å°±æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ª <strong>data</strong> æ–‡ä»¶
,å°±ä¼šè¢«ä»£æ›¿ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¹Ÿåœ¨åŸæ¥æ–‡æœ¬æœ«å°¾æ·»åŠ çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &gt;&gt; data
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åœºæ™¯2"><span class="section-num">2.2</span> åœºæ™¯2</h3>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªçŸ­æ–‡ä»¶ï¼Œä½ æƒ³æŸ¥çœ‹ä¸€ä¸‹ï¼ŒåŒæ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨cat</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &lt; data
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥çœç•¥ <strong>&lt;</strong> è¿™ä¸ªé‡å®šå‘ç¬¦å·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat data
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠ‘æˆ–æ˜¯ï¼Œä½ æƒ³æ˜¾ç¤ºæŸä¸ªå¤§æ–‡ä»¶çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä½ ä¹Ÿå¯ä»¥å¦‚ä¸Šæ“ä½œã€‚æˆ–è®¸ä½ ä¼šè§‰å¾—ï¼Œè¿™ä¸ªåŠŸèƒ½
å¾ˆå¤šå‘½ä»¤ä¹Ÿæœ‰ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ <strong>tail</strong>. ä½†æ˜¯å¦‚æœ <strong>cat</strong> å¯ä»¥å¾ˆå®Œç¾åœ°å¾ˆå…¶ä»–è¿‡æ»¤å™¨ç»“åˆ
å……å½“æ•´å¥—ç®¡é“çº¿å·¥å…·æµçš„èµ·å§‹ç«¯ï¼Œè¿™ä¸ªä»¥åæ…¢æ…¢å†é˜è¿°</p>
<h3 id="åœºæ™¯3"><span class="section-num">2.3</span> åœºæ™¯3</h3>
<p>å¦‚æœä½ æƒ³å¤åˆ¶æ–‡æœ¬æ–‡ä»¶ï¼Œä½ é¦–å…ˆä¼šæƒ³èµ·ä»€ä¹ˆå‘½ä»¤ï¼Ÿ <strong>cp</strong>,å¾ˆè‡ªç„¶å˜›ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–ï¼Œä½†æ˜¯cat
ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œå¾ˆæ„å¤–å§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &lt; file &gt; newfile
</span></span></code></pre></td></tr></table>
</div>
</div><p>å³æŠŠ <strong>file</strong> å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶åå†æŠŠ <strong>file</strong> å½“ä½œæ ‡å‡†è¾“å…¥å¤åˆ¶åˆ° <strong>newfile</strong>.hacking!</p>
<h3 id="åœºæ™¯4"><span class="section-num">2.4</span> åœºæ™¯4</h3>
<p>å¦‚æœä½ æƒ³æŠŠå¤šä¸ªæ–‡æœ¬æ–‡ä»¶çš„ç»„åˆåˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿç”¨ç¼–è¾‘å™¨æ‰“å¼€æ‰€æœ‰çš„æ–‡ä»¶
ç„¶å select,cut,paste,save.æˆ‘ä¹Ÿä¼šå¾ˆè‡ªç„¶åœ°æƒ³åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æ˜¯å¦å­˜åœ¨ç€æ›´
ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿå½“ç„¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat file1 file2 file3 &gt;newfile
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>ä¸Šé¢å·²ç»ä»‹ç»äº†æŒºå¤šcat çš„ä½¿ç”¨åœºæ™¯äº†ï¼Œä½ è§‰å¾—cat è¡¨ç°æ»´æ€ä¹ˆæ ·å‘¢ï¼Ÿç›¸ä¿¡ä½ çš„æ„Ÿè§‰æ˜¯
è¿˜è¡Œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ï¼Œæˆ‘å¹å˜˜çš„é‚£ä¹ˆä»¤äººæƒŠè‰³ã€‚å› ä¸ºè¿™åªæ˜¯cat æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œå®ƒæœ€å¤§çš„
ç”¨æ³•è¿˜æ²¡æœ‰å®Œå…¨å±•ç°å‡ºæ¥ï¼Œç¬”è€…å…ˆä¸¾ä¸€ä¾‹ï¼Œä»¥åå†æ…¢æ…¢è¯¦å™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat file <span class="p">|</span>grep <span class="s2">&#34;something&#34;</span> <span class="p">|</span>sort -n <span class="p">|</span>tee newfile
</span></span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>ç”¨æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat &gt; file</td>
<td>è¯»å–è¾“å…¥ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–æ›¿æ¢</td>
</tr>
<tr>
<td>cat &gt;&gt;file</td>
<td>è¯»å–è¾“å…¥ï¼Œè¿½åŠ æ–°çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>cat file/cat &lt;file</td>
<td>æ˜¾ç¤ºä¸€ä¸ªå·²æœ‰æ–‡ä»¶</td>
</tr>
<tr>
<td>cat &lt;oldfile&gt; newfile</td>
<td>å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶</td>
</tr>
<tr>
<td>cat file1 file2 file3&gt;file4</td>
<td>ç»„åˆå¤šä¸ªæ–‡ä»¶</td>
</tr>
</tbody>
</table>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨cat</title>
      <link>https://ramsayleung.github.io/zh/post/2017/cat/</link>
      <pubDate>Wed, 22 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/cat/</guid>
      <description>An introduction about cat</description>
      <content:encoded><![CDATA[<blockquote>
<p>cat - concatenate files and print on the standard output</p>
</blockquote>
<h2 id="è¿‡æ»¤å™¨"><span class="section-num">1</span> è¿‡æ»¤å™¨</h2>
<p>ä½•è°“è¿‡æ»¤å™¨å‘¢ï¼Œä¾‹å¦‚cat,grep,wl ä¹‹ç±»çš„å‘½ä»¤å°±æ˜¯è¿‡æ»¤å™¨äº†ã€‚è¿™æ ·çš„å‘½ä»¤
è¯»å–æ•°æ®ï¼Œå¯¹æ•°æ®æ‰§è¡Œä¸€äº›æ“ä½œï¼Œç„¶åå†™å…¥ç»“æœã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œè¿‡æ»¤å™¨å°±æ˜¯ä»»ä½•èƒ½å¤Ÿä»æ ‡å‡†
è¾“å…¥è¯»å– <strong>æ–‡æœ¬</strong> æ•°æ®ï¼Œå¹¶å‘æ ‡å‡†è¾“å‡ºå†™å…¥ <strong>æ–‡æœ¬</strong> æ•°æ®çš„å‘½ä»¤ã€‚åˆå› ä¸ºUnix çš„ <strong>KISS</strong>
è®¾è®¡ç†å¿µï¼Œæ‰€ä»¥æ¯ä¸ªç¨‹åºéƒ½è¢«è®¾è®¡æˆèƒ½å¤Ÿå‡ºè‰²å®Œæˆä¸€é¡¹ç‰¹å®šä»»åŠ¡çš„å·¥å…·ã€‚åˆå› ä¸ºé‡å®šå‘å’Œ
ç®¡é“çš„å­˜åœ¨ï¼Œä½¿å¾—å¯ä»¥å°†è¿™äº›å·¥å…·ç»„åˆèµ·æ¥ï¼Œå‘æŒ¥æ— ç©·å¨åŠ›</p>
<h2 id="cat"><span class="section-num">2</span> cat</h2>
<p>åœ¨shell é‡Œé¢è¿è¡Œcat,ä½ ä¼šè¢«è¦æ±‚è¾“å…¥æ–‡æœ¬æ•°æ®ï¼Œå½“ä½ è¾“å…¥ä¸€è¡Œæ•°æ®ä»¥åï¼Œç„¶åæŒ‰ä¸‹å›
è½¦ä½ è¾“å…¥çš„æ•°æ®å°±ä¼šæ˜¾ç¤ºåœ¨å±å¹•ï¼Œå½“ä½ æŒ‰ä¸‹ ^D(&lt;ctrl&gt;+d),å‘é€eof ä¿¡å·ç»™shell,é€€å‡º
catã€‚cat åšçš„äº‹å°±æ˜¯æŠŠä½ è¾“å…¥çš„å­—ç¬¦ï¼Œå¤åˆ¶åˆ°æ ‡å‡†è¾“å‡º (ä¸€èˆ¬æƒ…å†µæ˜¯æŒ‡ä½ çš„å±å¹•).çœ‹åˆ°
è¿™é‡Œæœ‰äººæˆ–è®¸ä¼šè´¨ç–‘ï¼Œè¿™ä¸œè¥¿æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿä¼¼ä¹ä»€ä¹ˆéƒ½ä½œä¸äº†ã€‚ä¸ï¼Œå®ƒçš„ç”¨å¤„å¾ˆå¤§å‘¢ï¼Œ
ä¸”å®¹ç¬”è€…ç»†ç»†ç¦€æ¥</p>
<h3 id="åœºæ™¯1"><span class="section-num">2.1</span> åœºæ™¯1</h3>
<p>å‡å¦‚ä½ è¦æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åªæ˜¯å¾ˆå°‘çš„æ–‡æœ¬ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç”¨
vim/emacs æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¾“å…¥å‡ è¡Œæ–‡å­—ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚è¿™æ˜¯ä¸€èˆ¬çš„åšæ³•ï¼Œ
çœ‹åˆ°è¿™é‡Œï¼Œå¾ˆè‡ªç„¶æœ‰äººä¼šå‘é—®ï¼Œéš¾é“æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ³•ï¼Ÿæœ‰ï¼Œä¸ç”¨æ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨å†™å…¥æ–‡æœ¬
çš„hackingæ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &gt; data
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å…¥æ•°æ®ï¼Œç„¶å ^D(&lt;ctrl&gt;+d) ä¿å­˜ã€‚ä½ å°±æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ª <strong>data</strong> æ–‡ä»¶
,å°±ä¼šè¢«ä»£æ›¿ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¹Ÿåœ¨åŸæ¥æ–‡æœ¬æœ«å°¾æ·»åŠ çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &gt;&gt; data
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åœºæ™¯2"><span class="section-num">2.2</span> åœºæ™¯2</h3>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªçŸ­æ–‡ä»¶ï¼Œä½ æƒ³æŸ¥çœ‹ä¸€ä¸‹ï¼ŒåŒæ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨cat</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &lt; data
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥çœç•¥ <strong>&lt;</strong> è¿™ä¸ªé‡å®šå‘ç¬¦å·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat data
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠ‘æˆ–æ˜¯ï¼Œä½ æƒ³æ˜¾ç¤ºæŸä¸ªå¤§æ–‡ä»¶çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä½ ä¹Ÿå¯ä»¥å¦‚ä¸Šæ“ä½œã€‚æˆ–è®¸ä½ ä¼šè§‰å¾—ï¼Œè¿™ä¸ªåŠŸèƒ½
å¾ˆå¤šå‘½ä»¤ä¹Ÿæœ‰ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ <strong>tail</strong>. ä½†æ˜¯å¦‚æœ <strong>cat</strong> å¯ä»¥å¾ˆå®Œç¾åœ°å¾ˆå…¶ä»–è¿‡æ»¤å™¨ç»“åˆ
å……å½“æ•´å¥—ç®¡é“çº¿å·¥å…·æµçš„èµ·å§‹ç«¯ï¼Œè¿™ä¸ªä»¥åæ…¢æ…¢å†é˜è¿°</p>
<h3 id="åœºæ™¯3"><span class="section-num">2.3</span> åœºæ™¯3</h3>
<p>å¦‚æœä½ æƒ³å¤åˆ¶æ–‡æœ¬æ–‡ä»¶ï¼Œä½ é¦–å…ˆä¼šæƒ³èµ·ä»€ä¹ˆå‘½ä»¤ï¼Ÿ <strong>cp</strong>,å¾ˆè‡ªç„¶å˜›ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–ï¼Œä½†æ˜¯cat
ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œå¾ˆæ„å¤–å§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat &lt; file &gt; newfile
</span></span></code></pre></td></tr></table>
</div>
</div><p>å³æŠŠ <strong>file</strong> å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶åå†æŠŠ <strong>file</strong> å½“ä½œæ ‡å‡†è¾“å…¥å¤åˆ¶åˆ° <strong>newfile</strong>.hacking!</p>
<h3 id="åœºæ™¯4"><span class="section-num">2.4</span> åœºæ™¯4</h3>
<p>å¦‚æœä½ æƒ³æŠŠå¤šä¸ªæ–‡æœ¬æ–‡ä»¶çš„ç»„åˆåˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿç”¨ç¼–è¾‘å™¨æ‰“å¼€æ‰€æœ‰çš„æ–‡ä»¶
ç„¶å select,cut,paste,save.æˆ‘ä¹Ÿä¼šå¾ˆè‡ªç„¶åœ°æƒ³åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æ˜¯å¦å­˜åœ¨ç€æ›´
ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿå½“ç„¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat file1 file2 file3 &gt;newfile
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>ä¸Šé¢å·²ç»ä»‹ç»äº†æŒºå¤šcat çš„ä½¿ç”¨åœºæ™¯äº†ï¼Œä½ è§‰å¾—cat è¡¨ç°æ»´æ€ä¹ˆæ ·å‘¢ï¼Ÿç›¸ä¿¡ä½ çš„æ„Ÿè§‰æ˜¯
è¿˜è¡Œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ï¼Œæˆ‘å¹å˜˜çš„é‚£ä¹ˆä»¤äººæƒŠè‰³ã€‚å› ä¸ºè¿™åªæ˜¯cat æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œå®ƒæœ€å¤§çš„
ç”¨æ³•è¿˜æ²¡æœ‰å®Œå…¨å±•ç°å‡ºæ¥ï¼Œç¬”è€…å…ˆä¸¾ä¸€ä¾‹ï¼Œä»¥åå†æ…¢æ…¢è¯¦å™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat file <span class="p">|</span>grep <span class="s2">&#34;something&#34;</span> <span class="p">|</span>sort -n <span class="p">|</span>tee newfile
</span></span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>ç”¨æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat &gt; file</td>
<td>è¯»å–è¾“å…¥ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–æ›¿æ¢</td>
</tr>
<tr>
<td>cat &gt;&gt;file</td>
<td>è¯»å–è¾“å…¥ï¼Œè¿½åŠ æ–°çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>cat file/cat &lt;file</td>
<td>æ˜¾ç¤ºä¸€ä¸ªå·²æœ‰æ–‡ä»¶</td>
</tr>
<tr>
<td>cat &lt;oldfile&gt; newfile</td>
<td>å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶</td>
</tr>
<tr>
<td>cat file1 file2 file3&gt;file4</td>
<td>ç»„åˆå¤šä¸ªæ–‡ä»¶</td>
</tr>
</tbody>
</table>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨head&#43;tail</title>
      <link>https://ramsayleung.github.io/zh/post/2017/head_tail/</link>
      <pubDate>Fri, 17 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/head_tail/</guid>
      <description>An introduction about head and tail</description>
      <content:encoded><![CDATA[<blockquote>
<p>head - output the first part of files
tail - output the last part of files</p>
</blockquote>
<p>å½“æ‹¥æœ‰çš„æ•°æ®å¤ªå¤šçš„æ—¶å€™ï¼Œä½¿ç”¨cat æ¥å±•ç¤ºæ•°æ®çš„è¯ï¼Œæ•°æ®é‡è¿‡å¤§ï¼Œå±å¹•å°±åªèƒ½æ˜¾ç¤ºæœ€åä¸€éƒ¨åˆ†çš„æ•°æ®äº†ã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ æƒ³é€‰å–éƒ¨åˆ†çš„æ•°æ®çš„è¯ï¼Œcat å°±ä¸æ˜¯ä¸€ä¸ªå¥½é€‰æ‹©äº†ã€‚æœ‰ä¸¤ä¸ªå‘½ä»¤å¯ä»¥æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œåˆ†åˆ«æ˜¯ <strong>head</strong> å’Œ <strong>tail</strong>.é¡¾åæ€ä¹‰ï¼Œhead é€‰å–æ•°æ®çš„å¼€å¤´éƒ¨åˆ†tail æ˜¯é€‰å–æ•°æ®çš„ç»“å°¾éƒ¨åˆ†</p>
<h2 id="ç”¨æ³•"><span class="section-num">1</span> ç”¨æ³•</h2>
<p>å½“æŠŠ <strong>head</strong> <strong>tail</strong> å½“ä½œè¿‡æ»¤å™¨æ¥ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨æ³•å¾ˆç®€å•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ head data
</span></span><span class="line"><span class="cl">$ tail data
</span></span></code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤æƒ…å†µä¸‹ <strong>head</strong> ä¼šé€‰å–æ•°æ®å¼€å¤´çš„10è¡Œæ•°æ® <strong>tail</strong> ä¼šé€‰å–æ•°æ®æœ€åçš„10è¡Œæ•°æ®. å¦‚æœä½ æƒ³é€‰å–æ›´å¤šçš„æ•°æ®çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŒ‡å®šè¡Œæ•°ï¼Œä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ head <span class="o">[</span>-n line<span class="o">]</span> data
</span></span><span class="line"><span class="cl">$ tail <span class="o">[</span>-n line<span class="o">]</span> data
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ line æ˜¯å¸Œæœ›é€‰å–çš„æ•°æ®è¡Œçš„æ•°é‡</p>
<h2 id="æƒŠè‰³ç‚¹"><span class="section-num">2</span> æƒŠè‰³ç‚¹</h2>
<p>ä½ å¯èƒ½è§‰å¾— <strong>head</strong> <strong>tail</strong> ä¸¤ä¸ªå‘½ä»¤å¾ˆç®€å•ï¼Œä¼¼ä¹ç”¨å¤„ä¸å¤§ã€‚</p>
<p>æ˜¯çš„ï¼Œå°±æˆ‘ä¸€ç›´æ‰€ä»‹ç»çš„é‚£æ ·ï¼Œå•ä¸ªunixå‘½ä»¤åªæ˜¯å®Œæˆä¸€ä¸ªç‰¹å®šçš„å·¥ä½œï¼Œä½†æ˜¯å½“å®ƒä»¬ç»„åˆèµ·æ¥çš„æ—¶å€™ï¼Œå°±å¾ˆå¨åŠ›æ— ç©·äº†</p>
<h3 id="åœºæ™¯1"><span class="section-num">2.1</span> åœºæ™¯1</h3>
<p>å‡å¦‚ä½ è¦ç”Ÿæˆä¸€ä¸²å¯†é’¥æ¥åŠ å¯†ä½ çš„æŸä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œä½ ä¼šæ€ä¹ˆåŠï¼Œç”¨python æˆ–è€… java å†™ä¸€ä¸ªéšæœºæ•°å‡½æ•°æ¥å®ç°ä¹ˆï¼Ÿæ— éœ€ï¼Œä½ ç”¨ç®€å•çš„è¿‡æ»¤å™¨åŠ Linux/Unix</p>
<p>å†…ç½®çš„è®¾å¤‡(dev):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat /dev/urandom <span class="p">|</span> tr -cd <span class="s2">&#34;[[:alnum:]]&#34;</span> <span class="p">|</span>head -c 32<span class="p">;</span><span class="nb">echo</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨Unix/Linux çš„æœºå™¨ä¸‹ï¼Œè¿è¡Œä¸Šé¢çš„å‘½ä»¤å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªåŒ…å«æ•°å­—å’Œå­—æ¯çš„32ä¸ªå­—ç¬¦é•¿çš„å¯†é’¥äº†ã€‚</p>
<p>/dev/urandom æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡æ”¶é›†ç¡¬ä»¶é©±åŠ¨çš„ç¯å¢ƒå™ªéŸ³æ¥äº§ç”Ÿä¼ªéšæœºæ•°ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œtr æ˜¯è½¬æ¢å’Œåˆ é™¤å­—ç¬¦çš„å‘½ä»¤ï¼›æ›´å¤šè¯¦ç»†çš„ä¸œè¥¿ï¼Œä»¥åæˆ‘ä¼šæ…¢æ…¢ä»‹ç»æ»´</p>
<h3 id="åœºæ™¯2"><span class="section-num">2.2</span> åœºæ™¯2</h3>
<p>åœ¨æ—¥å¸¸çš„å¼€å‘æˆ–è€…è¿è¡Œç¯å¢ƒä¸­ï¼Œæ—¥å¿—æ˜¯å¿…ä¸å¯å°‘æ»´ï¼Œä½†æ˜¯æ—¥å¿—æ˜¯ä¸æ–­äº§ç”Ÿæ–°çš„æ•°æ®çš„,æ‰€ä»¥æœ‰æ—¶å€™å°±ä¼šå‡ºç°ç”¨ç¼–è¾‘å™¨æ‰“å¼€æ—¥å¿—çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ï¼Œç¼–è¾‘å™¨ä¸æ–­æé†’ä½ æ–‡ä»¶å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œæ˜¯å¦é‡æ–°åŠ è½½ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ç”¨cat,tail æ¥æŸ¥çœ‹æ—¥å¿—ï¼Œæ—¥å¿—åˆæ˜¯ä¿æŒåœ¨
æ‰“å¼€çš„é‚£ä¸ªçŠ¶æ€ï¼Œæ–°äº§ç”Ÿçš„æ—¥å¿—æ•°æ®æ˜¯æ²¡åŠæ³•æµè§ˆåˆ°ï¼ŒæœçœŸå¦‚æ­¤ï¼Ÿ</p>
<p>å…¶å®ä¸ç„¶, tail å¯ä»¥åœ¨æŸ¥çœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œä¿æŒæ—¥å¿—ä¸€ç›´åœ¨æ›´æ–°ã€‚å…³é”®å°±åœ¨ <strong>-f</strong> é€‰é¡¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tail -f <span class="o">[</span>-n line<span class="o">]</span> file
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>-f</strong> é€‰é¡¹å‘Šè¯‰tail å½“åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ä¸è¦åœæ­¢ã€‚ç›¸åï¼Œtail è¦ä¸€ç›´ç­‰ä¸‹å»ï¼Œå¹¶ä¸”éšç€æ–‡ä»¶çš„å¢é•¿ï¼Œæ˜¾ç¤ºæ›´å¤šçš„è¾“å‡º (-f -&gt; follow)</p>
<p>ä½ ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿæ—¥å¿—ä¸æ–­ç”Ÿæˆçš„è¿‡ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tail -f -n <span class="m">20</span> something.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæ‰“å¼€ä¸€ä¸ªæ–°çš„Shell, è¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat &gt;&gt; something.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ <strong>&gt;&gt;</strong> è¿½åŠ æ•°æ®ï¼Œå°±å¯ä»¥æ¨¡æ‹Ÿæ—¥å¿—ç”Ÿæˆçš„è¿‡ç¨‹äº†</p>
<h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>è¦æŒæ¡æ›´å¤šçš„ç”¨æ³•è¿˜æ˜¯è¦æŸ¥çœ‹æ–‡æ¡£æ»´ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man head
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹è¿‡æ»¤å™¨head&#43;tail</title>
      <link>https://ramsayleung.github.io/zh/post/2017/head_tail/</link>
      <pubDate>Fri, 17 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/head_tail/</guid>
      <description>An introduction about head and tail</description>
      <content:encoded><![CDATA[<blockquote>
<p>head - output the first part of files
tail - output the last part of files</p>
</blockquote>
<p>å½“æ‹¥æœ‰çš„æ•°æ®å¤ªå¤šçš„æ—¶å€™ï¼Œä½¿ç”¨cat æ¥å±•ç¤ºæ•°æ®çš„è¯ï¼Œæ•°æ®é‡è¿‡å¤§ï¼Œå±å¹•å°±åªèƒ½æ˜¾ç¤ºæœ€åä¸€éƒ¨åˆ†çš„æ•°æ®äº†ã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ æƒ³é€‰å–éƒ¨åˆ†çš„æ•°æ®çš„è¯ï¼Œcat å°±ä¸æ˜¯ä¸€ä¸ªå¥½é€‰æ‹©äº†ã€‚æœ‰ä¸¤ä¸ªå‘½ä»¤å¯ä»¥æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œåˆ†åˆ«æ˜¯ <strong>head</strong> å’Œ <strong>tail</strong>.é¡¾åæ€ä¹‰ï¼Œhead é€‰å–æ•°æ®çš„å¼€å¤´éƒ¨åˆ†tail æ˜¯é€‰å–æ•°æ®çš„ç»“å°¾éƒ¨åˆ†</p>
<h2 id="ç”¨æ³•"><span class="section-num">1</span> ç”¨æ³•</h2>
<p>å½“æŠŠ <strong>head</strong> <strong>tail</strong> å½“ä½œè¿‡æ»¤å™¨æ¥ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨æ³•å¾ˆç®€å•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ head data
</span></span><span class="line"><span class="cl">$ tail data
</span></span></code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤æƒ…å†µä¸‹ <strong>head</strong> ä¼šé€‰å–æ•°æ®å¼€å¤´çš„10è¡Œæ•°æ® <strong>tail</strong> ä¼šé€‰å–æ•°æ®æœ€åçš„10è¡Œæ•°æ®. å¦‚æœä½ æƒ³é€‰å–æ›´å¤šçš„æ•°æ®çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŒ‡å®šè¡Œæ•°ï¼Œä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ head <span class="o">[</span>-n line<span class="o">]</span> data
</span></span><span class="line"><span class="cl">$ tail <span class="o">[</span>-n line<span class="o">]</span> data
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ line æ˜¯å¸Œæœ›é€‰å–çš„æ•°æ®è¡Œçš„æ•°é‡</p>
<h2 id="æƒŠè‰³ç‚¹"><span class="section-num">2</span> æƒŠè‰³ç‚¹</h2>
<p>ä½ å¯èƒ½è§‰å¾— <strong>head</strong> <strong>tail</strong> ä¸¤ä¸ªå‘½ä»¤å¾ˆç®€å•ï¼Œä¼¼ä¹ç”¨å¤„ä¸å¤§ã€‚</p>
<p>æ˜¯çš„ï¼Œå°±æˆ‘ä¸€ç›´æ‰€ä»‹ç»çš„é‚£æ ·ï¼Œå•ä¸ªunixå‘½ä»¤åªæ˜¯å®Œæˆä¸€ä¸ªç‰¹å®šçš„å·¥ä½œï¼Œä½†æ˜¯å½“å®ƒä»¬ç»„åˆèµ·æ¥çš„æ—¶å€™ï¼Œå°±å¾ˆå¨åŠ›æ— ç©·äº†</p>
<h3 id="åœºæ™¯1"><span class="section-num">2.1</span> åœºæ™¯1</h3>
<p>å‡å¦‚ä½ è¦ç”Ÿæˆä¸€ä¸²å¯†é’¥æ¥åŠ å¯†ä½ çš„æŸä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œä½ ä¼šæ€ä¹ˆåŠï¼Œç”¨python æˆ–è€… java å†™ä¸€ä¸ªéšæœºæ•°å‡½æ•°æ¥å®ç°ä¹ˆï¼Ÿæ— éœ€ï¼Œä½ ç”¨ç®€å•çš„è¿‡æ»¤å™¨åŠ Linux/Unix</p>
<p>å†…ç½®çš„è®¾å¤‡(dev):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat /dev/urandom <span class="p">|</span> tr -cd <span class="s2">&#34;[[:alnum:]]&#34;</span> <span class="p">|</span>head -c 32<span class="p">;</span><span class="nb">echo</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨Unix/Linux çš„æœºå™¨ä¸‹ï¼Œè¿è¡Œä¸Šé¢çš„å‘½ä»¤å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªåŒ…å«æ•°å­—å’Œå­—æ¯çš„32ä¸ªå­—ç¬¦é•¿çš„å¯†é’¥äº†ã€‚</p>
<p>/dev/urandom æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡æ”¶é›†ç¡¬ä»¶é©±åŠ¨çš„ç¯å¢ƒå™ªéŸ³æ¥äº§ç”Ÿä¼ªéšæœºæ•°ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œtr æ˜¯è½¬æ¢å’Œåˆ é™¤å­—ç¬¦çš„å‘½ä»¤ï¼›æ›´å¤šè¯¦ç»†çš„ä¸œè¥¿ï¼Œä»¥åæˆ‘ä¼šæ…¢æ…¢ä»‹ç»æ»´</p>
<h3 id="åœºæ™¯2"><span class="section-num">2.2</span> åœºæ™¯2</h3>
<p>åœ¨æ—¥å¸¸çš„å¼€å‘æˆ–è€…è¿è¡Œç¯å¢ƒä¸­ï¼Œæ—¥å¿—æ˜¯å¿…ä¸å¯å°‘æ»´ï¼Œä½†æ˜¯æ—¥å¿—æ˜¯ä¸æ–­äº§ç”Ÿæ–°çš„æ•°æ®çš„,æ‰€ä»¥æœ‰æ—¶å€™å°±ä¼šå‡ºç°ç”¨ç¼–è¾‘å™¨æ‰“å¼€æ—¥å¿—çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ï¼Œç¼–è¾‘å™¨ä¸æ–­æé†’ä½ æ–‡ä»¶å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œæ˜¯å¦é‡æ–°åŠ è½½ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ç”¨cat,tail æ¥æŸ¥çœ‹æ—¥å¿—ï¼Œæ—¥å¿—åˆæ˜¯ä¿æŒåœ¨
æ‰“å¼€çš„é‚£ä¸ªçŠ¶æ€ï¼Œæ–°äº§ç”Ÿçš„æ—¥å¿—æ•°æ®æ˜¯æ²¡åŠæ³•æµè§ˆåˆ°ï¼ŒæœçœŸå¦‚æ­¤ï¼Ÿ</p>
<p>å…¶å®ä¸ç„¶, tail å¯ä»¥åœ¨æŸ¥çœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œä¿æŒæ—¥å¿—ä¸€ç›´åœ¨æ›´æ–°ã€‚å…³é”®å°±åœ¨ <strong>-f</strong> é€‰é¡¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tail -f <span class="o">[</span>-n line<span class="o">]</span> file
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>-f</strong> é€‰é¡¹å‘Šè¯‰tail å½“åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ä¸è¦åœæ­¢ã€‚ç›¸åï¼Œtail è¦ä¸€ç›´ç­‰ä¸‹å»ï¼Œå¹¶ä¸”éšç€æ–‡ä»¶çš„å¢é•¿ï¼Œæ˜¾ç¤ºæ›´å¤šçš„è¾“å‡º (-f -&gt; follow)</p>
<p>ä½ ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿæ—¥å¿—ä¸æ–­ç”Ÿæˆçš„è¿‡ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tail -f -n <span class="m">20</span> something.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæ‰“å¼€ä¸€ä¸ªæ–°çš„Shell, è¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat &gt;&gt; something.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ <strong>&gt;&gt;</strong> è¿½åŠ æ•°æ®ï¼Œå°±å¯ä»¥æ¨¡æ‹Ÿæ—¥å¿—ç”Ÿæˆçš„è¿‡ç¨‹äº†</p>
<h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>è¦æŒæ¡æ›´å¤šçš„ç”¨æ³•è¿˜æ˜¯è¦æŸ¥çœ‹æ–‡æ¡£æ»´ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man head
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹ç¥å™¨percol</title>
      <link>https://ramsayleung.github.io/zh/post/2017/percol/</link>
      <pubDate>Mon, 13 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/percol/</guid>
      <description>An introduction about percol</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/mooz/percol">Percol</a> æ˜¯Emacs çš„ä¸€ä¸ªéå¸¸ä¼˜ç§€package, js2-modeä½œè€…mooz çš„åˆä¸€åŠ›ä½œå¾—ç›ŠäºUnix Shellçš„ç®¡é“å’Œé‡å®šå‘è®¾è®¡ç†å¿µï¼Œpercol æ‰€æœ‰çš„è¾“å…¥è¾“å‡ºå˜å¾—å¯äº¤äº’ percol ç»™æˆ‘ä¸€ç§å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼Œå°±æ˜¯ Eamcs ä¸­helm å¢é‡è¡¥å…¨ (incremental completion)çš„æ„Ÿè§‰ï¼ŒçœŸçš„å¯ä»¥10å€æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<h2 id="ä¾‹å­"><span class="section-num">1</span> ä¾‹å­</h2>
<p>å‡å¦‚ä½ è¦ç”¨git åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯åˆ†æ”¯å¾ˆå¤šï¼Œä½ ä¸èƒ½è®°ä½ä½ è¦åˆ‡æ¢çš„åˆ†æ”¯çš„åå­—ã€‚é‚£ä¹ˆæœ‰percol ä½ å¯ä»¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout <span class="k">$(</span>git branch<span class="p">|</span>percol<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£æ ·ï¼Œä½ å°±å¯ä»¥ï¼Œé€‰æ‹©è¦åˆ‡æ¢çš„åˆ†æ”¯äº†</p>
<p>å¹³æ—¶åœ¨Linux/Unix ä¸‹ï¼Œå¦‚æœè¦kill æ‰æŸä¸ªè¿›ç¨‹çš„è¯ï¼Œæˆ‘ä¸€èˆ¬æ˜¯ç”¨ <code>htop</code> æˆ–è€…æ˜¯ps æ‰¾å‡ºè¦kill æ‰çš„è¿›ç¨‹çš„pid, ç„¶ååœ¨ <code>kill pid</code>. ä½†æ˜¯ç°åœ¨æœ‰äº†percol, å¯ä»¥ä¸€æ­¥æå®šæ‰€æœ‰çš„æ­¥éª¤ã€‚</p>
<p>å®˜ç½‘ç»™å‡ºçš„ä¾‹å­å‡½æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> ppgrep<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">PERCOL</span><span class="o">=</span>percol
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nv">PERCOL</span><span class="o">=</span><span class="s2">&#34;percol --query </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    ps aux <span class="p">|</span> <span class="nb">eval</span> <span class="nv">$PERCOL</span> <span class="p">|</span> awk <span class="s1">&#39;{ print $2 }&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> ppkill<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span>~ <span class="s2">&#34;^-&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">QUERY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>            <span class="c1"># options only</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nv">QUERY</span><span class="o">=</span><span class="nv">$1</span>            <span class="c1"># with a query</span>
</span></span><span class="line"><span class="cl">        <span class="o">[[</span> <span class="nv">$#</span> &gt; <span class="m">0</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">shift</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    ppgrep <span class="nv">$QUERY</span> <span class="p">|</span> xargs <span class="nb">kill</span> <span class="nv">$*</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…æ˜¯æ›´å¥½åœ°è¿›è¡ŒæŸ¥æ‰¾å†å²å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> exists <span class="o">{</span> which <span class="nv">$1</span> <span class="p">&amp;</span>&gt; /dev/null <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> exists percol<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> percol_select_history<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> tac
</span></span><span class="line"><span class="cl">        exists gtac <span class="o">&amp;&amp;</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;gtac&#34;</span> <span class="o">||</span> <span class="o">{</span> exists tac <span class="o">&amp;&amp;</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;tac&#34;</span> <span class="o">||</span> <span class="o">{</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;tail -r&#34;</span> <span class="o">}</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="nv">BUFFER</span><span class="o">=</span><span class="k">$(</span><span class="nb">fc</span> -l -n <span class="m">1</span> <span class="p">|</span> <span class="nb">eval</span> <span class="nv">$tac</span> <span class="p">|</span> percol --query <span class="s2">&#34;</span><span class="nv">$LBUFFER</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">CURSOR</span><span class="o">=</span><span class="nv">$#</span>BUFFER         <span class="c1"># move cursor</span>
</span></span><span class="line"><span class="cl">        zle -R -c               <span class="c1"># refresh</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    zle -N percol_select_history
</span></span><span class="line"><span class="cl">    bindkey <span class="s1">&#39;^R&#39;</span> percol_select_history
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿è¡Œæˆªå›¾"><span class="section-num">1.1</span> è¿è¡Œæˆªå›¾</h3>
<p><a href="/ox-hugo/percol1.png"><img loading="lazy" src="/ox-hugo/percol1.png" alt=""  />
</a>
æœ‰æ—¶å€™ï¼Œæˆ‘éœ€è¦å¤åˆ¶å½“å‰ç›®å½•ä¸‹ï¼ŒæŸä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œä½†æ˜¯æ— è®ºæ˜¯æ–‡ä»¶ç®¡ç†å™¨ï¼Œè¿˜æ˜¯shelléƒ½è¦ç”¨é¼ æ ‡æ¥å¤åˆ¶æŒ‡å®šæ–‡ä»¶çš„è·¯å¾„ï¼Œæ•ˆç‡ä¸é«˜ä¸”å¾ˆä¸æ–¹ä¾¿ã€‚</p>
<p>åœ¨ <a href="http://blog.binchen.org/posts/how-to-use-git-effectively.html">é™ˆæ–Œ</a> ä»£ç çš„å¯å‘ä¸‹ï¼Œæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªå‡½æ•°æ¥å¤åˆ¶å½“å‰æ–‡ä»¶å¤¹æŸä¸ªç‰¹å®šç›®å½•çš„è·¯å¾„ï¼Œå¾ˆæ–¹ä¾¿åœ°è§£å†³äº†é—®é¢˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">OS_NAME</span><span class="o">=</span><span class="sb">`</span>uname<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> pclip<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$OS_NAME</span> <span class="o">=</span> <span class="s2">&#34;CYGWIN&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        putclip <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="o">[</span> <span class="nv">$OS_NAME</span> <span class="o">=</span> <span class="s2">&#34;Darwin&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        pbcopy <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -x /usr/bin/xsel <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            xsel -ib <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">[</span> -x /usr/bin/xclip <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                xclip -selection c <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="s2">&#34;Neither xsel or xclip is installed!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">fi</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> pwdf<span class="o">()</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">current_dir</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">copied_file</span><span class="o">=</span><span class="sb">`</span>find <span class="nv">$current_dir</span> -type f -print <span class="p">|</span>percol<span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="nv">$copied_file</span> <span class="p">|</span>pclip<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ›´å¤šçš„ç”¨æ³•å°±è¦æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="https://github.com/mooz/percol"> percol</a></p>
<p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Linux/Unix Shell äºŒä¸‰äº‹ä¹‹ç¥å™¨percol</title>
      <link>https://ramsayleung.github.io/zh/post/2017/percol/</link>
      <pubDate>Mon, 13 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/percol/</guid>
      <description>An introduction about percol</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/mooz/percol">Percol</a> æ˜¯Emacs çš„ä¸€ä¸ªéå¸¸ä¼˜ç§€package, js2-modeä½œè€…mooz çš„åˆä¸€åŠ›ä½œå¾—ç›ŠäºUnix Shellçš„ç®¡é“å’Œé‡å®šå‘è®¾è®¡ç†å¿µï¼Œpercol æ‰€æœ‰çš„è¾“å…¥è¾“å‡ºå˜å¾—å¯äº¤äº’ percol ç»™æˆ‘ä¸€ç§å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼Œå°±æ˜¯ Eamcs ä¸­helm å¢é‡è¡¥å…¨ (incremental completion)çš„æ„Ÿè§‰ï¼ŒçœŸçš„å¯ä»¥10å€æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<h2 id="ä¾‹å­"><span class="section-num">1</span> ä¾‹å­</h2>
<p>å‡å¦‚ä½ è¦ç”¨git åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯åˆ†æ”¯å¾ˆå¤šï¼Œä½ ä¸èƒ½è®°ä½ä½ è¦åˆ‡æ¢çš„åˆ†æ”¯çš„åå­—ã€‚é‚£ä¹ˆæœ‰percol ä½ å¯ä»¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout <span class="k">$(</span>git branch<span class="p">|</span>percol<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£æ ·ï¼Œä½ å°±å¯ä»¥ï¼Œé€‰æ‹©è¦åˆ‡æ¢çš„åˆ†æ”¯äº†</p>
<p>å¹³æ—¶åœ¨Linux/Unix ä¸‹ï¼Œå¦‚æœè¦kill æ‰æŸä¸ªè¿›ç¨‹çš„è¯ï¼Œæˆ‘ä¸€èˆ¬æ˜¯ç”¨ <code>htop</code> æˆ–è€…æ˜¯ps æ‰¾å‡ºè¦kill æ‰çš„è¿›ç¨‹çš„pid, ç„¶ååœ¨ <code>kill pid</code>. ä½†æ˜¯ç°åœ¨æœ‰äº†percol, å¯ä»¥ä¸€æ­¥æå®šæ‰€æœ‰çš„æ­¥éª¤ã€‚</p>
<p>å®˜ç½‘ç»™å‡ºçš„ä¾‹å­å‡½æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> ppgrep<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">PERCOL</span><span class="o">=</span>percol
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nv">PERCOL</span><span class="o">=</span><span class="s2">&#34;percol --query </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    ps aux <span class="p">|</span> <span class="nb">eval</span> <span class="nv">$PERCOL</span> <span class="p">|</span> awk <span class="s1">&#39;{ print $2 }&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> ppkill<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span>~ <span class="s2">&#34;^-&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">QUERY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>            <span class="c1"># options only</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nv">QUERY</span><span class="o">=</span><span class="nv">$1</span>            <span class="c1"># with a query</span>
</span></span><span class="line"><span class="cl">        <span class="o">[[</span> <span class="nv">$#</span> &gt; <span class="m">0</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">shift</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    ppgrep <span class="nv">$QUERY</span> <span class="p">|</span> xargs <span class="nb">kill</span> <span class="nv">$*</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…æ˜¯æ›´å¥½åœ°è¿›è¡ŒæŸ¥æ‰¾å†å²å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> exists <span class="o">{</span> which <span class="nv">$1</span> <span class="p">&amp;</span>&gt; /dev/null <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> exists percol<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> percol_select_history<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> tac
</span></span><span class="line"><span class="cl">        exists gtac <span class="o">&amp;&amp;</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;gtac&#34;</span> <span class="o">||</span> <span class="o">{</span> exists tac <span class="o">&amp;&amp;</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;tac&#34;</span> <span class="o">||</span> <span class="o">{</span> <span class="nv">tac</span><span class="o">=</span><span class="s2">&#34;tail -r&#34;</span> <span class="o">}</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="nv">BUFFER</span><span class="o">=</span><span class="k">$(</span><span class="nb">fc</span> -l -n <span class="m">1</span> <span class="p">|</span> <span class="nb">eval</span> <span class="nv">$tac</span> <span class="p">|</span> percol --query <span class="s2">&#34;</span><span class="nv">$LBUFFER</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">CURSOR</span><span class="o">=</span><span class="nv">$#</span>BUFFER         <span class="c1"># move cursor</span>
</span></span><span class="line"><span class="cl">        zle -R -c               <span class="c1"># refresh</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    zle -N percol_select_history
</span></span><span class="line"><span class="cl">    bindkey <span class="s1">&#39;^R&#39;</span> percol_select_history
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿è¡Œæˆªå›¾"><span class="section-num">1.1</span> è¿è¡Œæˆªå›¾</h3>
<p><a href="/ox-hugo/percol1.png"><img loading="lazy" src="/ox-hugo/percol1.png" alt=""  />
</a>
æœ‰æ—¶å€™ï¼Œæˆ‘éœ€è¦å¤åˆ¶å½“å‰ç›®å½•ä¸‹ï¼ŒæŸä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œä½†æ˜¯æ— è®ºæ˜¯æ–‡ä»¶ç®¡ç†å™¨ï¼Œè¿˜æ˜¯shelléƒ½è¦ç”¨é¼ æ ‡æ¥å¤åˆ¶æŒ‡å®šæ–‡ä»¶çš„è·¯å¾„ï¼Œæ•ˆç‡ä¸é«˜ä¸”å¾ˆä¸æ–¹ä¾¿ã€‚</p>
<p>åœ¨ <a href="http://blog.binchen.org/posts/how-to-use-git-effectively.html">é™ˆæ–Œ</a> ä»£ç çš„å¯å‘ä¸‹ï¼Œæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªå‡½æ•°æ¥å¤åˆ¶å½“å‰æ–‡ä»¶å¤¹æŸä¸ªç‰¹å®šç›®å½•çš„è·¯å¾„ï¼Œå¾ˆæ–¹ä¾¿åœ°è§£å†³äº†é—®é¢˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">OS_NAME</span><span class="o">=</span><span class="sb">`</span>uname<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> pclip<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$OS_NAME</span> <span class="o">=</span> <span class="s2">&#34;CYGWIN&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        putclip <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="o">[</span> <span class="nv">$OS_NAME</span> <span class="o">=</span> <span class="s2">&#34;Darwin&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        pbcopy <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -x /usr/bin/xsel <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            xsel -ib <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">[</span> -x /usr/bin/xclip <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                xclip -selection c <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="s2">&#34;Neither xsel or xclip is installed!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">fi</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> pwdf<span class="o">()</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">current_dir</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">copied_file</span><span class="o">=</span><span class="sb">`</span>find <span class="nv">$current_dir</span> -type f -print <span class="p">|</span>percol<span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="nv">$copied_file</span> <span class="p">|</span>pclip<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ›´å¤šçš„ç”¨æ³•å°±è¦æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="https://github.com/mooz/percol"> percol</a></p>
<p>Enjoy Shell :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
  </channel>
</rss>
