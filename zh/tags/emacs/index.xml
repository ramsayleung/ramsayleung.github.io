<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Emacs on è¿‡æ²³å’</title>
    <link>https://ramsayleung.github.io/zh/tags/emacs/</link>
    <description>Recent content in Emacs on è¿‡æ²³å’</description>
    <image>
      <title>è¿‡æ²³å’</title>
      <url>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://ramsayleung.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.146.7</generator>
    <language>zh</language>
    <copyright>See this site&amp;rsquo;s source code here, licensed under GPLv3 Â·</copyright>
    <lastBuildDate>Thu, 09 Jan 2025 19:20:26 -0800</lastBuildDate>
    <atom:link href="https://ramsayleung.github.io/zh/tags/emacs/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>å•ç‹¬ä½¿ç”¨Emacsçš„Magitæ’ä»¶</title>
      <link>https://ramsayleung.github.io/zh/post/2024/%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8emacs%E7%9A%84magit%E6%8F%92%E4%BB%B6/</link>
      <pubDate>Wed, 11 Dec 2024 16:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2024/%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8emacs%E7%9A%84magit%E6%8F%92%E4%BB%B6/</guid>
      <description>&lt;h2 id=&#34;emacs-ä¸-magit&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Emacs ä¸ Magit&lt;/h2&gt;
&lt;p&gt;ä¸çŸ¥ä¸è§‰ï¼Œæˆ‘å·²ç»ä½¿ç”¨Emacs å¿«10å¹´äº†ï¼Œåœ¨æˆ‘ä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨ä¸­ï¼ŒEmacsæ˜¯æ‰©å±•æ€§æœ€å¼ºçš„ç¼–è¾‘å™¨ï¼Œæ¯•ç«ŸEmacsæ˜¯ä¸ªæŠ«ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lispè™šæ‹Ÿæœºã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="emacs-ä¸-magit"><span class="section-num">1</span> Emacs ä¸ Magit</h2>
<p>ä¸çŸ¥ä¸è§‰ï¼Œæˆ‘å·²ç»ä½¿ç”¨Emacs å¿«10å¹´äº†ï¼Œåœ¨æˆ‘ä½¿ç”¨è¿‡çš„ç¼–è¾‘å™¨ä¸­ï¼ŒEmacsæ˜¯æ‰©å±•æ€§æœ€å¼ºçš„ç¼–è¾‘å™¨ï¼Œæ¯•ç«ŸEmacsæ˜¯ä¸ªæŠ«ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lispè™šæ‹Ÿæœºã€‚</p>
<p>åœ¨Emacsæ— æ‰€ä¸èƒ½çš„æ‰©å±•æ€§ä¹‹ä¸‹ï¼Œè¯ç”Ÿäº†éå¸¸å¤šå¼ºå¤§çš„æ’ä»¶ï¼Œ
ä¹Ÿè®©Emacsæœ‰äº†ã€Œä¼ªè£…æˆæ“ä½œç³»ç»Ÿçš„ç¼–è¾‘å™¨ã€çš„ç¾åï¼Œè€ŒEmacså…¬è®¤çš„æ€æ‰‹é”æ’ä»¶æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ <a href="https://orgmode.org/">org-mode</a>ï¼Œå¦ä¸€ä¸ªæ˜¯ <a href="https://magit.vc/">magit</a>. (æˆ‘ä¸ªäººè§‰å¾—è¿˜æœ‰ä¸ª <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html">dired</a>)</p>
<p>Orgmodeæ˜¯ç±»ä¼¼Markdownï¼Œä¸Emacsæ·±åº¦ç»‘å®šä¼˜åŒ–çš„æ ‡è®°è¯­è¨€ï¼Œä½¿ç”¨Emacsæ¥ç¼–å†™org-mode æ–‡æ¡£å°±æœ‰ä¸‹ç¬”æœ‰ç¥ï¼Œæ–‡æ€æ³‰æ¶Œï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘(è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”¨org-modeå†™çš„)ã€‚</p>
<p>å› ä¸ºorg-mode ä¸Emacs æ·±åº¦ç»“åˆï¼Œè‡ªç„¶æ— æ³•è„±ç¦»Emacså•ç‹¬ä½¿ç”¨ï¼Œè€Œå…¶ä»–ç¼–è¾‘å™¨æ¨¡ä»¿org-mode å¼€å‘çš„æ’ä»¶ï¼Œå¦‚ <a href="https://github.com/jceb/vim-orgmode">vim-orgmode</a>, <a href="https://github.com/nvim-orgmode/orgmode">nvim-orgmode</a> å’Œ <a href="https://github.com/vscode-org-mode/vscode-org-mode">vscode-orgmode</a>, éš¾å…åªå¾—å…¶å½¢ï¼Œæœªå¾—å…¶ç¥ï¼Œè¿˜ä¸å¦‚ç”¨Markdown.</p>
<p>è€Œ Magit æ˜¯ Gitçš„Emacså›¾å½¢åŒ–å®¢æˆ·ç«¯, ä¹Ÿæ˜¯æˆ‘ç”¨è¿‡çš„æœ€å¥½ç”¨çš„Git å®¢æˆ·ç«¯è½¯ä»¶ï¼Œæ—¢ç›´è§‚åˆæ˜“ç”¨(çœ‹çœ‹Emacs é“å‹ä»¬å¤¸ Magit çš„<a href="https://emacs-china.org/t/magit/22521/5">å¸–å­</a>):</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-02203" hidden>
    <label for="zoomCheck-02203">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/magit_dashboard.jpg"/> 
    
    
    </label>
</figure>

<p>è™½ç„¶æˆ‘å·²ç»ç”¨äº†Emacså¾ˆå¤šå¹´ï¼Œä½†æ˜¯å·²ç»è¿‡äº†Live with Emacsçš„å¢ƒç•Œ, ä¸ä¼šç”¨Emacså¤„ç†æ‰€æœ‰äº‹æƒ…, æ¯”å¦‚ç”¨VSCode å†™Rust, ç”¨Intellij Ideaå†™Java, æ—¢ç„¶ Magit é‚£ä¹ˆå¥½ç”¨ï¼Œæœ‰æ²¡å¯èƒ½ç‹¬ç«‹äºEmacsä½¿ç”¨å‘¢?</p>
<h2 id="emacs-daemon"><span class="section-num">2</span> Emacs daemon</h2>
<p>ä½œä¸ºæ— æ‰€ä¸èƒ½çš„ã€Œæ“ä½œç³»ç»Ÿã€, Emacs ä½œä¸º<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html">server</a> ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œç„¶åå†ä½¿ç”¨ <code>emacsclient</code> è¿æ¥ server:</p>
<p>å‰æ–‡æåˆ°, Emacs æ˜¯æ‰¹ç€ç¼–è¾‘å™¨å¤–è¡£çš„Lisp VM, è€Œ Magit æœ¬è´¨ä¹Ÿåªæ˜¯ä¸€ä¸ª lisp function, åªè¦åœ¨å¯åŠ¨emacsclientçš„æ—¶å€™ï¼Œå†è°ƒç”¨ magitçš„å‡½æ•°, é‚£ä¹ˆå°±å¯ä»¥å¯åŠ¨ Magit:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">magit</span><span class="o">=</span><span class="s2">&#34;emacsclient -nw -eval &#39;(magit-status)&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
<figure>
    
    
    <input type="checkbox" id="zoomCheck-cc913" hidden>
    <label for="zoomCheck-cc913">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/magit.gif"/> 
    
    
    </label>
</figure>

<p>è¿™æ ·å°±å¯ä»¥åœ¨VSCodeå’ŒIdeaé‡Œé¢æ„‰å¿«åœ°ä½¿ç”¨ magitäº†.</p>
<h2 id="æ€»ç»“"><span class="section-num">3</span> æ€»ç»“</h2>
<p>åœ¨Emacs-China è®ºå›æœç´¢Magitçš„æ—¶å€™, å‘ç°äº†ä¹Ÿæœ‰ä¸€ä¸ªå¸–å­è®¨è®ºæŠŠ <a href="https://emacs-china.org/t/magit/25527/6">magitå½“ä½œçš„å•ç‹¬çš„å·¥å…·</a>, æ²¡æƒ³åˆ°æœ‰ä¸ªå›å¤çš„æ€è·¯å’Œæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Emacsä½œä¸ºdaemon æ¥å¯ç”¨.</p>
<p>åªæ˜¯æ²¡æœ‰æƒ³åˆ°ä»–æ›´evil, åœ¨Nvim é‡Œé¢ä½¿ç”¨Magit, æˆ‘ä¹Ÿå­¦ä¹ ä¸€ä¸‹ Nvim+Emacs çš„ç»„åˆ :)</p>
<h2 id="å‚è€ƒ"><span class="section-num">4</span> å‚è€ƒ</h2>
<ul>
<li><a href="https://orgmode.org/">https://orgmode.org/</a></li>
<li><a href="https://magit.vc/">https://magit.vc/</a></li>
<li><a href="https://emacs-china.org/t/magit/22521/5">https://emacs-china.org/t/magit/22521/5</a></li>
<li><a href="https://emacs-china.org/t/magit/25527/6">https://emacs-china.org/t/magit/25527/6</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html">https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html">https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html</a></li>
</ul>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>EmacsæŠ€å·§åˆ†äº«: ä½¿ç”¨ewwæ‰“å¼€åœ¨çº¿org-modeæ–‡æ¡£</title>
      <link>https://ramsayleung.github.io/zh/post/2023/emacs%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_%E4%BD%BF%E7%94%A8eww%E6%89%93%E5%BC%80%E5%9C%A8%E7%BA%BForg-mode%E6%96%87%E6%A1%A3/</link>
      <pubDate>Sat, 04 Mar 2023 21:55:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2023/emacs%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_%E4%BD%BF%E7%94%A8eww%E6%89%93%E5%BC%80%E5%9C%A8%E7%BA%BForg-mode%E6%96%87%E6%A1%A3/</guid>
      <description>&lt;h2 id=&#34;æŠ€å·§&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; æŠ€å·§&lt;/h2&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨org-mode æ ¼å¼çš„æ–‡æœ¬ï¼Œä¾‹å¦‚Emacså®˜æ–¹&lt;a href=&#34;https://git.savannah.gnu.org/cgit/emacs.git/plain/admin/notes/tree-sitter/starter-guide?h=feature/tree-sitter&#34;&gt; tree-sitter çš„ä½¿ç”¨æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨çº¿é˜…è¯»ä¸æ˜¯å¾ˆæ˜“è¯»ï¼Œç›¸å½“äºäººè„‘è§£æ &lt;code&gt;org-mode&lt;/code&gt;. æˆ‘çš„ä¸ªäººä¹ æƒ¯æ˜¯ä½¿ç”¨ &lt;code&gt;eww&lt;/code&gt; æµè§ˆå™¨æ¥é˜…è¯»:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="æŠ€å·§"><span class="section-num">1</span> æŠ€å·§</h2>
<p>å¯¹äºä½¿ç”¨org-mode æ ¼å¼çš„æ–‡æœ¬ï¼Œä¾‹å¦‚Emacså®˜æ–¹<a href="https://git.savannah.gnu.org/cgit/emacs.git/plain/admin/notes/tree-sitter/starter-guide?h=feature/tree-sitter"> tree-sitter çš„ä½¿ç”¨æ•™ç¨‹</a></p>
<p>åœ¨çº¿é˜…è¯»ä¸æ˜¯å¾ˆæ˜“è¯»ï¼Œç›¸å½“äºäººè„‘è§£æ <code>org-mode</code>. æˆ‘çš„ä¸ªäººä¹ æƒ¯æ˜¯ä½¿ç”¨ <code>eww</code> æµè§ˆå™¨æ¥é˜…è¯»:</p>

<figure><a href="/ox-hugo/tree-sitter-doc.png">
    
    
    <input type="checkbox" id="zoomCheck-e30a7" hidden>
    <label for="zoomCheck-e30a7">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/tree-sitter-doc.png"/> 
    
    
    </label></a>
</figure>

<ol>
<li>å¤åˆ¶ç½‘é¡µé“¾æ¥</li>
<li>ä½¿ç”¨ <code>eww</code> æ‰“å¼€é“¾æ¥</li>
<li><code>major-mode</code> åˆ‡æ¢åˆ° <code>org-mode</code>, å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨ Emacs æ¥é˜…è¯» <code>org-mode</code> æ–‡æœ¬.</li>
</ol>

<figure><a href="/ox-hugo/eww.gif">
    
    
    <input type="checkbox" id="zoomCheck-f22f6" hidden>
    <label for="zoomCheck-f22f6">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/eww.gif"/> 
    
    
    </label></a>
</figure>

<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Emacs æŠ€å·§åˆ†äº«ï¼šdired-mode æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å</title>
      <link>https://ramsayleung.github.io/zh/post/2023/%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_dired%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D/</link>
      <pubDate>Sat, 04 Mar 2023 21:34:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2023/%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB_dired%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D/</guid>
      <description>&lt;h2 id=&#34;æŠ€å·§&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; æŠ€å·§&lt;/h2&gt;
&lt;p&gt;åˆ†äº«ä¸€ä¸‹å¹³æ—¶ä½¿ç”¨ &lt;code&gt;dired-mode&lt;/code&gt; æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åçš„æŠ€å·§:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;C-x C-f&lt;/code&gt; æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ï¼Œè¿›å…¥ &lt;code&gt;dired-mode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-x C-q&lt;/code&gt; &lt;code&gt;dired-toggle-read-only&lt;/code&gt;: Edit Dired buffer with Wdired.&lt;/li&gt;
&lt;li&gt;æ‰¹é‡ä¿®æ”¹ï¼Œæ‰‹æ®µæœ‰
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;query-replace&lt;/code&gt; æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;rectangle-command&lt;/code&gt;: &lt;code&gt;C-x r t&lt;/code&gt; &lt;code&gt;string-rectangle&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C-c C-c&lt;/code&gt; æäº¤ä¿®æ”¹æˆ– &lt;code&gt;C-c C-k&lt;/code&gt; æ”¾å¼ƒä¿®æ”¹&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;&lt;a href=&#34;https://ramsayleung.github.io/ox-hugo/dired_rename_multi_files.gif&#34;&gt;
    
    
    &lt;input type=&#34;checkbox&#34; id=&#34;zoomCheck-3d34b&#34; hidden&gt;
    &lt;label for=&#34;zoomCheck-3d34b&#34;&gt;
    
    
    &lt;img class=&#34;zoomCheck&#34; loading=&#34;lazy&#34; src=&#34;~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files.gif&#34;
         alt=&#34;Figure 1: ä½¿ç”¨ rectangle-command è¿›è¡Œæ‰¹é‡ä¿®æ”¹&#34;/&gt; 
    
    
    &lt;/label&gt;&lt;/a&gt;&lt;figcaption&gt;
            &lt;p&gt;&lt;span class=&#34;figure-number&#34;&gt;Figure 1: &lt;/span&gt;ä½¿ç”¨ &lt;code&gt;rectangle-command&lt;/code&gt; è¿›è¡Œæ‰¹é‡ä¿®æ”¹&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="æŠ€å·§"><span class="section-num">1</span> æŠ€å·§</h2>
<p>åˆ†äº«ä¸€ä¸‹å¹³æ—¶ä½¿ç”¨ <code>dired-mode</code> æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åçš„æŠ€å·§:</p>
<ol>
<li><code>C-x C-f</code> æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ï¼Œè¿›å…¥ <code>dired-mode</code></li>
<li><code>C-x C-q</code> <code>dired-toggle-read-only</code>: Edit Dired buffer with Wdired.</li>
<li>æ‰¹é‡ä¿®æ”¹ï¼Œæ‰‹æ®µæœ‰
<ul>
<li>ä½¿ç”¨ <code>query-replace</code> æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å</li>
<li>ä½¿ç”¨evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼</li>
<li>ä½¿ç”¨ <code>rectangle-command</code>: <code>C-x r t</code> <code>string-rectangle</code></li>
</ul>
</li>
<li><code>C-c C-c</code> æäº¤ä¿®æ”¹æˆ– <code>C-c C-k</code> æ”¾å¼ƒä¿®æ”¹</li>
</ol>

<figure><a href="/ox-hugo/dired_rename_multi_files.gif">
    
    
    <input type="checkbox" id="zoomCheck-3d34b" hidden>
    <label for="zoomCheck-3d34b">
    
    
    <img class="zoomCheck" loading="lazy" src="~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files.gif"
         alt="Figure 1: ä½¿ç”¨ rectangle-command è¿›è¡Œæ‰¹é‡ä¿®æ”¹"/> 
    
    
    </label></a><figcaption>
            <p><span class="figure-number">Figure 1: </span>ä½¿ç”¨ <code>rectangle-command</code> è¿›è¡Œæ‰¹é‡ä¿®æ”¹</p>
        </figcaption>
</figure>


<figure><a href="/ox-hugo/dired_rename_multi_files_2.gif">
    
    
    <input type="checkbox" id="zoomCheck-135a4" hidden>
    <label for="zoomCheck-135a4">
    
    
    <img class="zoomCheck" loading="lazy" src="~/btsync/org/blog/2023/%e6%8a%80%e5%b7%a7%e5%88%86%e4%ba%ab-dired%e6%89%b9%e9%87%8f%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%90%8d/img/dired_rename_multi_files_2.gif"
         alt="Figure 2: ä½¿ç”¨ evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼è¿›è¡Œæ‰¹é‡ä¿®æ”¹"/> 
    
    
    </label></a><figcaption>
            <p><span class="figure-number">Figure 2: </span>ä½¿ç”¨ evilçš„å¤šè¡Œç¼–è¾‘æ¨¡å¼è¿›è¡Œæ‰¹é‡ä¿®æ”¹</p>
        </figcaption>
</figure>

<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Eshellå®ç°fzfçš„å†å²å‘½ä»¤æœç´¢åŠŸèƒ½</title>
      <link>https://ramsayleung.github.io/zh/post/2017/search_eshell_history_like_fzf/</link>
      <pubDate>Sun, 17 Dec 2017 15:46:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/search_eshell_history_like_fzf/</guid>
      <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç›®æ ‡: åœ¨=Eshell=ä¸­åƒåœ¨bash/zshä¸­ä½¿ç”¨=fzf=é‚£èˆ¬æœç´¢å†å²å‘½ä»¤&lt;/p&gt;
&lt;h2 id=&#34;fzf&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; fzf&lt;/h2&gt;
&lt;p&gt;æˆ‘çš„ä¸»åŠ›Shell æ˜¯Eshell, ä½†æ˜¯å¹³æ—¶æˆ‘ä¹Ÿä¼šç”¨Zsh, è€Œ&lt;a href=&#34;https://github.com/junegunn/fzf&#34;&gt;fzf&lt;/a&gt; æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº†=fzf=æœç´¢å†å²å‘½ä»¤:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><span class="section-num">1</span> å‰è¨€</h2>
<p>ç›®æ ‡: åœ¨=Eshell=ä¸­åƒåœ¨bash/zshä¸­ä½¿ç”¨=fzf=é‚£èˆ¬æœç´¢å†å²å‘½ä»¤</p>
<h2 id="fzf"><span class="section-num">2</span> fzf</h2>
<p>æˆ‘çš„ä¸»åŠ›Shell æ˜¯Eshell, ä½†æ˜¯å¹³æ—¶æˆ‘ä¹Ÿä¼šç”¨Zsh, è€Œ<a href="https://github.com/junegunn/fzf">fzf</a> æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº†=fzf=æœç´¢å†å²å‘½ä»¤:</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-ae06a" hidden>
    <label for="zoomCheck-ae06a">
    
    
    <img class="zoomCheck" loading="lazy" src="https://i.imgur.com/pPMxauw.gif"
         alt="Figure 1: fzf"/> 
    
    
    </label><figcaption>
            <p><span class="figure-number">Figure 1: </span>fzf</p>
        </figcaption>
</figure>

<h2 id="eshell"><span class="section-num">3</span> Eshell</h2>
<p>æˆ‘æ—¥å¸¸çš„æ“ä½œåŸºæœ¬éƒ½æ˜¯åœ¨ Eshell ä¸Šé¢è¿›è¡Œçš„ï¼Œä¸è¿‡ Eshell æ˜¯æ²¡åŠæ³•ç›´æ¥åƒ Bash é‚£æ ·è°ƒç”¨ =fzf=æ¥æŸ¥æ‰¾å‘½ä»¤å†å²çš„ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›æŠŠè¿™ä¸ªåŠŸèƒ½è¿ç§»åˆ°åˆ°Eshell ä¸Šé¢æ¥ã€‚</p>
<p>æˆ‘åœ¨ Emacs ä½¿ç”¨çš„è¡¥å…¨æ¡†æ¶æ˜¯ <code>Ivy/Counsel</code>,å®ƒæœ‰ä¸€ä¸ª <code>counsel-esh-history=çš„å‘½ä»¤å¯ä»¥ä½¿ç”¨ =Ivy</code> æ¥æœç´¢å‘½ä»¤ï¼Œä½†æ˜¯æ²¡åŠæ³•ä½¿ç”¨ç”¨æˆ·å·²ç»è¾“å…¥çš„å†…å®¹æ¥è¿‡æ»¤å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨è‡ªå·±æŠ˜è…¾äº†ä¸€ä¸ª</p>
<p><code>counsel-esh-history</code> å‘½ä»¤ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-a5648" hidden>
    <label for="zoomCheck-a5648">
    
    
    <img class="zoomCheck" loading="lazy" src="https://i.imgur.com/3tvGDzW.gif"
         alt="Figure 2: æ„Ÿè§‰å¾ˆä¸é”™å˜› :)"/> 
    
    
    </label><figcaption>
            <p><span class="figure-number">Figure 2: </span>æ„Ÿè§‰å¾ˆä¸é”™å˜› :)</p>
        </figcaption>
</figure>

<h2 id="æºä»£ç "><span class="section-num">4</span> æºä»£ç </h2>
<p>å¾—ç›Šäº =Ivy=å¼ºå¤§çš„å†…ç½®å‡½æ•°, åŠŸèƒ½å®ç°èµ·æ¥ç›¸å½“ä¾¿åˆ©ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lisp" data-lang="lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">samray/esh-history</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Interactive search eshell history.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;em-hist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">save-excursion</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">start-pos</span> <span class="p">(</span><span class="nv">eshell-bol</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">end-pos</span> <span class="p">(</span><span class="nv">point-at-eol</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">           <span class="p">(</span><span class="nv">input</span> <span class="p">(</span><span class="nv">buffer-substring-no-properties</span> <span class="nv">start-pos</span> <span class="nv">end-pos</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">command</span> <span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&#34;Command: &#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="p">(</span><span class="nv">delete-dups</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">&gt;</span> <span class="p">(</span><span class="nv">ring-size</span> <span class="nv">eshell-history-ring</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                                   <span class="p">(</span><span class="nv">ring-elements</span> <span class="nv">eshell-history-ring</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                                <span class="ss">:preselect</span> <span class="nv">input</span>
</span></span><span class="line"><span class="cl">                                <span class="ss">:action</span> <span class="nf">#&#39;</span><span class="nv">ivy-completion-in-region-action</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="nv">cursor-move</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">command</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">kill-region</span> <span class="p">(</span><span class="nf">+</span> <span class="nv">start-pos</span> <span class="nv">cursor-move</span><span class="p">)</span> <span class="p">(</span><span class="nf">+</span> <span class="nv">end-pos</span> <span class="nv">cursor-move</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; move cursor to eol</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">end-of-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç ä¸æ˜¯å¾ˆå¤æ‚, ä¸»è¦åŠŸèƒ½æ˜¯è·å–ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤, ç„¶åæŠŠæ‰€æœ‰çš„å†å²å‘½ä»¤è¯»å–å‡ºæ¥,æœ€åä½¿ç”¨=ivy-read=å†…ç½®çš„=ivy-completion-in-region-action=åŠŸèƒ½, ç”¨ç”¨æˆ·çš„è¾“å…¥çš„å‘½ä»¤ä¸å†å²å‘½ä»¤è¿›è¡ŒåŒ¹é…, ç”±ç”¨æˆ·é€‰æ‹©æœ€ç»ˆçš„å‘½ä»¤.</p>
<p>=ivy-read=æ˜¯Emacså†…ç½®=completing-read=çš„å‡½æ•°çš„å¼ºåŒ–, å…³äº=ivy-read=å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒæ–‡æ¡£<a href="https://oremacs.com/swiper/#getting-started">ivy-read</a>.</p>
<h2 id="æ€»ç»“"><span class="section-num">5</span> æ€»ç»“</h2>
<p>æœ€å, æˆ‘ä¹Ÿé¡ºä¾¿æŠŠä»£ç åˆ†äº«åˆ° <a href="https://www.reddit.com/r/emacs/comments/7k54px/snippet_share_make_eshell_search_command_history/">Emacsç¤¾åŒº</a>, è€Œ <a href="https://github.com/manateelazycat">manateelazycat</a>ä¹ŸæŠŠè¿™æ®µä»£ç çš„åŠŸèƒ½åŠ å…¥åˆ°<a href="https://github.com/manateelazycat/aweshell/commit/ecaddac98b87f881910dbee8b51a98f00b6d9d5d">aweshell</a>, Oh yeah !</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Eshellæç¤ºç¬¦ä¼˜åŒ–</title>
      <link>https://ramsayleung.github.io/zh/post/2017/tweak_eshell_prompt/</link>
      <pubDate>Wed, 07 Jun 2017 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/tweak_eshell_prompt/</guid>
      <description>Tweak with Emacs shell prompt</description>
      <content:encoded><![CDATA[<h2 id="å‘ç°å¸…æ°”çš„æç¤ºç¬¦"><span class="section-num">1</span> å‘ç°å¸…æ°”çš„æç¤ºç¬¦</h2>
<p>è¿‘æ—¥ï¼Œæˆ‘åœ¨æµè§ˆ <a href="https://www.reddit.com/r/emacs/comments/6f0rkz/my_fancy_eshell_prompt/">Reddit</a> çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä½ Emacs ç”¨æˆ·æŠŠä»–çš„ Eshell æç¤ºç¬¦ä¿®æ”¹å¾—å¾ˆå¸…ï¼Œå¦‚å›¾ï¼š</p>
<p><a href="/ox-hugo/eshell_prompt.png"><img loading="lazy" src="/ox-hugo/eshell_prompt.png"></a>
æœ¬ç€æ‹¿æ¥ä¸»ä¹‰çš„æƒ³æ³•ï¼Œæˆ‘å°±ç›´æ¥æŠŠè¿™ä½å°å“¥çš„ä»£ç æ·»åŠ åˆ°äº†æˆ‘çš„é…ç½®æ–‡ä»¶é‡Œé¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-function</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">user-login-name</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;red&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">system-name</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;blue&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%H:%M&#34;</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;yellow&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;white&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;]\n&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="s">&#34;â””â”€&gt;&#34;</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34; # &#34;</span> <span class="s">&#34; $ &#34;</span><span class="p">)</span> <span class="ss">&#39;face</span> <span class="o">`</span><span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ•ˆæœè‡ªç„¶æ˜¯å¾ˆ sexy.</p>
<h2 id="ä¸åŸæœ‰æç¤ºç¬¦å†²çª"><span class="section-num">2</span> ä¸åŸæœ‰æç¤ºç¬¦å†²çª</h2>
<p>ä½†æ˜¯æˆ‘åŸæ¥ä½¿ç”¨çš„ <a href="https://github.com/kaihaosw/eshell-prompt-extras">eshell-prompt-extra</a> çš„æ•ˆæœå°±è¢«è¦†ç›–äº†ã€‚è€Œ <code>eshell_prompt_extra</code> å¯ä»¥æä¾›çš„é¢å¤–ä¿¡æ¯éå¸¸å¤šï¼ŒåŒ…æ‹¬ï¼šgit, python virtualenv, ä»¥åŠè¿œç¨‹ç™»å½•æ—¶çš„ä¸»æœºä¿¡æ¯ï¼Œå¦‚å›¾ï¼š</p>

<figure><a href="/ox-hugo/eshell_extra_prompt.png">
    
    
    <input type="checkbox" id="zoomCheck-0fac0" hidden>
    <label for="zoomCheck-0fac0">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/eshell_extra_prompt.png"/> 
    
    
    </label></a>
</figure>

<p>å¦‚æœç”¨ä¸Šè¿™ä¸ª sexy çš„æç¤ºç¬¦ï¼Œeshell-extra-prompt çš„é¢å¤–çš„ä¿¡æ¯å°±ä¸èƒ½æ˜¾ç¤ºï¼Œæ„Ÿè§‰å¥½äº:(</p>
<p>é±¼å’Œç†ŠæŒæˆ‘éƒ½æƒ³è¦ï¼Œä¼¼ä¹å¤ªè´ªå¿ƒäº†ï¼Ÿæ€ä¹ˆåŠï¼Œè‡ªå·±å»ä¿®æ”¹ <code>eshell_prompt_extra</code> çš„<a href="https://github.com/kaihaosw/eshell-prompt-extras/blob/master/eshell-prompt-extras.el">æºç </a> :).</p>
<h2 id="æŠ˜è…¾æºç "><span class="section-num">3</span> æŠ˜è…¾æºç </h2>
<p><code>eshell_prompt_extra</code> è¿™ä¸ªåŒ…æ³¨é‡ŠåŠ ä¸Šå…¨éƒ¨ä»£ç ä¹Ÿåªæ˜¯ 400 è¡Œï¼Œä»£ç ä¹Ÿå†™å¾—å¾ˆæ¸…æ™°. å…¶ä¸­å¤§éƒ¨ä»½æ˜¯è¾…åŠ©å‡½æ•°ï¼Œè€Œ Eshell çš„æç¤ºç¬¦æ•ˆæœæ˜¯é€šè¿‡ä¸¤ä¸ª eshell-theme å‡½æ•°æ¥å®ç°çš„ã€‚use-package çš„é…ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell-prompt-extras</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:load-path</span> <span class="s">&#34;~/Code/github/eshell-prompt-extras&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="s">&#34;esh-opt&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nb">use-package</span> <span class="nv">virtualenvwrapper</span> <span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nv">venv-initialize-eshell</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;epe-theme-lambda</span> <span class="s">&#34;eshell-prompt-extras&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-highlight-prompt</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">eshell-prompt-function</span> <span class="ss">&#39;epe-theme-lambda</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€Œ <code>epe-theme-lambda</code> çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">epe-theme-lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;A eshell-prompt lambda theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-regexp</span> <span class="s">&#34;^[^#\nÎ»]*[#Î»] &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-remote-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-remote-user</span><span class="p">)</span> <span class="s">&#34;@&#34;</span> <span class="p">(</span><span class="nv">epe-remote-host</span><span class="p">)</span> <span class="s">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="ss">&#39;epe-remote-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="nv">epe-show-python-info</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;epe-venv-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">epe-venv-p</span><span class="p">)</span> <span class="nv">venv-current-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;(&#34;</span> <span class="nv">venv-current-name</span> <span class="s">&#34;) &#34;</span><span class="p">)</span> <span class="ss">&#39;epe-venv-face</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">f</span> <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;fish</span><span class="p">)</span> <span class="ss">&#39;epe-fish-path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;single</span><span class="p">)</span> <span class="ss">&#39;epe-abbrev-dir-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  <span class="p">((</span><span class="nf">eq</span> <span class="nv">epe-path-style</span> <span class="ss">&#39;full</span><span class="p">)</span> <span class="ss">&#39;abbreviate-file-name</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">funcall</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;epe-dir-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-git-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;:&#34;</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-git-branch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-dirty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-untracked</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">unpushed</span> <span class="p">(</span><span class="nv">epe-git-unpushed-number</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="nv">unpushed</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:&#34;</span> <span class="p">(</span><span class="nf">number-to-string</span> <span class="nv">unpushed</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">       <span class="ss">&#39;epe-git-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34; Î»&#34;</span> <span class="ss">&#39;epe-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34;#&#34;</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="ss">&#39;epe-sudo-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34; &#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»£ç ä¸»è¦é€»è¾‘æ˜¯è°ƒç”¨ä¹‹å‰å®šä¹‰çš„è¾…åŠ©å‡½æ•°ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ˜¾ç¤º git, python, è¿œç¨‹ä¸»æœºç­‰ä¿¡æ¯ï¼Œç„¶åå¯¹ç›¸åº”çš„æç¤ºç¬¦è¿›è¡Œæ‹¼æ¥ã€‚</p>
<p>è€Œå…¶ä¸­å‡ºç°å¾—æ¯”è¾ƒé¢‘ç¹çš„ <code>epe-colorize-with-face</code> å°±æ˜¯ä½œè€…å®šä¹‰çš„ä¸€ä¸ªå®(macro), ç”¨æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ä»¥åŠå¯¹åº”çš„ face(å…¶å®å°±æ˜¯ä¸åŒçš„é¢œè‰²å•¦). çœ‹æ‡‚äº†ä»£ç å°±å¥½åŠäº†ï¼Œç°åœ¨å°±å¯ä»¥è‡ªå·±æ·»åŠ ä¸€ä¸ª Eshell ä¸»é¢˜ã€‚</p>
<h3 id="å®šä¹‰æ‰€éœ€çš„-face"><span class="section-num">3.1</span> å®šä¹‰æ‰€éœ€çš„ face</h3>
<p>å› ä¸ºæˆ‘éœ€è¦æ˜¾ç¤ºçš„ face(é¢œè‰²), <code>eshell-extra-prompt</code> å¹¶æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥å°±åªå¥½è‡ªå·±åŠ¨æ‰‹å•¦ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-delimiter-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;green&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for pipeline theme delimiter.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-user-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;red&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for user in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-host-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;blue&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for host in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defface</span> <span class="nv">epe-pipeline-time-face</span>
</span></span><span class="line"><span class="cl">  <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span> <span class="nb">:foreground</span> <span class="s">&#34;yellow&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Face for time in pipeline theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:group</span> <span class="ss">&#39;epe</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå°±æ˜¯æŒ‰ç€åŸæœ‰çš„ Eshell æç¤ºç¬¦æ¥ç»„è£…ä¸€ä¸ªæ–°çš„ Eshell ä¸»é¢˜äº†ï¼Œç„¶åæŠŠè¿™ä¸ªä¸»é¢˜å®šä¹‰æˆ pipeline (å…¶å®æ˜¯æˆ‘è‡ªå·±ä¹Ÿæ²¡æƒ³å‡ºæ¯”è¾ƒæ–°é¢–çš„åå­—å•¦):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-elisp" data-lang="elisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">epe-theme-pipeline</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;A eshell-prompt theme with full path, smiliar to oh-my-zsh theme.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-prompt-regexp</span> <span class="s">&#34;^[^#\nÎ»]* Î»[#]* &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">epe-remote-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nv">epe-remote-user</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-user-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nv">epe-remote-host</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-host-face</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â”Œâ”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">user-login-name</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-user-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;@&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">system-name</span><span class="p">)</span> <span class="ss">&#39;epe-pipeline-host-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">     <span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%H:%M&#34;</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                            <span class="ss">&#39;epe-pipeline-time-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;]â”€â”€[&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">eshell/pwd</span><span class="p">))</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span>  <span class="s">&#34;]\n&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;â””â”€&gt;&#34;</span> <span class="ss">&#39;epe-pipeline-delimiter-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="nv">epe-show-python-info</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;epe-venv-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">epe-venv-p</span><span class="p">)</span> <span class="nv">venv-current-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;(&#34;</span> <span class="nv">venv-current-name</span> <span class="s">&#34;) &#34;</span><span class="p">)</span> <span class="ss">&#39;epe-venv-face</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">epe-git-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34;:&#34;</span> <span class="ss">&#39;epe-dir-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nv">epe-colorize-with-face</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">epe-git-branch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-dirty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nv">epe-git-untracked</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">unpushed</span> <span class="p">(</span><span class="nv">epe-git-unpushed-number</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="nv">unpushed</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                   <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:&#34;</span> <span class="p">(</span><span class="nf">number-to-string</span> <span class="nv">unpushed</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">       <span class="ss">&#39;epe-git-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="s">&#34; Î»&#34;</span> <span class="ss">&#39;epe-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nv">epe-colorize-with-face</span> <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">user-uid</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&#34;#&#34;</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                           <span class="ss">&#39;epe-sudo-symbol-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34; &#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ€»ç»“"><span class="section-num">4</span> æ€»ç»“</h2>
<p>è¿™æ ·ä¸€ä¸ªæ–°çš„ Eshell ä¸»é¢˜å°±å®Œå·¥äº†ï¼Œç„¶åæˆ‘ç»™ <code>eshell-extra-prompt</code> å‘äº†ä¸€ä¸ª<a href="https://github.com/kaihaosw/eshell-prompt-extras/pull/16">Pull Request</a>, æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p>

<figure><a href="/ox-hugo/epe.png">
    
    
    <input type="checkbox" id="zoomCheck-45cf5" hidden>
    <label for="zoomCheck-45cf5">
    
    
    <img class="zoomCheck" loading="lazy" src="/ox-hugo/epe.png"/> 
    
    
    </label></a>
</figure>

<p>Enjoy Emacs, Enjor Tweaking :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>(ç¿»è¯‘)ä»Helmåˆ°Ivy</title>
      <link>https://ramsayleung.github.io/zh/post/2017/from-helm-to-ivy/</link>
      <pubDate>Sun, 05 Mar 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/from-helm-to-ivy/</guid>
      <description>An Translated Post about switch from helm to ivy</description>
      <content:encoded><![CDATA[<p>æœ€è¿‘ï¼Œæˆ‘å‘ç°å¾ˆå¤šEmacs ç”¨æˆ·å¯¹Ivy å¾ˆæ„Ÿå…´è¶£ï¼›è€Œä¸”å¤§éƒ¨ä»½ç”¨æˆ·éƒ½æ˜¯å·²ç»äº†è§£è¿‡Helm æˆ–è€…Idoçš„
å½“æœ‰äººåœ¨Reddit ä¸Šé¢é—® <a href="https://www.reddit.com/r/emacs/comments/51lqn9/helm_or_ivy/">é€‰æ‹©Helm è¿˜æ˜¯Ido</a>è¿™ç±»é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—æˆ‘ä¼šç»™å‡ºæˆ‘è‡ªå·±çš„é€‰æ‹©ï¼š
<strong>Ivy</strong>,å³ä½¿æˆ‘æ˜¯ä¸€ä¸ªå‰Helm çš„ç‹‚çƒ­ç”¨æˆ·
<img loading="lazy" src="http://www.feer-mcqueen.com/blog/wp-content/uploads/2015/11/miimalism-vs.-maximilasim-700x334.jpg">
<em>æœ€å¤§æˆ–è€…æœ€å°</em></p>
<p><strong>Helm å’ŒIvy éƒ½æ˜¯è¡¥å…¨æ¡†æ¶</strong>.è¿™æ„å‘³ç€å®ƒä»¬éƒ½æ˜¯Emacsç”Ÿæ€ç³»ç»Ÿä¸­ç”¨æ¥åœ¨ç”¨æˆ·è¾“å…¥åç¼©çª„å¯ä¾›é€‰æ‹©é€‰é¡¹çš„èŒƒå›´çš„å·¥å…·ã€‚
å¾ˆè‡ªç„¶è€Œç„¶æƒ³èµ·çš„é€šç”¨ä¾‹å­å°±æ˜¯æœç´¢æ–‡ä»¶ã€‚Helm å’ŒIvy éƒ½å¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæœç´¢æ–‡ä»¶</p>
<p>å®ƒä»¬ä¸¤è€…éƒ½æ˜¯æ¡†æ¶ï¼Œè¿™æ„å‘³ç€å®ƒä»¬éƒ½å¯ä»¥ç”¨åœ¨é‚£äº›éœ€è¦è¡¥å…¨æˆ–è€…ç¼©çª„èŒƒå›´çš„å¤æ‚å‘½ä»¤ã€‚</p>
<p>ä¾‹å¦‚Helm æœ‰ä¸€ä¸ªå‘½ä»¤(<strong>helm-google-suggest</strong>)å¯ä»¥æ¨¡æ‹ŸGoole çš„æœç´¢æ¡†ï¼Œå¹¶åœ¨ä½ è¾“å…¥æ—¶ç»™å‡ºç›¸åº”çš„google æç¤º</p>
<p>Ivy å’ŒHelm éƒ½æœ‰ç›¸åŒçš„ç›®æ ‡ï¼Œä½†æ˜¯å®ƒä»¬å®ç°çš„æ–¹æ³•å´æ˜¯è¿¥ç„¶ä¸åŒ</p>
<p>ç°åœ¨æˆ‘æƒ³ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ä¸ªå·¥å…·ã€‚æˆ‘è¿™é‡ŒæŒ‡çš„ç”¨æˆ·è§‚ç‚¹æ˜¯æˆ‘åœ¨ä¸éœ€è¦äº†è§£Helm å’ŒIvy çš„å†…éƒ¨å·¥ä½œåŸç†çš„å‰æä¸‹å¯¹è¿™ä¸¤ä¸ªå·¥å…·è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p>å…¶å®ï¼Œå› ä¸ºæˆ‘å¯¹ *elisp*è¿˜è°ˆä¸ä¸Šç²¾é€šï¼Œæ‰€ä»¥ä¹Ÿæ²¡åŠæ³•å°±ä¸¤è€…å®ç°ç»†èŠ‚æ¥è¿›è¡Œæ¯”è¾ƒã€‚ä½†æ˜¯è¿™ä¸¤ä¸ªå·¥å…·æˆ‘éƒ½ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ä»ç”¨æˆ·çš„è§’åº¦ï¼Œè·Ÿä½ åˆ†äº«æˆ‘ä½¿ç”¨å®ƒä»¬çš„ä¸åŒæ„Ÿå—ã€‚æœ€åï¼Œæˆ‘ä»Helm åˆ‡æ¢åˆ°äº†Ivy</p>
<p>æˆ‘æƒ³å…ˆè°ˆHelm.å½“æˆ‘ä½¿ç”¨Spacemacs çš„æ—¶å€™ï¼Œæˆ‘å­¦ä¼šäº†æ€ä¹ˆä½¿ç”¨Helm,ä»¥Helm çš„æ–¹å¼æ€è€ƒ, å¦‚ä½•è‡ªå®šä¹‰Helm,æ€ä¹ˆæŠŠHelm é…ç½®å¾—ç§°å¿ƒå¦‚æ„ã€‚</p>
<p>æˆ‘æƒ³æˆ‘åº”è¯¥ç®—å¾—ä¸Šæ˜¯ä¸€ä¸ªä¸­çº§çš„Helm ç”¨æˆ·å§ã€‚æˆ‘æœ‰è¯»è¿‡<a href="http://tuhdo.github.io/helm-intro.html">è¿™ç¯‡æ–‡ç« </a> è¿˜æœ‰<a href="http://tuhdo.github.io/helm-projectile.html">è¿™ç¯‡æ–‡ç« </a> ä»¥åŠ<a href="https://github.com/emacs-helm/helm/wiki">Wiki</a> æ­¤å¤–ï¼Œåœ¨é•¿è¾¾ä¸€å¹´çš„æ—¶é—´é‡Œï¼Œæˆ‘æ¯å¤©éƒ½æ˜¯ä½¿ç”¨Helmçš„</p>
<p><strong>Helm æ˜¯ä¸€ä¸ªéå¸¸æˆç†Ÿçš„å·¥å…·</strong>.æ ¹æ®git çš„æäº¤å†å²ï¼ŒHelm çš„å¼€å‘å·¥ä½œæ˜¯åœ¨2009å¹´å·¦å³å¼€å§‹çš„ã€‚
åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒHelm å®˜æ–¹çš„git ä»“åº“æœ‰è¶…è¿‡26000è¡Œelisp ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://github.com/emacs-helm/helm.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> helm
</span></span><span class="line"><span class="cl">cat *.el <span class="p">|</span> wc -l
</span></span><span class="line"><span class="cl"><span class="c1"># =&gt; 26431</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™è¿˜æ˜¯æ²¡æœ‰æŠŠåœ¨MELPA ä¸ŠæŸ¥è¯¢åˆ°è·ŸHelm æœ‰å…³çš„åŒ…æœ‰142ä¸ªçš„æƒ…å†µè€ƒè™‘åœ¨å†…çš„å‘¢ã€‚</p>
<p>ä½ å¯ä»¥ç”¨Helmæ¥å®Œæˆä»»ä½•äº‹æƒ…å®ƒä¸»è¦çš„å¼ºå¤§ä¹‹å¤„åœ¨äºä½ å¯ä»¥æŠŠHelm å’Œå¾ˆå¤šEmacs çš„è¡Œä¸ºæ•´åˆåœ¨ä¸€èµ·ã€‚ä½ å¯ä»¥ä»¥Helm ä¸ºä¸­å¿ƒæ„é€ æ¥å£ï¼Œå°±åƒSpacemacs åšçš„é‚£æ ·ã€‚Helm æ”¯æŒéå¸¸ä¸€è‡´çš„æ¥å£ï¼Œä½ å¯ä»¥é€šè¿‡Helm æ¥åšä»»ä½•äº‹</p>
<p>ä½ å¯ä»¥æœç´¢æ–‡ä»¶ï¼Œæœç´¢ç¼“å†²åŒºï¼Œæœç´¢é¢œè‰²ï¼Œæœç´¢é¡¹ç›®ï¼Œæœç´¢ä½ æœ€è¿‘ç¼–è¾‘è¿‡çš„æ–‡ä»¶ï¼Œæœç´¢ç³»ç»Ÿè¿›ç¨‹, æœç´¢éŸ³ä¹ï¼Œæœç´¢ç½‘ç»œèµ„æºï¼Œæœç´¢è¡¥å…¨ï¼Œæœç´¢ä»£ç ç‰‡æ®µï¼Œæœç´¢æ­£åˆ™è¡¨è¾¾å¼ï¼Œæœç´¢å‘½ä»¤ï¼Œæ–‡æ¡£
ç›¸å…³æè¿°ï¼Œæ‰‹å†Œ&hellip;.</p>
<p>ä½ å¯ä»¥ç”¨Helm-projectile(ä¸€ä¸ªHelm å¯¹projectile éå¸¸å¥½çš„åŒ…è£…)æ¥ç®¡ç†ä½ çš„é¡¹ç›®ã€‚ä½ å¯ä»¥ç”¨<a href="https://www.gitignore.io/">gitignore.io</a>æ¥ç”Ÿæˆgitignoreæ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨Helm-bibtexæ¥ç®¡ç†ä½ çš„å‚è€ƒä¹¦ç›®ï¼Œä½ å¯ä»¥æµè§ˆä½ çš„ç«ç‹ä¹¦ç­¾</p>
<p>ä½ å¯ä»¥ç”¨Helm æ¥å®Œæˆä»»ä½•äº‹ã€‚</p>
<p>åŸºäº <strong>tuhdo</strong> å¯¹æˆ‘åœ¨<a href="https://www.reddit.com/r/emacs/comments/52lnad/from_helm_to_ivy_a_user_perspective/d7lypeu/">Reddit</a> ä¸Šé¢é—®é¢˜çš„å›å¤ï¼Œæˆ‘æƒ³æŒ‡å‡ºçš„ä¸€ä¸ªç‰¹æ€§å°±æ˜¯Helm æ˜¯ä¸ä½¿ç”¨ <em>minibuffer</em>,ä½†æ˜¯Ivy æ˜¯ä½¿ç”¨çš„ã€‚</p>
<p>æ‰€ä»¥å®ƒå¯ä»¥è¢«é…ç½®æˆæ€»æ˜¯åœ¨å½“å‰æ‰“å¼€çš„çª—å£å±•ç¤ºã€‚å¯¹äºé‚£äº›å¤§å±å¹•æ˜¾ç¤ºå™¨çš„ç”¨æˆ·è€Œè¨€ï¼Œè¿™ä¸ªç‰¹æ€§çœŸçš„éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºä½ çš„ç›®å…‰ä¸ç”¨åœ¨ <em>minibuffer</em> æ¥å›åˆ‡æ¢ï¼š</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-2b760" hidden>
    <label for="zoomCheck-2b760">
    
    
    <img class="zoomCheck" loading="lazy" src="http://i.imgur.com/g1Oz9JY.png"
         alt="Figure 1: è¡¥å…¨ç»“æœæ€»æ˜¯æ˜¾ç¤ºåœ¨åŒä¸€ä¸ªçª—å£"/> 
    
    
    </label><figcaption>
            <p><span class="figure-number">Figure 1: </span>è¡¥å…¨ç»“æœæ€»æ˜¯æ˜¾ç¤ºåœ¨åŒä¸€ä¸ªçª—å£</p>
        </figcaption>
</figure>

<p>æœ€ç»ˆçš„æ¯”è¾ƒç»“æœæ˜¯Helm æ˜¯éå¸¸ä¾¿åˆ©çš„å·¥å…·ï¼Œç›¸ä¿¡ä¼šæœ‰æ•°é‡éå¸¸å¤šçš„Spacemacs ç”¨æˆ·å‘Šè¯‰ä½ åŒæ ·çš„çœ‹æ³•ã€‚</p>
<p>è€ŒHelm ä¸»è¦çš„ç¼ºç‚¹å°±æ˜¯å®ƒçš„ä»£ç é‡å¤ªå¤§äº†ã€‚æˆ‘æƒ³è™½ç„¶Helm çš„ä»£ç é‡å¾ˆå¤§ï¼Œä½†æ˜¯å®ƒçš„å¼€å‘è€…åˆ©ç”¨ <strong>elisp</strong> æˆåŠŸæŠŠå®ƒæ‰“é€ æˆäº†ä¸€ä¸ªç›¸å½“å¿«çš„å·¥å…·äº†</p>
<p>è€Œä¸”æœ‰äº›æ—¶å€™ï¼ŒHelm ä¼¼ä¹æŠŠç®€å•çš„é—®é¢˜å¤æ‚åŒ–äº†;å®ƒé…ç½®èµ·æ¥ä¹Ÿæ„Ÿè§‰ç›¸å½“è‡ƒè‚¿ï¼›æœ‰æ—¶å®ƒä¹Ÿä¼šæœ‰ä¸€äº›å¾ˆå¥‡æ€ªçš„è¡¨ç°ï¼Œç„¶åå¯¼è‡´å¡é¡¿ï¼Œæˆ–è€…è®©Emacs è¿‡è½½ï¼Œå³ä½¿ä½ åšçš„åªæ˜¯å¾ˆç®€å•çš„æŸ¥è¯¢ã€‚</p>
<p>æˆ–è®¸é‚£äº›Helm çš„é«˜æ‰‹ç”¨æˆ·çœ‹åˆ°è¿™é‡Œï¼Œä¼šè§‰å¾—å¦‚æœæˆ‘ä¹Ÿæ˜¯ä¸ª <strong>elisp</strong> é«˜æ‰‹ï¼Œå°±ä¸ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜äº†ã€‚è™½ç„¶æˆ‘å·²ç»ä½¿ç”¨Helm è¶…è¿‡ä¸€å¹´äº†ï¼Œæˆ‘è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°æ–¹æ³•è®©å¯ä»¥Helmæ›´åŠ ç¨³å®šã€‚æˆ‘è§‰å¾—Helm åœ¨ç”¨è‡ªå·±åšä¾‹å­æ¥è®²è¿°äº†ä»€ä¹ˆæ˜¯åŒ–ç®€ä¸ºç¹å§</p>
<p>ä½ å¯ä»¥ç”¨Helm æ¥åšä»»ä½•äº‹ï¼›ä½†äº‹å®ä¸Šä½ å¹¶ä¸éœ€è¦ã€‚ä½ å¯ä»¥è¿™æ ·åšå¹¶ä¸æ„å‘³ç€ä½ åº”è¯¥è¿™æ ·åšã€‚</p>
<p>åœ¨ä½¿ç”¨Helm ä¸€å¹´ä»¥åï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ æˆ‘åªæ˜¯ä½¿ç”¨äº†Helm ä¸‰åˆ†ä¹‹ä¸€æˆ–è€…æ›´å°çš„åŠŸèƒ½ã€‚æœ‰äº›åŠŸèƒ½æˆ‘è§‰å¾—çœŸçš„å¾ˆæ£’ï¼Œæ˜¨å¤©åœ¨è¯»äº†<a href="http://tuhdo.github.io/helm-intro.html">è¿™ç¯‡æ–‡ç« </a> ä¹‹åï¼Œæˆ‘åˆå‘ç°äº†ä¸€äº›æ–°çš„ä¸œè¥¿ã€‚å¤§éƒ¨åˆ†æ—¶é—´ï¼Œæˆ‘éƒ½æ˜¯ä½¿ç”¨ç®€å•çš„å‘½ä»¤æ¥åˆ‡æ¢ç¼“å†²åŒºï¼Œæˆ–è€…åˆ—ä¸¾æ–‡ä»¶</p>
<blockquote>
<p>Helm åªæ˜¯ä¸€ä¸ªç”¨æ¥è¡¥å…¨çš„åŒ…ï¼Œå°±å¥½åƒIdoæˆ–è€…Ivy.å®ƒå¯èƒ½å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä¸€æ—¦æœ‰äººç»å†è¿‡é…ç½®å®ƒçš„å›°éš¾ï¼Œå°±ä¼šå‘ç°å®ƒå¾ˆéš¾åšåˆ°è®©ä½ éšå¿ƒæ‰€æ¬²ã€‚</p>
<p>æœ‰äº›äººè§‰å¾—åªè¦å¯ä»¥è®©ä»–ä»¬ä½¿ç”¨å¥½çš„å·¥å…·ï¼Œå³ä½¿ä»–ä»¬å®Œå…¨ä¸äº†è§£è¿™äº›å·¥å…·ä¹Ÿæ— æ‰€è°“ã€‚</p>
<p>ä½†æ˜¯æˆ‘å°±åšä¸åˆ°</p>
<p>&ndash;abo-abo,Ivy çš„å¼€å‘è€…ï¼Œå›ç­”<a href="https://github.com/abo-abo/swiper/issues/3">&ldquo;ä¸ºä»€ä¹ˆä¸é€‰æ‹©Helm&rdquo;</a> è¿™ä¸ªé—®é¢˜</p></blockquote>
<p><strong>Ivy ä¸ºå®ç°æœ€å°åŒ–ï¼Œç®€å•åŒ–ï¼Œå¯å®šåˆ¶åŒ–ï¼Œå¯å‘ç°åŒ–è€ŒåŠªåŠ›</strong>.è¿™å››ä¸ªå½¢å®¹è¯å‘Šè¯‰æˆ‘ä»¬å¾ˆå¤šHelm
å’ŒIvy è¿™ä¸¤ä¸ªå·¥å…·é—´ä¸åŒçš„è®¾è®¡ç†å¿µã€‚é˜…è¯»<a href="http://oremacs.com/swiper/">Ivyä»‹ç»</a> ä»¥ä¾¿æ›´å¥½äº†è§£Ivyçš„ç†å¿µã€‚</p>
<p>åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒIvy åªæœ‰å¤§æ¦‚3400è¡Œä»£ç ï¼Œä¸ºIvy æ‰€æ‰“é€ çš„ç”Ÿæ€ç³»ç»Ÿï¼šå³Swipter å’Œ
Counsel ä¹Ÿåªæœ‰7500 è¡Œä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://github.com/abo-abo/swiper.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> swiper
</span></span><span class="line"><span class="cl"><span class="c1">## Only ivy ?</span>
</span></span><span class="line"><span class="cl">cat ivy.el <span class="p">|</span> wc -l
</span></span><span class="line"><span class="cl"><span class="c1"># =&gt; 3442</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## count lines of code into the whole swiper ecosystem</span>
</span></span><span class="line"><span class="cl">cat *.el <span class="p">|</span> wc -l
</span></span><span class="line"><span class="cl"><span class="c1"># =&gt; 7526</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ivy çœŸçš„æ˜¯å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä¸‹é¢å°±æ˜¯æˆ‘çš„å…¨éƒ¨é…ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ivy</span> <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:diminish</span> <span class="p">(</span><span class="nv">ivy-mode</span> <span class="o">.</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">:map</span> <span class="nv">ivy-mode-map</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="s">&#34;C-&#39;&#34;</span> <span class="o">.</span> <span class="nv">ivy-avy</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">ivy-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; add â€˜recentf-modeâ€™ and bookmarks to â€˜ivy-switch-bufferâ€™.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-use-virtual-buffers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; number of result lines to display</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-height</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; does not count candidates</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-count-format</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; no regexp by default</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-initial-inputs-alist</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; configure regexp engine.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ivy-re-builders-alist</span>
</span></span><span class="line"><span class="cl">        <span class="c1">;; allow input not in order</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">((</span><span class="no">t</span>   <span class="o">.</span> <span class="nv">ivy--regex-ignore-order</span><span class="p">))))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ivy æ˜¯å¾ˆä½è°ƒçš„ï¼›å®ƒä¸æƒ³è®©ä½ æŠŠä¸€åˆ‡éƒ½æ•´åˆåˆ°Ivyå»ã€‚å®ƒä»…ä»…æ˜¯æä¾›ä½ å¿…éœ€çš„è¡¥å…¨ã€‚ä½ ä¸èƒ½åƒHelm é‚£æ ·ç”¨Ivy æ¥åšä»»ä½•äº‹ï¼›é‚£ä¸ºä»€ä¹ˆæˆ‘è¿˜è¦åˆ‡æ¢åˆ°Ivy å»å‘¢ï¼Ÿ</p>
<p>è™½ç„¶Ivy å·²ç»æœ€å°åŒ–ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶å¯ä»¥ç”¨Ivy æ¥ä»£æ›¿æˆ‘ç»å¤§éƒ¨åˆ†æ—¥å¸¸ä½¿ç”¨çš„Helmå‘½ä»¤ã€‚</p>
<p>å› ä¸ºIvyæ˜¯å¦‚æ­¤ç®€æ´ï¼Œ <em>abo-abo</em> åœ¨å®ƒä¸Šå¼€å‘äº†ä¸€ä¸ªå« <strong>Counsel</strong> çš„åŒ…ï¼› <strong>Counsel</strong> å¯ä»¥ä¸ºä½ æä¾›éå¸¸éå¸¸å¤šåƒä½ åœ¨Helmä½¿ç”¨çš„å‘½ä»¤</p>
<p>ä½ å¯ä»¥åˆ‡æ¢ç¼“å†²åŒºï¼Œæœç´¢æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®çº§åˆ«è¿›è¡Œæœç´¢å’Œæ›¿æ¢ï¼Œä¸Projectile æ•´åˆï¼Œæœç´¢ä½ æœ€è¿‘
ç¼–è¾‘è¿‡çš„æ–‡ä»¶ï¼Œæœç´¢Emacs å‘½ä»¤ï¼Œæœç´¢æ–‡æ¡£ï¼Œæœç´¢æŒ‰é”®ç»‘å®šï¼Œæµè§ˆ kill-ring</p>
<p>è®©æˆ‘å‘ä½ ä»‹ç»æˆ‘æ˜¯æ€æ ·ç”¨Ivy ä»£æ›¿Helm çš„ã€‚ä¸‹é¢æ˜¯æˆ‘å¯¹é‚£äº›æˆ‘éœ€è¦ä½¿ç”¨Ivy æ¥ä»£æ›¿Helmçš„æœ€å¸¸ç”¨å‘½ä»¤çš„æ€»ç»“ã€‚</p>
<p>è¿™äº›åŸºæœ¬æ˜¯æˆ‘ä¸€ç›´ä»¥æ¥æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚æˆ‘æ¯åˆ†é’Ÿä¼šä½¿ç”¨ä¸‰æ¬¡çš„ <strong>ivy-switch-buffer</strong> ,æˆ‘ä¸€å¤©ä¼šä½¿ç”¨äº”æ¬¡çš„ <strong>helm-swoop</strong>, <strong>swiper</strong> è·Ÿ <strong>helm-swoop</strong> ä¸åˆ†ä¼¯ä»²ï¼›</p>
<p>å¯¹äºé‚£äº›å¤§æ–‡ä»¶ï¼Œ <strong>Counsel</strong> æœ‰ <strong>counsel-grep-or-swiper</strong>.</p>
<p>æˆ‘å·²ç»ç”¨ä¸€äº›éå¸¸éå¸¸å¤§çš„æ ‡è®°è¯­è¨€çš„æ–‡ä»¶(ä¸€ç™¾ä¸‡è¡Œå·¦å³)æ¥æµ‹è¯•è¿‡äº†ï¼Œä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰ã€‚</p>
<table>
  <thead>
      <tr>
          <th>Helm</th>
          <th>Ivy</th>
          <th>What ?</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>helm-mini</td>
          <td>ivy-switch-buffer</td>
          <td>search for currently opened buffers</td>
      </tr>
      <tr>
          <td>helm-recentf</td>
          <td>counsel-recentf</td>
          <td>search for recently edited files</td>
      </tr>
      <tr>
          <td>helm-find-files</td>
          <td>counsel-find-files</td>
          <td>search files starting from ./</td>
      </tr>
      <tr>
          <td>helm-ag</td>
          <td>counsel-ag</td>
          <td>search regexp occurence in current project</td>
      </tr>
      <tr>
          <td>helm-grep-do-git-grep</td>
          <td>counsel-git-grep</td>
          <td>search regexp in current project</td>
      </tr>
      <tr>
          <td>helm-swoop</td>
          <td>swiper</td>
          <td>search string interactively in current buffer</td>
      </tr>
      <tr>
          <td>helm-show-kill-ring</td>
          <td>counsel-yank-pop</td>
          <td>search copy-paste history</td>
      </tr>
      <tr>
          <td>helm-projectile</td>
          <td>counsel-projectile</td>
          <td>search project and file in it</td>
      </tr>
      <tr>
          <td>helm-ls-git-ls</td>
          <td>counsel-git</td>
          <td>search file in current git project</td>
      </tr>
      <tr>
          <td>helm-themes</td>
          <td>counsel-load-theme</td>
          <td>switch themes</td>
      </tr>
      <tr>
          <td>helm-descbinds</td>
          <td>counsel-descbinds</td>
          <td>describe keybindings and associated functions</td>
      </tr>
      <tr>
          <td>helm-M-x</td>
          <td>counsel-M-x</td>
          <td>enhanced M-x command</td>
      </tr>
  </tbody>
</table>
<p>æˆ‘è§‰å¾—ä½ å¯ä»¥çœ‹åˆ°Ivy åŸºæœ¬çš„å‘½ä»¤å¯¹æ¯”Helm çš„å‘½ä»¤ä¹Ÿæ˜¯æ¯«ä¸é€Šè‰²çš„ã€‚å®ƒä»¬å¯ä»¥ä»£æ›¿ä½ æ—¥å¸¸ä½¿ç”¨çš„æ¯ä¸€æ¡Helmå‘½ä»¤ã€‚æˆ‘ä¸æ˜¯è¯´ä½ å¯ä»¥åƒHelm é‚£æ ·ç”¨Ivy æ¥åšä»»ä½•äº‹ï¼Œä½†æ˜¯å®ƒå·²ç»è¶³å¤Ÿå¥½ç”¨äº†ï¼Œæ­£å¦‚æˆ‘è¯´çš„é‚£æ ·ï¼Œä½ ä¹Ÿä¸éœ€è¦ä»»ä½•äº‹éƒ½ä½¿ç”¨Helm æ¥å®Œæˆã€‚</p>
<p>è¯´åˆ°è¡¥å…¨ç†å¿µè¿™ä¸ªè¯é¢˜ä¸Šï¼ŒHelm å’ŒIvy ä¹‹é—´çš„å·®å¼‚å¹¶æ²¡æœ‰é‚£ä¹ˆå¤§ã€‚ä½œä¸ºä¸€ä¸ªç”¨æˆ·ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ çš„æ˜¯ï¼šIvy ä¼šè®©ä½ æ„Ÿè§‰åˆ°æ›´å°‘çš„è‡ƒè‚¿ï¼Œæ›´åŠ çš„ç›´è§‚ï¼Œæ›´åŠ åœ°å®¹æ˜“ç†è§£ã€‚æ¯ä¸€æ¬¡çš„è¡¥å…¨éƒ½æ˜¯å¯ä»¥é¢„è§çš„ã€‚</p>
<p>æœ€åï¼Œè¿™çœŸçš„è·Ÿä¸ªäººçš„å“å‘³æœ‰å…³ã€‚å¯¹äºæˆ‘è‡ªå·±æ¥è¯´ï¼Œ&ldquo;Ivy è¿˜æ˜¯Helm&rdquo; è¿™æ ·çš„äº‰è®ºè·Ÿ&quot;Emacs è¿˜æ˜¯Spacemacs&quot; &ldquo;Emacs è¿˜æ˜¯Ide&rdquo; &ldquo;C è¿˜æ˜¯Java&rdquo; &ldquo;ç®€æ´è¿˜æ˜¯å…¨èƒ½&rdquo; &ldquo;Thelonious è¿˜æ˜¯ Duke&rdquo;(è¯‘è€…æ³¨ï¼Œä¸¤è€…éƒ½æ˜¯çˆµå£«ä¹ä½œæ›²å®¶),&ldquo;Van Der Rohe è¿˜æ˜¯ Gaudi.&quot;(è¯‘è€…æ³¨ï¼šå‰è€…æ˜¯å¾·å›½ç¾å›½
çš„å»ºç­‘é£æ ¼ï¼Œåè€…æ˜¯è¥¿ç­ç‰™åŠ æ³°ç½—å°¼äºšçš„å»ºç­‘é£æ ¼)è¿™æ ·çš„äº‰è®ºæ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚</p>
<p>ä½ é€‰æ‹©Helmå‘¢ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå·¨å‹çš„åŒ…ï¼Œä¸€ç³»åˆ—ä½ ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§ï¼Œä¸€å †ä½ å¯èƒ½åªæ˜¯å¶å°”ç”¨ä¸€ä¸‹çš„åŠŸèƒ½ï¼Œä¸€äº›ä½ ä¼šä¸€ä¸ªå°æ—¶ä½¿ç”¨50æ¬¡çš„ç‰¹æ€§ã€‚å¦‚æœä½ é€‰æ‹©Ivy,ä½ ä¼šå¾—åˆ°ä¸€ä¸ªåªæ‹¥æœ‰é‚£äº›è®©ä½ é¡ºå¿ƒçš„å¿…è¦ç‰¹æ€§çš„ç²¾ç®€çš„åŒ…ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡ <strong>Counsel</strong> æˆ–è€…ç®€å•çš„å‡½æ•°å¯¹å®ƒè¿›è¡Œæ‰©å±•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">ivy-read</span> <span class="s">&#34;Pick:&#34;</span> <span class="p">(</span><span class="nf">mapcar</span> <span class="nf">#&#39;number-to-string</span> <span class="p">(</span><span class="nv">number-sequence</span> <span class="mi">1</span> <span class="mi">10</span><span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ æƒ³è¦é€šè¿‡Helm æ¥æ‰©å±•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">helm</span>
</span></span><span class="line"><span class="cl"> <span class="nb">:sources</span>
</span></span><span class="line"><span class="cl"> <span class="p">(</span><span class="nv">helm-build-sync-source</span> <span class="s">&#34;one-to-ten&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="nb">:candidates</span>
</span></span><span class="line"><span class="cl">                         <span class="p">(</span><span class="nf">mapcar</span> <span class="nf">#&#39;number-to-string</span> <span class="p">(</span><span class="nv">number-sequence</span> <span class="mi">1</span> <span class="mi">10</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                         <span class="nb">:fuzzy-match</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="nb">:buffer</span>
</span></span><span class="line"><span class="cl"> <span class="s">&#34;*helm one-to-ten*&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…ç®€å•çš„åˆ—è¡¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">helm-comp-read</span> <span class="s">&#34;Pick:&#34;</span> <span class="p">(</span><span class="nf">mapcar</span> <span class="nf">#&#39;number-to-string</span> <span class="p">(</span><span class="nv">number-sequence</span> <span class="mi">1</span> <span class="mi">10</span><span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Helm ä¸ºç”¨æˆ·ä½œäº†éå¸¸å¤šçš„å†³å®šï¼ŒIvy è®©ç”¨æˆ·æŒ‰éœ€æ±‚è¿›è¡Œå®šåˆ¶ï¼›Helm é€šè¿‡è€—è´¹éå¸¸å¤šçš„å†…å­˜æ¥å˜å¾—å¿«é€Ÿï¼ŒIvy é€šè¿‡ä¿æŒç®€æ´æ¥å®ç°å¿«é€Ÿï¼›Helm å¾ˆæˆç†Ÿï¼ŒIvy å¾ˆé’æ¶©ï¼›Helm ä¸ºEmacs æä¾›ä¸€è‡´æ€§ï¼ŒIvy ä¸ºEmacs æä¾›ç®€æ´æ€§å’Œå¯é¢„è§æ€§ï¼›Helm éœ€è¦ä½ è¿›è¡Œä¸€å®šçš„é…ç½®ï¼ŒIvy å¼€ç®±å³ç”¨</p>
<p>æˆ‘è‡ªå·±æ˜¯ç¨åå‘Ivy çš„ï¼Œå› ä¸ºæˆ‘æ­£åœ¨ä½¿ç”¨å®ƒï¼›
å®ƒæ›´ç¬¦åˆæˆ‘çš„å£å‘³ã€‚ä½†æ˜¯ä½œä¸ºä¸€ä¸ªç”¨æˆ·ï¼ŒHelmå’ŒIvyå¹¶æ²¡æœ‰é‚£ä¹ˆå¤§çš„å·®åˆ«ã€‚å®ƒä»¬éƒ½æ˜¯éå¸¸ä¼˜ç§€çš„åŒ…ï¼Œåªæ˜¯ä»¥ä¸ç”¨çš„æ–¹å¼å»å®ç°ç›¸åŒçš„ç›®æ ‡</p>
<p>åŸæ–‡åœ°å€ <a href="https://sam217pa.github.io/2016/09/13/from-helm-to-ivy/">https://sam217pa.github.io/2016/09/13/from-helm-to-ivy/</a></p>
<p>åœ¨ä¸‹ç¿»è¯‘æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡º</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>(ç¿»è¯‘)An Introduction to Magit</title>
      <link>https://ramsayleung.github.io/zh/post/2017/magit/</link>
      <pubDate>Fri, 03 Mar 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/magit/</guid>
      <description>An introduction to Magit</description>
      <content:encoded><![CDATA[<p>å¦‚æœä½ è¶³å¤Ÿå¹¸è¿(æˆ–è€…ä¸å¹¸è¿ï¼Œå–å†³äºä½ æ€ä¹ˆçœ‹å¾…äº†)å¯ä»¥ä½¿ç”¨ <code>git</code> ä½œä¸ºä½ å·¥ä½œæµçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä½ å¯èƒ½å·²ç» <strong>é‚‚é€…</strong> è¿‡ <code>magit</code> è¿™ä¸ªEmacs çš„gitæ¥å£äº†ã€‚ <code>magit</code> æ˜¯Emacs ä¸Šçš„éå¸¸ä¼˜ç§€çš„git æ¥å£ï¼Œå®ƒå‡å®šä½ æ˜¯äº†è§£ä½ æ­£åœ¨å¯¹ <code>magit</code> æˆ–è€… <code>git</code> åšçš„ç§ç§æ“ä½œçš„ <strong>æ³¨æ„</strong> ï¼šè¯¥æ–‡ç« æ˜¯é’ˆå¯¹ magit 1.x çš„ï¼Œå¯¹ magit 2.x å¹¶ä¸é€‚ç”¨ Magit æœ‰éå¸¸å®Œæ•´çš„æ–‡æ¡£ï¼ŒåŒ…å«äº†Magit çš„å„ç§æ“ä½œï¼Œä½†æ˜¯å’Œå¤§å¤šæ•°çš„æ–‡æ¡£ä¸€æ ·ï¼ŒMagit çš„æ–‡æ¡£å¹¶æ²¡æœ‰ä»‹ç»å¦‚ä½•å°†Magit å’Œä½ çš„å·¥ä½œæµç»“åˆï¼›</p>
<p>Magit å‡å®šä½ æ˜¯ç†Ÿæ‚‰Magit å¹¶ä¸”äº†è§£å¦‚ä½•åˆç†åœ°ä½¿ç”¨Magit(ä½†å¤§å¤šæ•°æƒ…å†µå¹¶ä¸æ˜¯è¿™æ ·).</p>
<p>Magit ç°åœ¨è¿˜æ˜¯å¤„äºæ´»è·ƒçš„å¼€å‘ä¸­ã€‚åœ¨2013å¹´12æœˆï¼Œå¢åŠ äº†å¾ˆå¤šå¾ˆå¤šæ–°çš„å¾ˆæœ‰ç”¨ç‰¹æ€§çš„ä¸€æ¬¡ release, è®©Magit å˜å¾—æ¯”ä»¥å‰æ›´å¼ºå¤§äº†ï¼Œæ‰€ä»¥æœ¬æ•™ç¨‹æ˜¯åŸºäºæ¯”è¾ƒæ–°çš„Magit ç‰ˆæœ¬çš„ï¼Œå¹¶ä¸” å‡å®šä½ ä¹Ÿå·²ç»å®‰è£…äº†æ–°çš„ç‰ˆæœ¬</p>
<p>å¦‚æœæƒ³å®‰è£…å¤„äº <code>master</code> åˆ†æ”¯çš„Magit,æˆ‘å»ºè®®ä½ ä½¿ç”¨ <code>Melpa</code> æ¥å®‰è£…ï¼›æ­¤å¤–ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ç›´æ¥æ‹‰å–<a href="https://github.com/magit/magit">magit github</a> ä»“åº“çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åæŒ‰ç…§README ä¸Šé¢çš„æŒ‡å¯¼æ¥æ„å»º <code>magit</code></p>
<p>è¿™æ˜¯æˆ‘Magit æ•™ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†ä¼šä»‹ç»çŠ¶æ€çª—å£(status window); å·²æš‚å­˜å’Œæœªæš‚å­˜çš„é¡¹ç›® (staging and unstagin item);å·²ç»æäº¤çš„æ›´æ”¹ (committing changes) å’ŒæŸ¥çœ‹å†å²æäº¤ (history view)</p>
<h2 id="getting-started"><span class="section-num">1</span> Getting Started</h2>
<p>é¦–å…ˆï¼šMagit å¹¶æ²¡æœ‰éšè—git çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³é«˜æ•ˆåœ°ä½¿ç”¨Magit ,ä½ æœ€å¥½æ¸…æ¥šäº†è§£git ç©¶ç«Ÿåšäº†å“ªäº›å·¥ä½œã€‚</p>
<p>äº‹å®ä¸Šï¼Œæˆ‘æ›´åŸæ„æŠŠMagit å½“ä½œä¸€ä¸ªå–ä»£äº†git æ¯ç‡¥çš„çº¯å‘½ä»¤è¡Œæ“ä½œçš„å·¥å…·ï¼Œå®ƒä¹Ÿè¡¨ç°å¾—å‡ºä¹æ„æ–™åœ°å¥½ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>M-x magit-status</code> æ¥ä½¿ç”¨Magit,è¯¥å‘½ä»¤ä¼šæ‰“å¼€ä¸€ä¸ªçª—å£(å¦‚æœä½ çš„ç¼“å†²åŒº æ‰€åœ¨çš„ç›®å½•ä¸æ˜¯ä¸€ä¸ªgit é¡¹ç›®ï¼ŒMagit ä¼šæç¤ºä½ è¿›å…¥ä¸€ä¸ªgité¡¹ç›®çš„ç›®å½•),ç„¶åå±•ç¤ºMagit å½“å‰çš„çŠ¶æ€ã€‚</p>
<p>ä½ æ˜¯é€šè¿‡ <code>magit-status</code> è¿™ä¸ªæ¥å£æ¥ä½¿ç”¨Magit çš„ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨ Emacs VCçš„ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼ŒMagitæ˜¯æ²¡æœ‰é›†æˆåˆ°Emacs VC(Version Control)çš„ æŠ½è±¡å±‚ã€‚</p>
<p>è™½ç„¶ä½ æ²¡æ³•åœ¨VC ä½¿ç”¨Magit,ä¸è¿‡ä½ è¿˜æ˜¯å¯ä»¥åœ¨å¤§å¤šæ•°ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä½¿ç”¨Magit çš„ï¼ŒMagit ä¸ºè¿™äº›ç‰ˆæœ¬æ§åˆ¶å·¥å…·éƒ½æä¾›äº†ç»Ÿä¸€çš„æ¥å£ï¼›ä½ å¦‚æœæƒ³è°ƒç”¨Magit,ä½ åªéœ€è¦ <code>M-x magit-status</code></p>
<h2 id="the-magit-status"><span class="section-num">2</span> The Magit Status</h2>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-e3368" hidden>
    <label for="zoomCheck-e3368">
    
    
    <img class="zoomCheck" loading="lazy" src="https://www.masteringemacs.org/static/uploads/Screenshot-from-2013-12-06-114511.png"/> 
    
    
    </label>
</figure>

<p>ä½ é¦–å…ˆä¼šæ³¨æ„åˆ°å…³äºMagitçš„äº‹æƒ…åº”è¯¥å°±æ˜¯å½“ä½ æ‰“å¼€Magit çš„çŠ¶æ€çª—å£æ—¶ï¼ŒMagit çš„çŠ¶æ€çª—å£
æ˜¯å¯ä»¥ä¸ä½ çš„Emacs çª—å£é…ç½®é…åˆå·¥ä½œçš„ï¼Œä½ ä¹Ÿå¯ä»¥åƒåœ¨å…¶ä»–Emacs çª—å£é‚£æ ·ï¼Œé€šè¿‡æŒ‰ä¸‹ <code>q</code>
æ¥å…³é—­çª—å£ã€‚</p>
<p>å‡ ä¹ä½ åœ¨Magit æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡åœ¨åº•éƒ¨æ‰“å¼€ä¸€ä¸ª <code>command console</code> çª—å£ï¼Œç„¶åæŒ‰ä¸‹å¯¹åº”çš„å•å­—ç¬¦æŒ‡ä»¤æ‰§è¡Œï¼›ä½ ä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰ä½ è‡ªå·±çš„æŒ‡ä»¤ã€‚</p>
<p>è¿™ç§äº¤äº’çš„æ–¹å¼çœŸçš„éå¸¸å¥½ç”¨ï¼Œå¯èƒ½æ­£æ˜¯è¿™ä¹ˆå¼ºå¤§çš„ç‰¹æ€§è®©Magitå˜å¾—å¦‚æ­¤ä¼˜ç§€å§ã€‚</p>
<p>æˆ‘ä¸ªäººçœŸçš„éå¸¸å–œæ¬¢è¿™ç§äº¤äº’çš„æ–¹å¼ï¼Œæˆ‘ç”šè‡³æŠŠè¿™éƒ¨åˆ†ç‰¹æ€§çš„ä»£ç å¤åˆ¶åˆ°äº†æˆ‘è‡ªå·±çš„Emacsé¡¹ç›®ä¸Šï¼Œå› ä¸ºè¿™çœŸçš„çœŸçš„éå¸¸å¥½ç”¨ã€‚</p>
<p>Magit ä¹‹å‰çš„ç¨³å®šç‰ˆæœ¬åœ¨å¸®åŠ©ç”¨æˆ·æ›´å¥½ä½¿ç”¨Magitè¿™æ–¹é¢åšå¾—ç•¥æœ‰ä¸è¶³ï¼Œæ‰€ä»¥åœ¨æœ€æ–°çš„ç‰ˆæœ¬æœ‰äº†ç›¸åº”çš„æ”¹è¿›ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰ä¸‹ ~?&lt;/kbd&gt; æ¥æ˜¾ç¤ºä¸€ç³»åˆ—å¸¦æ³¨è§£è¯´æ˜çš„æ“ä½œã€‚æˆ‘è§‰å¾—åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼ŒMagit çœŸçš„å¾ˆéš¾ç”¨ï¼Œå› ä¸ºæˆ‘æ€»æ˜¯åœ¨ã€ŒèŒ«èŒ«ã€çš„èœå•é€‰é¡¹ä¸­è¿·å¤±ï¼Œå¥½ä¸å®¹æ˜“æ‰èƒ½æ‰¾åˆ°æˆ‘æƒ³è¦çš„æ“ä½œã€‚</p>
<p>å³ä½¿æ˜¯ç°åœ¨ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œéƒ½æœ‰æ³¨è§£è¯´æ˜äº†ï¼›æœ‰ä¸€äº›å‘½ä»¤
(å¯¹äºæˆ‘çš„å·¥ä½œæµæ¥è¯´å¾ˆé‡è¦çš„å‘½ä»¤)ä¾ç„¶æ˜¯æ²¡æœ‰è¯´æ˜çš„ï¼Œç‰¹åˆ«æ˜¯ç”¨æ¥é‡æ–°å®šä½çš„ <code>E</code>.</p>
<h2 id="staging-and-unstaging-items"><span class="section-num">3</span> Staging and Unstaging Items</h2>
<p>æŠŠä½ çš„æ–‡ä»¶æ”¾åˆ°gitä¸‹é¢æ˜¯ä½ ç»å¸¸éœ€è¦å®Œæˆå·¥ä½œä¹‹ä¸€ï¼ŒMagit æœ‰ä¸€ç³»åˆ—çš„æŒ‰é”®ç»‘å®šå’Œå·¥å…·
å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°å®Œæˆå·¥ä½œã€‚</p>
<p>Magit æ“ä½œä¸ä»…å¯ä»¥æš‚å­˜æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æš‚å­˜åœ¨ <strong>diff</strong> ä¸­é€‰å®š çš„ä»£ç å—ã€‚</p>
<p>Magit&quot;æ€æ‰‹çº§&quot;ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å®ƒä½¿ç”¨ä¸åŒçš„ç­‰çº§æ¥æ˜¾ç¤ºç›¸å…³çš„ä¿¡æ¯ã€‚Magit å¯ä»¥
è®©ä½ é€šè¿‡ <code>tab</code> å±•å¼€æˆ–è€…æŠ˜å å·²ç»æš‚å­˜æˆ–è€…æœªæš‚å­˜æ–‡ä»¶ã€‚</p>
<p>å¦‚æœä½ æƒ³æ›´åŠ ç»†é¢—ç²’åº¦åœ°æš‚å­˜æˆ–è€…æœªæš‚å­˜æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ <strong>M-1</strong> åˆ° <strong>M-4</strong> æ¥æ“ä½œæ‰€æœ‰çš„æ–‡ä»¶ï¼›æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>1</strong> åˆ° <strong>4</strong>
æ“ä½œé€‰å®šçš„æ–‡ä»¶</p>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-a2b5c" hidden>
    <label for="zoomCheck-a2b5c">
    
    
    <img class="zoomCheck" loading="lazy" src="https://www.masteringemacs.org/static/uploads/diff-hunk-refined-level-4.png"/> 
    
    
    </label>
</figure>

<ol>
<li>
<p>ç­‰çº§1ä¼šæŠŠæ‰€æœ‰çš„ä¸œè¥¿éšè—åˆ°ä¸€ä¸ªåˆ†ç±»é‡Œé¢(å³å·²æš‚å­˜çš„æ–‡ä»¶);</p>
</li>
<li>
<p>ç­‰çº§ 2åœ¨ä¸€ä¸ªåˆ†ç±»é‡Œé¢åªæ˜¯æ˜¾ç¤ºæ–‡ä»¶å (è¿™æ˜¯é»˜è®¤çš„ç­‰çº§);</p>
</li>
<li>
<p>ç­‰çº§3ä¼šæ˜¾ç¤ºgitä»£ç å—çš„å¤´éƒ¨ï¼›ç­‰çº§4 ä¼šæ˜¾ç¤ºæ‰€æœ‰åšå‡ºäº†ä¿®æ”¹çš„ä»£ç å—ã€‚</p>
<p>æˆ‘ä½¿ç”¨æœ€å¤šçš„æ˜¯ç­‰çº§2å’Œç­‰çº§4, å¦‚æœä½ ä½¿ç”¨æŒ‰é”® <code>TAB</code>,Magitä¼šå®Œæˆä½ æƒ³è¦çš„ç­‰çº§æ“ä½œçš„ã€‚ä½ æ‹¥æœ‰ä¸€ç³»åˆ—å¯ä»¥è®©ä½ çš„</p>
</li>
</ol>
<p>ç”Ÿæ´»å˜å¾—æ›´åŠ ç¾å¥½çš„æŒ‰é”®ç»‘å®šï¼Œä¾‹å¦‚ï¼š <code>n</code> å’Œ <code>p</code> å¯ä»¥åœ¨ä½ å‰ä¸€ä¸ªå•å…ƒå’Œåä¸€ä¸ªå•å…ƒ(é€šå¸¸ä»¥ä»£ç å—ä¸ºå•å…ƒ)
ä¹‹é—´ç§»åŠ¨ï¼›<del>M-n</del> å’Œ <code>M-p</code> å¯ä»¥åœ¨ç›¸é‚»å•å…ƒä¹‹é—´ç§»åŠ¨ï¼Œä¾‹å¦‚åœ¨ç­‰çº§4ä¸­çš„æ¯ä¸ªæ–‡ä»¶é—´ç§»åŠ¨ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>+</code> æˆ–è€… <code>-</code> æ”¾å¤§æˆ–è€…ç¼©å°æ¯æ®µä»£ç ï¼Œä½¿ç”¨ <code>0</code> å¯ä»¥æ¢å¤é»˜è®¤è®¾ç½®ã€‚æ­¤å¤–ä½ ä¹Ÿå¯ä»¥æŒ‰ä¸‹ <code>H</code> ç»™ä»£ç å— æ·»åŠ é¢å¤–çš„ä»£ç é«˜äº®ã€‚</p>
<p>æœ€åï¼Œä½ æŒ‰ä¸‹å›è½¦ <code>RET</code> å¯ä»¥æ‰“å¼€ä½ ä¿®æ”¹çš„æ–‡ä»¶ï¼Œä»£ç å—æˆ–è€…æ–‡ä»¶éƒ½é€‚ç”¨è¯¥æ“ä½œã€‚</p>
<hr>
<p>ä½ å¯ä»¥é€šè¿‡æŒ‰ä¸‹ <code>s</code> æˆ–è€… <code>u</code> æ¥æš‚å­˜æˆ–è€…æ’¤é”€æš‚å­˜æ–‡ä»¶(æˆ–è€…ä»£ç å—),æ­¤å¤–ï¼Œå¥‰é€ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å°æç¤ºï¼š
å¦‚æœä½ é€‰å®šæŸéƒ¨åˆ†çš„ä»£ç ï¼Œç„¶åæŒ‰ä¸‹æš‚å­˜(æ’¤é”€æš‚å­˜)æŒ‰é”®ï¼ŒMagit ä¼šè‡ªåŠ¨æš‚å­˜(æ’¤é”€)ä½ é€‰å®šçš„é‚£éƒ¨åˆ†ä»£ç ã€‚</p>
<p>å½“ä½ å‘ç° <code>diff</code> é€‰å®šçš„ä»£ç å—ä¸ç¬¦åˆä½ çš„è¦æ±‚çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°è¿™ç§ç»†é¢—ç²’åº¦çš„æ“ä½œçœŸçš„éå¸¸æœ‰ç”¨</p>
<hr>
<p>æœ‰æ—¶å€™ä½ å¯¹æŸäº›ä¿®æ”¹å¹¶ä¸åœ¨æ„ï¼Œä½ ä¹Ÿä¸å…³å¿ƒè¿™éƒ¨åˆ†ä¿®æ”¹æ˜¯å¦å·²ç»æäº¤ï¼›ä½ å¯ä»¥åƒä¸Šé¢çš„æš‚å­˜(æ’¤é”€æš‚å­˜)æ“ä½œä¸€æ ·ï¼Œé€šè¿‡æŒ‰ä¸‹æŒ‰é”® <code>K</code> æ¥å¿½ç•¥é€‰å®šçš„ä»£ç å—å’Œæ–‡ä»¶ï¼Œå¹¶ä¸”ä»ä½ çš„ç”µè„‘åˆ é™¤æœªæäº¤åˆ°æš‚å­˜åŒº(untracked)çš„æ–‡ä»¶ï¼›</p>
<p>è¿™ä¸ªå‘½ä»¤å¯ä»¥æ¯”æš‚å­˜(æ’¤é”€æš‚å­˜)å‘½ä»¤å®Œæˆæ›´å¤šçš„æ“ä½œï¼Œä¾‹å¦‚ï¼Œåˆ é™¤å·²ä¿å­˜çš„æ–‡ä»¶æˆ–ç›®å½•(stash)</p>
<h2 id="committing-changes"><span class="section-num">4</span> Committing Changes</h2>
<p>å¦‚æœä½ æƒ³æ‰“å¼€æäº¤èœå•ï¼Œåªéœ€æŒ‰ä¸‹ <code>c</code>,ç„¶åä½ å°±ä¼šçœ‹åˆ°ç³ç½—æ»¡ç›®çš„é€‰é¡¹ï¼Œä¸è¿‡å¤§éƒ¨ä»½é€‰é¡¹ ä½ éƒ½æ˜¯ç”¨ä¸ä¸Šçš„äº†ã€‚ä½ çœŸæ­£æœ‰ç”¨çš„æ“ä½œï¼Œä¸ä»…å¯ä»¥è®©ä½ æäº¤å·²æš‚å­˜çš„ä¿®æ”¹ï¼Œè¿˜å¯ä»¥å®Œæˆæ›´å¤šçš„ä»»åŠ¡ï¼š</p>
<ul>
<li>ä½ å¯ä»¥æ‰©å±•(extend <code>e</code>) <code>HEAD</code> æ‰€æŒ‡å‘çš„æäº¤</li>
<li>ä½ å¯ä»¥ä¿®æ”¹(amend <code>a</code>) æœ‰å…³çš„æäº¤ä¿¡æ¯</li>
<li>å¦‚æœä½ ä¸å–œæ¬¢ç°åœ¨çš„æäº¤ä¿¡æ¯ï¼Œä½ å¯ä»¥é‡å†™(reword <code>r</code>)æäº¤ä¿¡æ¯</li>
<li>ä½ åŒæ—¶ä¹Ÿå¯ä»¥ä¿®æ•´(fixup <code>f</code>)å’Œå‹ç¼©(squash <code>s</code>)å½“å‰è¿™æ¬¡çš„æäº¤ã€‚å¦‚æœä½ ä¹‹å‰ç”¨ <code>.</code> æ ‡è®°äº†
ä¸€æ¬¡æäº¤ï¼Œé‚£ä¹ˆä»Šæ¬¡ä½¿ç”¨çš„å°±æ˜¯è¢«æ ‡è®°çš„é‚£æ¬¡æäº¤ã€‚</li>
</ul>
<p>æ‰©å±•ä¸€æ¬¡æäº¤å…¶å®å°±æ˜¯åœ¨å½“å‰æäº¤ä¸Šé™„åŠ ä¿®æ”¹ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ å¿˜è®°äº†æäº¤æœ¬å±äºæ­¤æ¬¡æäº¤çš„ä¸œè¥¿
ä½ å¯ä»¥ä½¿ç”¨ <code>æ‰©å±•</code> é€‰é¡¹ã€‚</p>
<p>å¦‚æœä½ æƒ³ä¿®æ”¹å½“å‰çš„æäº¤ä¿¡æ¯ï¼Œé‚£å°±ä½¿ç”¨ <code>ä¿®æ”¹</code> é€‰é¡¹å§</p>
<p>é‡å†™å¯ä»¥é‡å†™ä½ çš„æäº¤ä¿¡æ¯ä½†æ˜¯æ— éœ€æäº¤ä½ å·²æš‚å­˜çš„ä¿®æ”¹ï¼›å¦‚æœä½ ä¸å°å¿ƒæŒ‰é”™äº†é€‰é¡¹ï¼Œæƒ³é‡å†™ä½ çš„æäº¤ä¿¡æ¯ï¼Œ=é‡å†™= é€‰é¡¹å°±æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©</p>
<p>å¦‚æœä½ æƒ³åœ¨æœ€æ–°ä¸€æ¬¡æäº¤ä¸‹åˆ›å»ºä¸€ä¸ª <code>fixup</code> æˆ–è€… <code>squash</code> æäº¤çš„è¯ï¼Œä½¿ç”¨ä¿®æ•´æˆ–å‹ç¼©å‘½ä»¤ å¯ä»¥é‡æ•´æˆ–è€… <code>--(è‡ªåŠ¨å‹ç¼©)autosquash</code> æœ€æ–°ä¸€æ¬¡æäº¤ã€‚</p>
<p>å¦‚æœä½ ä¸ä¼šå»é‡å†™ä½ çš„gitå†å²æˆ–è€…ä½ æœªä½¿ç”¨è¿‡é‡æ•´ï¼Œä½ å¯èƒ½è§‰å¾—è¿™ä¸¤ä¸ªå‘½ä»¤ä¸æ˜¯å¾ˆæœ‰ç”¨</p>
<h2 id="logging"><span class="section-num">5</span> Logging</h2>

<figure>
    
    
    <input type="checkbox" id="zoomCheck-cb202" hidden>
    <label for="zoomCheck-cb202">
    
    
    <img class="zoomCheck" loading="lazy" src="https://www.masteringemacs.org/static/uploads/Screenshot-from-2013-12-06-142317.png"/> 
    
    
    </label>
</figure>

<p>æˆ‘è§‰å¾—Magitéå¸¸å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å®ƒæœ‰ä¸è®¡å…¶æ•°çš„é€‰é¡¹å¯ä»¥ç”¨æ¥å¯¹ä½ çš„git å†å²è¿›è¡Œ è¿‡æ»¤ï¼Œæ’åºï¼ŒæŸ¥æ‰¾ã€‚</p>
<p>Magit ä¸ä»…å¯ä»¥å±•ç¤ºä½ çš„gitä¿¡æ¯ï¼Œè¿˜å¯ä»¥è®©ä½ æ‰§è¡Œäº¤äº’æ“ä½œã€‚å¦‚æœä½ æƒ³æ‰“å¼€æ—¥å¿—çš„èœå•ï¼Œä½ åªéœ€æŒ‰ä¸‹ <code>l</code>.</p>
<p>ä½ åº”è¯¥çŸ¥é“çš„ç¬¬ä¸€ä¸ªæœ‰ç”¨çš„æŒ‰é”®å°±æ˜¯ <code>l l</code>, è¿™ä¸ª æŒ‰é”®ä¼šä¸ºä½ å±•ç¤ºç¼©ç•¥çš„æ—¥å¿—ä¿¡æ¯ï¼šä½ ä¼šçœ‹åˆ°å•è¡Œçš„æäº¤ä¿¡æ¯, ä½œè€…çš„åå­—, ä¿®æ”¹æäº¤è·ä»Šçš„æ—¶é—´, æ ‘çŠ¶ç»“æ„çš„git æ—¥å¿—, å„ç§çš„æ ‡ç­¾ä¿¡æ¯ï¼Œä¾‹å¦‚ <code>HEAD</code> æŒ‡é’ˆçš„ä½ç½®æˆ–è€…åˆ†æ”¯æ ‡è®°çš„ä½ç½®</p>
<p>å¦‚æœä½ ä¸å°å¿ƒç©åäº†git çš„æäº¤ä¿¡æ¯ï¼Œå‘½ä»¤ <code>git reflog</code> ä¼šæ˜¯ä½ çš„æ•‘æ˜Ÿï¼›æ­¤å¤–ï¼Œå¯¹äºmagit çš„å¼•ç”¨æ—¥å¿—(reflog)æœºåˆ¶(<code>l h</code>)ï¼Œå®ƒä¹Ÿæœ‰å¾ˆå‹å¥½ç¨³å®šçš„UIç•Œé¢æ”¯æŒã€‚</p>
<hr>
<p>å¼•ç”¨æ—¥å¿—å’Œæ™®é€šçš„æ—¥å¿—éƒ½æœ‰éå¸¸ä¸°å¯Œçš„æŒ‰é”®ç»‘å®šã€‚åœ¨æ—¥å¿—é‡Œï¼Œä½ å¯¹å•ä¸ªçš„æäº¤å¯ä»¥è¿›è¡Œ
éå¸¸å¤šçš„æ“ä½œï¼š</p>
<ul>
<li><code>.</code>: ä¸ºæ­¤æ¬¡æäº¤ä½œæ ‡è®°ä»¥ä¾¿è¿›è¡Œåç»­çš„æ“ä½œä¾‹å¦‚æäº¤ä¿®æ•´ (<code>c f</code>)æˆ–è€…æäº¤å‹ç¼© (<code>c s</code>)</li>
<li><code>x</code>: é‡ç½®ä½ çš„ <code>HEAD</code> æŒ‡é’ˆåˆ°é€‰å®šçš„æäº¤</li>
<li><code>v</code>: æ’¤é”€æäº¤</li>
<li><code>d</code>: å°†ä½ çš„å·¥ä½œåŒºä¸é€‰å®šçš„æäº¤è¿›è¡Œæ¯”è¾ƒ</li>
<li><code>a</code>: å°†é€‰å®šçš„æäº¤ä½œç”¨åœ¨ä½ çš„å·¥ä½œåŒº</li>
<li><code>A</code>: é€‰æ‹©ä½äºä½ å·¥ä½œåŒºé¡¶éƒ¨çš„æäº¤</li>
<li><code>E</code>: ä»¥äº¤äº’çš„æ–¹å¼é‡ç½®ä½ çš„ <code>HEAD</code> æŒ‡é’ˆåˆ°é€‰å®šçš„å·¥ä½œåŒºã€‚å¦‚æœä½ æƒ³é‡å†™å†å²ï¼Œè¯¥å‘½ä»¤ä¼šéå¸¸æœ‰ç”¨</li>
<li><code>C-w</code>: å¤åˆ¶ä½ æ­¤æ¬¡æäº¤çš„hashå€¼</li>
<li><code>SPC</code>: å±•ç¤ºå®Œæ•´çš„æäº¤å†å²</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå³ä½¿ä½ å…³é—­äº†æ—¥å¿—çš„çª—å£ï¼Œæ ‡è®°çš„å‘½ä»¤è¿˜æ˜¯ä¼šç»§ç»­ä½œç”¨çš„ï¼›æ ‡è®°æ˜¯éå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œä½†æ˜¯
ä½ å¾ˆå®¹æ˜“å¿˜è®°ä½ æ˜¯å¦æ›¾ç»ä½œè¿‡æ ‡è®°ã€‚å¦‚æœä½ åœ¨magit ä½¿ç”¨ <code>M-n</code> æˆ–è€… <code>N-p</code> å‘ä¸Šæˆ–è€…å‘ä¸‹æµè§ˆæ—¥å¿—ï¼Œ
maigt ä¼šè‡ªåŠ¨ä¸ºä½ åœ¨å¦å¤–ä¸€ä¸ªçª—å£æ˜¾ç¤ºæäº¤ä¿¡æ¯</p>
<h2 id="conclusion"><span class="section-num">6</span> Conclusion</h2>
<p>å¯¹äºæœ‰ç»éªŒçš„Git ç”¨æˆ·æ¥è¯´ï¼ŒMagit æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å·¥å…·ï¼›æ­¤å¤–ï¼Œå¦‚æœä½ æ˜¯Git çš„æ–°æ‰‹ï¼Œ Magitå¯ä»¥å¸®åŠ©ä½ äº†è§£Git æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œä½†æ˜¯å®ƒæ°¸è¿œä¸ä¼šæ•™ä½ ä½¿ç”¨Git.</p>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œé˜»ç¢ ä½ ä½¿ç”¨Magit æœ€å¤§çš„éšœç¢å°±æ˜¯Magitç¼ºä¹å¯¹é€‰é¡¹çš„æè¿°è¯´æ˜ï¼›å³ä½¿Magit åŒ…å«äº†æˆåƒä¸Šä¸‡ Gitçš„é€‰é¡¹ï¼Œå‚æ•°å’Œæ“ä½œï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰æ•™ä½ å¦‚ä½•æ‰¾åˆ°å¹¶ä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚</p>
<p>æˆ‘å‘ç°Git çš„å‘½ä»¤è¡ŒçœŸçš„æ— å¯æ›¿ä»£(ä¸æ˜¯å› ä¸ºæˆ‘å–œæ¬¢git çš„å‘½ä»¤è¡Œæˆ‘æ‰è¿™ä¹ˆè¯´ï¼Œäº‹å®æ˜¯å®ƒçœŸçš„å¾ˆæ£’)å› ä¸ºæˆ‘ æƒ³è¦å®Œæˆçš„æ“ä½œçœŸçš„éšè—å¾—å¾ˆæ·±ï¼Œæ²¡æœ‰é‚£ä¹ˆå®¹æ˜“åœ¨Magitæ‰¾åˆ°ã€‚</p>
<p>ä¸è¿‡æœ€æ–°ç‰ˆæœ¬çš„æ”¹è¿›çœŸçš„å¾ˆå¥½ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰ä¸‹ <code>?</code> æŸ¥çœ‹ä¸€ç³»åˆ—å¸¦æœ‰æ³¨è§£è¯´æ˜çš„å‘½ä»¤(ä½†ä¸æ˜¯å…¨éƒ¨å‘½ä»¤ï¼Œä¸è¿‡è¿™ä¹Ÿ
å·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ”¹è¿›äº†).</p>
<p>å¦‚æœä½ æ›¾è¢«Magit çš„å­¦ä¹ æ›²çº¿æ‰€å“å€’ï¼ŒæŠ‘æˆ–è€…ä½ å·²ç»å°è¯•Magit, å´æ— å¥ˆæ”¾å¼ƒï¼›æˆ‘å»ºè®®ä½ å†è¯•ä¸€æ¬¡ã€‚æˆ‘æ‰“ç®—å†™æ›´å¤šå…³äºMagit çš„åšæ–‡</p>
<hr>
<p>åŸæ–‡åœ°å€ <a href="https://www.masteringemacs.org/article/introduction-magit-emacs-mode-git">https://www.masteringemacs.org/article/introduction-magit-emacs-mode-git</a>
åœ¨ä¸‹ç¿»è¯‘æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡º</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>Shellç¥å™¨fasdä¸Eshellçš„ä¸æœŸè€Œé‡</title>
      <link>https://ramsayleung.github.io/zh/post/2017/fasd-meet-eshell/</link>
      <pubDate>Thu, 02 Mar 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/fasd-meet-eshell/</guid>
      <description>An introduction about tweaking eshell with fasd</description>
      <content:encoded><![CDATA[<blockquote>
<p>fasd - quick access to files and directory</p></blockquote>
<p>ä¹‹å‰ä¸€ä½ Windows ç”¨æˆ·çœ‹åˆ°æˆ‘åœ¨ Shell ä¸‹é¢çš„æ“ä½œï¼Œä»–å¾ˆå¥‡æ€ªï¼Œè§‰å¾—æ˜æ˜å·²ç»æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨è¿™ç§å‘½ä»¤è¡Œå‘¢ï¼Œç›´æ¥ç”¨é¼ æ ‡ç‚¹å‡»ä¸å°±å¾ˆå¥½äº†ä¹ˆã€‚</p>
<p>æˆ‘è§‰å¾—å¾ˆéš¾ç›´æ¥è·Ÿä»–è§£é‡Šï¼Œå› ä¸ºä»–æ²¡æœ‰ç”¨è¿‡Linux/Unix,å®Œå…¨ä¸ç†Ÿæ‚‰å‘½ä»¤è¡Œï¼Œä¸çŸ¥é“å…¶å¼ºå¤§ä¹‹å¤„ï¼Œå…¶é«˜æ•ˆç‡æ˜¯å›¾å½¢åŒ–ç•Œé¢å®Œå…¨æ— æ³•æ¯”æ‹Ÿçš„(å½“ç„¶ï¼Œå‘½ä»¤è¡Œçš„å­¦ä¹ æˆæœ¬å’Œå­¦ä¹ æ›²çº¿è‚¯å®šæ¯”å›¾å‹åŒ–ç•Œé¢é«˜), So I live in terminal.</p>
<p>è€Œä»Šå¤©æˆ‘è¦ä»‹ç»çš„ç¥å™¨ fasd å°±æ˜¯å¯ä»¥è®©å‘½ä»¤è¡Œæ“ä½œå˜å¾—æ›´åŠ é«˜æ•ˆ</p>
<h2 id="fasd"><span class="section-num">1</span> Fasd</h2>
<p>åœ¨ Shell ä¸‹é¢æœ‰éå¸¸å¤šçš„å‘½ä»¤æ“ä½œæ˜¯ä¸æ–‡ä»¶å’Œç›®å½•ç›¸å…³çš„ï¼Œå¦‚æœä½ è¦è¿›å…¥åˆ°å¦å¤–ä¸€ä¸ªç›® å½•ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„æ¥è®¿é—®è¯¥ç›®å½•ï¼Œä½†æ˜¯å¦‚æœè¿™æ˜¯ä¸€ä¸ªä¸å½“å‰ç›®å½•ä¸ç›¸å…³çš„ç›® å½•ä½ å°±åªèƒ½é€šè¿‡ç»å¯¹è·¯å¾„æ¥è®¿é—®ã€‚</p>
<p>ä»¥æˆ‘è‡ªå·±çš„ç›®å½•ä¸ºä¾‹ï¼Œå½“å‰ç›®å½•æ˜¯ <strong><em>home/samray</em>.emacs.d/elisp/</strong> ,æˆ‘å¸Œæœ›è®¿é—® <strong>Document</strong> ç›®å½•ä¸‹ä¸€ä¸ªçš„å­ç›®å½• <strong>Python</strong>, æˆ‘å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥è®¿é—®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> ~/Document/Programming/Python
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /home/samray/Document/Programming/Python
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™å°±æ˜¯æˆ‘éœ€è¦çš„å‘½ä»¤ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ <strong>tab</strong> è¿›è¡Œç›®å½•åçš„è¡¥å…¨ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è§‰å¾—è¦è¾“å…¥çš„ä¸œè¥¿å¤ªå¤šäº†(æ­£å¦‚ Larry Wall æ‰€è¯´ï¼Œæ‡’æƒ°æ˜¯ç¨‹åºå‘˜çš„ç¾å¾·). ç„¶åï¼Œæˆ‘å‘ç°äº† <a href="https://github.com/clvv/fasd">Fasd </a>è¿™ä¸ªç¥å™¨ã€‚å®ƒå¯ä»¥è®©æˆ‘åªè¾“å…¥ <strong>Python</strong> å°±è¿›å…¥åˆ°æˆ‘æƒ³è®¿é—®çš„ <strong>Python</strong> ç›®å½•ï¼Œ</p>
<p>ç¥å¥‡å§ï¼:)</p>
<hr>
<p>Fasdä»¥è®¿é—®çš„é¢‘ç¹ç¨‹åº¦å’Œæœ€è¿‘æ˜¯å¦æœ‰è®¿é—®å¯¹æ–‡ä»¶å’Œç›®å½•åˆ†é…ä¼˜å…ˆçº§ï¼Œç„¶åé€šè¿‡åˆ¤æ–­å·²è®¿é—®çš„æ–‡ä»¶ä»¥åŠå…¶ä¼˜å…ˆçº§æ¥åˆ‡æ¢ç›®å½•æˆ–è€…æ‰“å¼€æ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœä½ ä¹‹å‰å·²ç»è®¿é—®è¿‡æŸä¸ªç›®å½•.</p>
<p>é‚£ä¹ˆ ä½ å¾ˆå®¹æ˜“å°±å¯ä»¥åˆ‡æ¢åˆ°é‚£ä¸ªç›®å½•</p>
<h3 id="å¸¸ç”¨é€‰é¡¹"><span class="section-num">1.1</span> å¸¸ç”¨é€‰é¡¹</h3>
<ul>
<li>
<p><strong>-a(any)</strong>: åŒ¹é…æ–‡ä»¶å’Œç›®å½•</p>
</li>
<li>
<p><strong>-i(interactive)</strong>: ä»¥äº¤äº’çš„æ–¹å¼é€‰æ‹©æ–‡ä»¶æˆ–è€…ç›®å½•</p>
</li>
<li>
<p><strong>-s(show/search)</strong>: æŒ‰ç…§ä¼˜å…ˆçº§å±•ç¤ºæ–‡ä»¶æˆ–è€…ç›®å½•</p>
</li>
<li>
<p><strong>-e &lt;cmd&gt;</strong>:å¯¹åŒ¹é…çš„æ–‡ä»¶è°ƒç”¨å‘½ä»¤&lt;cmd&gt;</p>
</li>
<li>
<p><strong>-d</strong>:åªåŒ¹é…ç›®å½•</p>
</li>
<li>
<p><strong>-f</strong>:åªåŒ¹é…æ–‡ä»¶
Fasd æ–‡æ¡£è¿˜å»ºè®®ä½ ä¸º fasdçš„å‘½ä»¤é€‰é¡¹è®¾ç½®åˆ«å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">a</span><span class="o">=</span><span class="s1">&#39;fasd -a&#39;</span>        <span class="c1"># any</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">s</span><span class="o">=</span><span class="s1">&#39;fasd -si&#39;</span>       <span class="c1"># show / search / select</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">d</span><span class="o">=</span><span class="s1">&#39;fasd -d&#39;</span>        <span class="c1"># directory</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">f</span><span class="o">=</span><span class="s1">&#39;fasd -f&#39;</span>        <span class="c1"># file</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">sd</span><span class="o">=</span><span class="s1">&#39;fasd -sid&#39;</span>     <span class="c1"># interactive directory selection</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">sf</span><span class="o">=</span><span class="s1">&#39;fasd -sif&#39;</span>     <span class="c1"># interactive file selection</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">z</span><span class="o">=</span><span class="s1">&#39;fasd_cd -d&#39;</span>     <span class="c1"># cd, same functionality as j in autojump</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">zz</span><span class="o">=</span><span class="s1">&#39;fasd_cd -d -i&#39;</span> <span class="c1"># cd with interactive selection</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ä½ å°±å¯ä»¥é€šè¿‡ <strong>z some-dir</strong> ç›´æ¥è¿›å…¥åˆ°æŸä¸ªç›®å½•æˆ–è€… <strong>zz some-dir</strong> é€‰æ‹©è¿›å…¥æœ‰å¤šä¸ªåŒ¹é…çš„ç‰¹å®šç›®å½•ã€‚</p>
<p>Fasd è¿˜ä¼šåˆ¤æ–­åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰çš„åŒ¹é…é€‰é¡¹æˆ–è€…æ˜¯ç›´æ¥é€‰æ‹©æœ€ä½³åŒ¹é…. ä¾‹å¦‚ä½ ä¹Ÿå¯ä»¥å°†fasdé…åˆ <em>subshell</em> ä½¿ç”¨ï¼Œä¾‹å¦‚æ‰“å¼€ <strong>foo</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim <span class="sb">`</span>f foo<span class="sb">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…æ‰“å¼€  <strong>/etc/rc.conf</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim <span class="sb">`</span>f rc conf<span class="sb">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="ä¾‹å­"><span class="section-num">1.2</span> ä¾‹å­</h3>
<p>ä½ å¯ä»¥å°†fasd é…åˆæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨ï¼Œä¾‹å¦‚åˆ—ä¸¾ä»¥ <em>py</em> ç»“å°¾çš„æœ€è¿‘è®¿é—®çš„æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">f py$
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆæˆ–è€…ä½¿ç”¨Emacs æ‰“å¼€æœ€è¿‘é¢‘ç¹è®¿é—®çš„æ–‡ä»¶ <em>bar</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">f -e emacs bar
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="fasd-plus-eshell"><span class="section-num">2</span> Fasd +Eshell</h2>
<p>fasd çœŸçš„å¯ä»¥å¤§å¹…åº¦æé«˜æ•ˆç‡ï¼Œä½†æ˜¯æˆ‘æœ‰ç‚¹ä¸å¤ªæ»¡æ„çš„æ˜¯ï¼Œæˆ‘æ˜¯ä¸ª Emacser, æˆ‘çš„æ“ä½œåŸºæœ¬æ˜¯åœ¨ Emacs é‡Œå®Œæˆçš„ï¼Œè€Œæˆ‘åœ¨ Emacsé‡Œé¢ä½¿ç”¨çš„ shell æ˜¯ Eshell,Eshell ä¼¼ä¹ä¸èƒ½ä¸ fasd æ— ç¼ç»“åˆï¼Œä¼¼ä¹å¯ä»¥æŠ˜è…¾ä¸€ä¸‹ã€‚</p>
<hr>
<p><strong>z</strong> å’Œ <strong>zz</strong> å‘½ä»¤æ˜¯æ— æ³•åœ¨Eshell é‡Œé¢è¿è¡Œï¼Œå› ä¸º <strong>z</strong> æ˜¯ <strong>fasd_cd</strong> çš„åˆ«åï¼Œè€Œ*fasd_cd* æ˜¯ä¸€ä¸ªshell script å‡½æ•°ï¼ŒEshellæ— æ³•è¿è¡Œè¯¥å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">fasd_cd <span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$#</span> -le <span class="m">1</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">then</span>
</span></span><span class="line"><span class="cl">        fasd <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">_fasd_ret</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>fasd -e <span class="s1">&#39;printf %s&#39;</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="o">[</span> -d <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span> <span class="o">||</span> <span class="nb">printf</span> %s<span class="se">\n</span> <span class="s2">&#34;</span><span class="nv">$_fasd_ret</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Eshellæ— æ³•è¿è¡Œè¯¥å‡½æ•°ï¼Œå› ä¸ºEshellæ–‡æ¡£çš„åŒ®ä¹ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å¦‚ä½•ç¼–å†™è·Ÿä¸Šé¢ä»£ç ç­‰ä»·çš„ &ldquo;Eshell script&rdquo;,æ‰€ä»¥å°±ç”¨ elisp å†™ä¸€æ®µåŒæ ·åŠŸèƒ½çš„å‡½æ•°å¥½äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">defun</span> <span class="nv">samray/eshell-fasd-z</span> <span class="p">(</span><span class="kp">&amp;rest</span> <span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;Use fasd to change directory more effectively by passing ARGS.&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">args</span> <span class="p">(</span><span class="nv">eshell-flatten-list</span> <span class="nv">args</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">fasd</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;fasd &#34;</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">args</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">fasd-result</span> <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="nv">fasd</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">path</span> <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="s">&#34;\n$&#34;</span> <span class="s">&#34;&#34;</span> <span class="nv">fasd-result</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">eshell/cd</span> <span class="nv">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nv">eshell/echo</span> <span class="nv">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‡½æ•°åŠŸèƒ½å¾ˆå¿«å°±å†™å¥½äº†ï¼Œå®ç°äº† <strong>z</strong> çš„åŠŸèƒ½ï¼Œä½†æ˜¯åŸæ¥çš„ä»£ç ä¸€ç›´ä¸èƒ½æ­£å¸¸è¿è¡Œï¼ŒæŠ˜è…¾äº†ä¸€ä¸ªå¤šå°æ—¶éƒ½æ²¡è§£å†³ï¼Œè¾“å‡ºä»€ä¹ˆéƒ½æ­£å¸¸ï¼Œæœ€å debug å‘ç°æ˜¯å› ä¸ºæ˜¾ç¤ºçš„è·¯å¾„åé¢å¤šäº†ä¸€ä¸ªæ¢è¡Œç¬¦å³ <strong>/home/samray</strong> å˜æˆäº† <strong>/home/samray\n</strong>,è€Œè¾“å‡ºæ¢è¡Œç¬¦åˆä¸ä¼šæ˜¾ç¤ºï¼ŒçœŸ
çš„å‘ã€‚</p>
<p>æœ€åä¸ºå‘½ä»¤èµ‹äºˆåˆ«åå°±å¯ä»¥åƒåœ¨ <strong>zsh</strong> ä¸‹é‚£æ ·å·¥ä½œäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> z <span class="s1">&#39;samray/shell-fasd-z $1&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>æ›´å¤šçš„ç”¨æ³•å°±è¦æŸ¥é˜…å®˜æ–¹æ–‡æ¡£äº†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">man fasd
</span></span></code></pre></td></tr></table>
</div>
</div><p>Enjoy Emacs and Shell :)</p>
<p>å‚è€ƒï¼š
<a href="https://github.com/clvv/fasd">https://github.com/clvv/fasd</a></p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>(ç¿»è¯‘)Mastering Eshell</title>
      <link>https://ramsayleung.github.io/zh/post/2017/master_eshell/</link>
      <pubDate>Tue, 28 Feb 2017 00:00:00 -0800</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2017/master_eshell/</guid>
      <description>An complete instroduction about Eshell</description>
      <content:encoded><![CDATA[<p>Emacs æ”¯æŒè‹¥å¹²ç§shell,ä½†æ˜¯å°±åŠŸèƒ½ä¸°å¯Œåº¦ï¼Œä»¥åŠä¸Emacs çš„é›†æˆç¨‹åº¦è€Œè¨€ï¼Œ
æ— ä¸€èƒ½æœ›Eshellé¡¹èƒŒã€‚</p>
<p>Eshell æ˜¯ä¸€ä¸ªå®Œå…¨ç”±Emacs Lisp ç¼–å†™çš„shell,ä½†æ˜¯ä¸è¦ä»¥ä¸ºè¿™æ ·Eshellåœ¨åŠŸèƒ½ä¸Šå°±ä¼šå…ˆå¤©ä¸è¶³ï¼Œå®ƒèƒ½ä»£æ›¿ç»å¤§éƒ¨åˆ†GNUæ ¸å¿ƒåŠŸèƒ½é›†å’ŒBourne shellå®¶æ—çš„å‘½ä»¤ä»¥åŠç›¸å…³ç‰¹æ€§ã€‚</p>
<p>æ­¤å¤–ï¼Œé€šè¿‡ç”¨Emacs Lisp é‡å†™äº†ç±»ä¼¼ <code>ls</code> å’Œ <code>cp</code> ç­‰å¸¸ç”¨å‘½ä»¤ï¼Œä½¿Eshell å¯ä»¥æˆä¸ºçœŸæ­£çš„è·¨å¹³å°Shell.</p>
<p>ä½†æ˜¯ï¼ŒEshell æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸è¶³ï¼Œé‚£å°±æ˜¯Eshell ä¸¥é‡ç¼ºä¹æ–‡æ¡£ä¸ä¹‹å½¢æˆé²œæ˜å¯¹æ¯”çš„æ˜¯ï¼ŒEmacs åŠå…¶ç”Ÿæ€éƒ½æ‹¥æœ‰ä¸°å¯Œçš„æ–‡æ¡£</p>
<h2 id="overview">Overview</h2>
<p>ä¸Emacs ä¸­çš„å…¶ä»–shell ä¸ä¸€æ ·çš„æ˜¯ï¼ŒEshell ä¸æ˜¯ç»§æ‰¿é»˜è®¤ä¸çš„å­è¿›ç¨‹è¿›è¡Œäº¤äº’çš„ <code>comint-mode</code>
å› ä¸ºEshell ä¸æ˜¯ä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ‰€ä»¥å®ƒå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨ <code>comint-mode</code> äº†ï¼›ä¸è¿‡ä¼¼ä¹è¿™æ˜¯ä»¶
å¥½äº‹ï¼Œå› ä¸ºè¿™æ„å‘³ç€ <code>comint-mode</code> çš„ä¾‹ç¨‹å’Œé’©å­æ˜¯ä¸ä¼šä½œç”¨äºEshell çš„ã€‚</p>
<p>æ­¤å¤–ï¼Œå‡ ä¹æ‰€æœ‰ <code>comint-mode</code> çš„å¸¸ç”¨å‘½ä»¤ï¼Œéƒ½åœ¨Eshell ä¸­é‡æ–°å®ç°äº†ï¼Œå¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„æŒ‰é”®ç»‘å®š.</p>
<p>å½“ç„¶ï¼Œä¹Ÿæœ‰ä¸ºæ•°ä¸å¤šçš„æŒ‰é”®ç»‘å®šæ²¡æœ‰è¿ç§»åˆ°Eshell,ä¾‹å¦‚åœ¨Eshll ä¸­æœç´¢å†å²å‘½ä»¤çš„=comint-history-isearch-backward-regexp= æ˜¯ç»‘å®šåˆ°äº† <code>M-r</code>,
è€ŒåŸæ¥shellä¸­ç›¸åŒåŠŸèƒ½çš„å‘½ä»¤çš„æŒ‰é”®å°±æ˜¯ <code>C-r</code> Eshell å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°éƒ½æ­£å¸¸å·¥ä½œ.</p>
<p>å…¶å®å’ŒEshell çœŸæ­£è¿›è¡Œäº¤äº’çš„æ˜¯ä¸€ä¸ªé€šç”¨çš„ä¸­é—´ä»¶(å³ Emacs Lisp/C çš„ä¸€ä¸ªåº“),è€Œè¯¥ä¸­é—´ä»¶åˆä¼šè·Ÿä½ çš„æ“ä½œç³»ç»Ÿè¿›è¡Œé€šä¿¡ï¼Œå¤„ç†ä¾‹å¦‚å¤åˆ¶æ–‡ä»¶ ç­‰ç›¸å…³æ“ä½œã€‚</p>
<p>æ­¤å¤–ï¼Œè¿™ä¸ªä¸­é—´ä»¶ç”šè‡³æ”¯æŒåœ¨Eshell ä¸­ä½¿ç”¨ <code>Tramp</code> çš„ç‰¹æ€§, ç”±äºEmacs æ˜¯è¡€ç»Ÿçº¯æ­£çš„Unix äº§ç‰©ï¼ŒEshell æ˜¯å¯ä»¥é‡ç°ä¾‹å¦‚bash ç­‰ä¼ ç»ŸUnix shell ä»¥åŠ å…¶ä»–GNU å·¥å…·é“¾çš„åŒæ ·åŠŸèƒ½çš„ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯Windows,ä½ åº”è¯¥æ„Ÿåˆ°åº†å¹¸ï¼Œå› ä¸ºä½ å†ä¹Ÿä¸ç”¨æŠ˜è…¾ <code>cygwin</code> ,ä¹Ÿä¸éœ€è¦ä¸ºè·¨å¹³å°ç§»æ¤Emacs è€Œæ‹…å¿§ä¾èµ–é—®é¢˜ã€‚</p>
<p>äº‹å®ä¸Šï¼Œå¯¹æ¯”=cygwin= çš„bash,åœ¨å¾ˆå¤šæ–¹é¢ï¼ŒEshell å¯¹Windows çš„æ”¯æŒæ˜¯åšå¾—æ›´å¥½æ»´ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ ä¸å†éœ€è¦ <code>/cygdrive/c</code> æ¥æ‰©å±•ç›¸åº”çš„åŠŸèƒ½ï¼Œå› ä¸ºEshell è‡ªèº«å°±æ”¯æŒWindows/MS-DOS çš„è·¯å¾„
(æ‰€ä»¥ <code>cd D:</code> æˆ–è€… <code>D:</code> åŒæ ·éƒ½å¯ä»¥è¿›å…¥D ç›˜)</p>
<p>è™½ç„¶Eshell æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è¦åˆ—å‡ºé‚£äº›è®©äººä»¬å¾ˆå›°æƒ‘çš„è§‚ç‚¹(æˆ–è€…è¯´æ˜¯è¯¯è§£):</p>
<ul>
<li>Eshell ä¸æ˜¯ä¸€ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå®ƒä¸æ˜¯è·Ÿshell è¿›è¡Œé€šä¿¡ï¼Œäº‹å®ä¸Šï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªshell. å®ƒåšçš„æ‰€æœ‰å·¥ä½œï¼Œæ— è®ºæ˜¯åœ¨å±å¹•å±•ç¤ºæ•°æ®ï¼Œè¿˜æ˜¯è·å–ç›®å½•é‡Œé¢çš„ä¿¡æ¯ï¼Œå®ƒéƒ½æ˜¯é€šè¿‡Emacs å®ç°çš„ï¼Œç„¶åEmacsä¼šå†è·Ÿä½ çš„æ“ä½œç³»ç»Ÿè¿›è¡Œé€šä¿¡</li>
<li>ç”±äºEshell è·Ÿå…¶ä»–è¿›ç¨‹é€šä¿¡çš„æ–¹å¼ (ç‰¹åˆ«æ˜¯å¼‚æ­¥é€šä¿¡),æ‰€ä»¥å¯èƒ½å¯¼è‡´å®ƒçš„ç¼“å†²åŒº(Buffers) å’Œå…¶ä»–ä¸­æ–­æ“ä½œå‡ºç°é—®é¢˜</li>
<li>Eshell æ— æ³•ç›´æ¥æ”¯æŒäº¤äº’å‘½ä»¤ (æŒ‰ç…§Eshell çš„è¯´æ³•ï¼Œå«åšâ€œå¯è§†åŒ–å‘½ä»¤â€),ä¾‹å¦‚top ,æ‰€ä»¥ä½ ä¸€å®šè¦å‘Šè¯‰Eshllåº”åœ¨å•ç‹¬çš„ <code>ansi-term</code> å®ä¾‹è¿è¡Œæ­¤ç±»å‘½ä»¤</li>
<li>å®ƒä¸æ˜¯ <code>bash</code> æˆ–è€… <code>zsh</code>,æ›´ä¸æ˜¯ <code>csh</code>,æ‰€ä»¥ä¸è¦åƒæ“ä½œå®ƒä»¬é‚£æ ·æ“ä½œEshell å³ä½¿Eshell è·Ÿå®ƒä»¬çœŸçš„å¾ˆåƒã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³æ›´åŠ é«˜æ•ˆåœ°ä½¿ç”¨Eshell,ä½ æœ€å¥½æŠŠå®ƒå½“ä½œä¸€ä¸ªä¸ä¸€æ ·çš„shell</li>
</ul>
<h2 id="commands">Commands</h2>
<p>Eshell æ˜¯å¯ä»¥è°ƒç”¨å‡ ä¹æ‰€æœ‰çš„å·²åŠ è½½çš„elisp å‡½æ•°çš„ï¼›è¿™ç§çµæ´»æ€§æ˜¯å…¶å®ƒshell æ— æ³•æƒ³è±¡çš„ä¹Ÿæ˜¯å®ƒä»¬åŠ›æ‰€ä¸èƒ½åŠçš„ã€‚</p>
<p>äº‹å®ä¸Šï¼Œè¿™ç§åœ¨shell é‡Œé¢è·Ÿelisp å‡½æ•°ç»“åˆçš„ç©æ³•ç†åº”å¾—åˆ°æ›´å¤šäººçš„æ”¯æŒå’Œæ¨å´‡ï¼Œå› ä¸ºå®ƒçœŸçš„å¾ˆé…·(å½“ç„¶ä¹Ÿå¾ˆæœ‰ç”¨).å‡å¦‚ä½ æƒ³åœ¨Emacs é‡Œé¢æ‰“å¼€ <code>foobar.txt</code> ,ä½ åªéœ€è°ƒç”¨ <code>find-file foobar.txt</code>,Eshell å°±ä¼šè°ƒç”¨å¯¹åº”çš„ <code>(find-file &quot;foobar.txt&quot;)</code> ,å¹¶ä¸ºä½ æ‰“å¼€æ–‡ä»¶</p>
<h2 id="technical-details">Technical Details</h2>
<p>æ‰€æœ‰è¢«Eshell æ‰§è¡Œçš„å‘½ä»¤éƒ½æœ‰ä¸€ä¸ªæ‰§è¡Œçš„é¡ºåºï¼Œè¿™æ˜¯å¿…éœ€ä¼ é€’ç»™Emacs çš„æœ‰åºåˆ—è¡¨ï¼Œ
å› ä¸ºè¿™ä¸ªåˆ—è¡¨å†³å®šäº†Eshell çš„å“ªä¸€éƒ¨åˆ†åº”è¯¥å¤„ç†è¯¥å‘½ä»¤çš„ã€‚</p>
<p>å¦‚æœè¯¥åˆ—è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°å¯ä»¥æ‰§è¡Œä½ çš„æ“ä½œçš„å‡½æ•°æˆ–è€…å¯¹åº”å‘½ä»¤ï¼Œä½ ä¼šè¢«å‘ŠçŸ¥ï¼Œä½ è¾“å…¥çš„æ˜¯æ— æ•ˆå‘½ä»¤</p>
<p>å‡è®¾ ä½ æƒ³è°ƒç”¨ <code>cp</code> å‘½ä»¤ï¼Œè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>å®Œæ•´çš„è·¯å¾„ (å³ <code>/bin/cp</code>),åœ¨ <code>/bin</code> ç›®å½•ä¸‹æ‰§è¡Œ <code>cp</code></li>
<li>å¯»æ‰¾å‘½ä»¤çš„å‰ç¼€ï¼Œ <em>eshell-explict-command-char</em> (é»˜è®¤å€¼æ˜¯ &ldquo;=&rdquo;),å¦‚æœæœ‰å‰ç¼€çš„è¯,é‚£ä¹ˆï¼Œåœ¨æœç´¢è·¯å¾„å¯»æ‰¾å¯¹åº”çš„å‘½ä»¤</li>
<li>å¯»æ‰¾shell å‘½ä»¤çš„åˆ«å (<code>alias</code> å‘½ä»¤)</li>
<li>åœ¨æœç´¢è·¯å¾„å¯»æ‰¾ <code>cp</code> ,å³ <code>$PATH</code> (æˆ–è€… <code>eshell-path-env</code>) å®šä¹‰çš„è·¯å¾„</li>
<li>å¯»æ‰¾å«åš <code>cp</code> çš„Lisp å‡½æ•° æˆ–è€… å« <code>eshell/cp</code> çš„elisp å‡½æ•°</li>
</ol>
<p>å˜é‡ <code>eshell-prefer-lisp-functions</code> è®©å†…éƒ¨çš„elisp å‡½æ•°è°ƒç”¨è¦å…ˆäºå¤–éƒ¨è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ï¼Œå½“è¯¥å˜é‡å€¼ä¸º <code>t</code> çš„æ—¶å€™ï¼ŒEshell ä¼š <code>æœ€å…ˆ</code> è°ƒç”¨elisp å‡½æ•°ï¼Œè€Œä¸æ˜¯ =æœ€å=æ‰è°ƒç”¨ï¼›</p>
<p>ä½†æ˜¯ï¼Œå½“å‘½ä»¤å‰ç¼€(å³ <em>eshll-explicit-command-char</em>)è¢«æŒ‡å®šï¼Œè¯¥å˜é‡ä¼šè¢«å¿½ç•¥</p>
<h2 id="built-in-commands">Built-in Commands</h2>
<p>Eshell æœ‰å¾ˆå¤šå¾ˆå¥½ç”¨çš„é€šè¿‡Emacs-Lisp é‡å†™çš„å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å®ç°äº†ç»å¤§éƒ¨åˆ†GNU æ ¸å¿ƒå·¥å…·é›†
æˆ–è€…ä½ æ‰€é’Ÿçˆ±çš„shell çš„ç‰¹æ€§ï¼Œæ‰€ä»¥è¿™äº›å‘½ä»¤è¢«ç§°ä¸º&quot;Alias functions&quot;(åˆ«åå‡½æ•°).</p>
<p>ä½†æ˜¯Eshell å¹¶ä¸æ˜¯å…¨ç›˜æ¨¡æ‹Ÿå…¶ä»–Shell çš„åŠŸèƒ½ç‰¹æ€§ï¼Œå¦‚æœä½ ä¼ é€’äº†ä¸€äº›å‚æ•°ï¼Œè¯•å›¾è°ƒç”¨Eshellæœªå®ç°çš„åŠŸèƒ½æ—¶ï¼ŒEshell ä¼šè‡ªåŠ¨è°ƒç”¨å¤–éƒ¨çš„å¯¹åº”çš„å‘½ä»¤æ¥å®ç°ä½ æƒ³è¦çš„åŠŸèƒ½ (å½“ç„¶å‰ææ˜¯ä½ å·²ç»å®‰è£…è¯¥å‘½ä»¤)
ä¸‹é¢åˆ—å‡ºEshell å·²ç»é‡æ–°å®ç°çš„å‘½ä»¤ï¼š
<code>cat</code> , <code>cp</code> , <code>ls</code> , <code>cd</code> , <code>export</code> , <code>dirs</code> , <code>du</code> , <code>echo</code> , <code>env</code> , <code>kill</code>
<code>ln</code> , <code>mkdir</code> , <code>mv</code> , <code>alias</code> , <code>popd</code> , <code>pushd</code> , <code>pwd</code> , <code>rm</code> , <code>rmdir</code>
<code>time</code> , <code>umask</code>.
Eshell æ³¨é‡è·ŸåŸæœ‰çš„GNUå·¥å…·åŠŸèƒ½åŒæ­¥ï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ‹…å¿ƒå› Eshell å‘½ä»¤è·Ÿå…¶ä»–åŸç”ŸShell å‘½ä»¤ä¸ä¸€è‡´è€Œå¯¼è‡´çš„é—®é¢˜</p>
<h2 id="command-interception">Command Interception</h2>
<p>Eshell æœ‰ä¸€ä¸ªå¾ˆcool çš„ç‰¹æ€§ï¼Œé‚£å°±æ˜¯æŸäº›å‘½ä»¤ä¼šè¢«æ‹¦æˆªå¹¶ä¸”ä¼ é€’ç»™Emacs.</p>
<p>è¿™ç§æœºåˆ¶å…è®¸ä½ è°ƒç”¨ä¸€ä¸ªå‘½ä»¤ä¾‹å¦‚ <code>man ls</code>,ä½†æ˜¯çœŸæ­£è°ƒç”¨å¤„ç†çš„æ˜¯Emacs å†…ç½®çš„ <code>man</code>.</p>
<p>æ­¤å¤–ï¼Œå¯¹äºä¹‹å‰æåŠçš„äº¤äº’å¼å‘½ä»¤è€Œè¨€ï¼Œè¿™ç§ç‰¹æ€§æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºEshell æ˜¯æ²¡æœ‰èƒ½åŠ›å¤„ç†è¯¥å‘½ä»¤çš„ã€‚</p>
<p>ä½†çœŸæ­£å±•ç°è¯¥ç‰¹æ€§å¨åŠ›çš„è¿˜æ˜¯é‚£ä¹ˆå¤æ‚çš„å‘½ä»¤ï¼Œä¾‹å¦‚ <code>grep</code> <code>diff</code>,å› ä¸ºEmacs æœ¬èº«å°±å†…ç½®äº†æ›´åŠ å¼ºå¤§çš„ <em>grep</em> å’Œ <em>diff</em> å·¥å…·ã€‚</p>
<p>è¿™ç§ç‰¹æ€§çœŸçœŸå®å®å±•ç¤ºäº†Eshell å¯¹æ¯”å…¶ä»–shell çš„å¼ºå¤§ä¹‹å¤„</p>
<p>ä¸‹åˆ—çš„å‘½ä»¤éƒ½ä¼šè¢«é‡å®šå‘åˆ°Emacså†…ç½®çš„åŠŸèƒ½å»ï¼š
<code>agrep</code> , <code>diff</code> , <code>egrep</code> , <code>fgrep</code> , <code>glimpse</code> , <code>grep</code> , <code>info</code> , <code>jobs</code>
<code>locate</code> , <code>man</code> , <code>occur</code> , <code>su</code> , <code>sudo</code> , <code>whoami</code>
<code>su</code> <code>sudo</code> <code>whoami</code> æ˜¯ä¸ <code>TRAMP</code> ç›¸å…³çš„å‘½ä»¤ï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯è¿æ¥åˆ°è¿œç¨‹shell çš„
è¿™äº›å‘½ä»¤ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„</p>
<h2 id="subshells">Subshells</h2>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>$()</code> æ¥è°ƒç”¨å‘½ä»¤ï¼Œå¹¶ä¸”æŠŠå‘½ä»¤å¯¹åº”çš„è¾“å‡ºå½“ä½œæ¥ä¸‹æ¥å‘½ä»¤çš„å‚æ•°ï¼Œå°±å¥½åƒä½ åœ¨bash é‚£æ ·ä½¿ç”¨ã€‚</p>
<p>ä½†æ˜¯ä½ è¦è°¨è®°çš„ä¸€æ ·äº‹æƒ…å°±æ˜¯ä½ æ˜¯æ— æ³•ä½¿ç”¨åå¼•å· =``=æ¥ç”Ÿæˆä¸€ä¸ªsubshellçš„ã€‚</p>
<p>è™½ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åƒè°ƒç”¨subshell çš„è¯­æ³•æ¥è°ƒç”¨æ ‡å‡†çš„elisp form: <code>(form ....)</code> æ³¨æ„æ²¡æœ‰äº† <code>$</code>,ä¸è¿‡æˆ‘å¹¶ä¸æ¨èè¿™ç§ç”¨æ³•ï¼Œå› ä¸ºå¾ˆå¤šæƒ…å†µï¼Œè¿™ç§ç”¨æ³•éƒ½æ˜¯ä¸è¡Œçš„</p>
<h2 id="useful-elisp-commands">Useful Elisp Commands</h2>
<p>Eshell æœ‰ä¸€å¥—å¯ä»¥è®©ä½ æ¯å¤©çš„ç”Ÿæ´»å˜å¾—æ›´ç¾å¥½çš„å¸®åŠ©å‡½æ•°(helper function), æ­¤å¤–ä½ å¯ä»¥åœ¨Eshellè°ƒç”¨å‡ ä¹æ‰€æœ‰çš„elisp å‡½æ•°ï¼Œè¿™å°±æ„å‘³ç€ï¼Œä½ æ‹¥æœ‰æ— ä¸Šçš„èƒ½åŠ›æ¥æ§åˆ¶ä½ çš„shell.</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šåˆ—ä¸¾é‚£äº›ä¸ºEshell ä¸“é—¨ç¼–å†™çš„å‘½ä»¤å’Œä¸€äº›æˆ‘è§‰å¾—å¾ˆæœ‰ç”¨çš„å‘½ä»¤ã€‚</p>
<p>æˆ‘ä¹Ÿç¼–å†™äº†æŒºå¤šçš„elisp å‡½æ•°äº† (éƒ¨åˆ†æ˜¯ä¸“é—¨å†™ç»™Eshell,å…¶ä»–çš„å°±ä¸æ˜¯äº†)</p>
<h3 id="listify-args">listify ARGS</h3>
<p>å°†å­—ç¬¦ä¸²å‚æ•°è§£ææˆ elisp åˆ—è¡¨ç¬¦å·ï¼Œç„¶åæ‰“å°åˆ°å±å¹•ã€‚</p>
<p>è¯¥å‡½æ•°ä¸ä»…å¯ä»¥è§£æ POSIX ç±»å‹çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è§£æ MS-DOS/Windows ç±»å‹å‚æ•°</p>
<h3 id="addpath-path">addpath PATH</h3>
<p>å°†å‚æ•° (å¿…é¡»æ˜¯æ–‡ä»¶è·¯å¾„) æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ <code>$PATH</code>,å¦‚æœæ²¡æœ‰å‚æ•°è¢«æŒ‡å®šçš„è¯ï¼Œé‚£ä¹ˆå°†åŸæœ‰çš„å˜é‡å€¼è¾“å‡ºåˆ°å±å¹•</p>
<h3 id="unset-env-var">unset ENV-VAR</h3>
<p>ç§»é™¤å·²æœ‰çš„ç¯å¢ƒå˜é‡</p>
<h3 id="find-file-file">find-file FILE</h3>
<p>æœç´¢æ–‡ä»¶FILE,ç„¶ååœ¨Emacs ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ã€‚è¿™ä¸ªå‡½æ•°ä¸ <code>TRAMP</code> ç›¸å…³ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¿œç¨‹å·¥ä½œ</p>
<h3 id="dired-directory">dired DIRECTORY</h3>
<p>åœ¨ç›®å½• <code>DIRECTORY</code> ä¸‹æ‰“å¼€ä¸€ä¸ª dired ç¼“å†²åŒº</p>
<h3 id="calc-eval-expr">calc-eval EXPR</h3>
<p>åœ¨Emacs calculator æ‰§è¡Œè¯¥è¡¨è¾¾å¼ <code>EXPR</code></p>
<h3 id="upcase-str-downcase-str">upcase STR /downcase STR</h3>
<p>å­—ç¬¦ä¸² STR å¤§å°å†™è½¬æ¢</p>
<h3 id="vc-dir-directory">vc-dir DIRECTORY</h3>
<p>å±•ç¤ºåœ¨ç‰ˆæœ¬æ§åˆ¶ä¸‹çš„ç›®å½• <code>DIRECTORY</code> çš„çŠ¶æ€ï¼Œè·Ÿå¤§å¤šæ•°ç‰ˆæœ¬æ§åˆ¶å·¥å…·çš„ <code>status</code> å‘½ä»¤ç›¸åŒ</p>
<h3 id="ediff-files-file1-file2">ediff-files FILE1 FILE2</h3>
<p>ä½¿ç”¨Emacs çš„æ¯”è¾ƒå¼•æ“ (diff engine) ediff,å¯¹æ–‡ä»¶ <code>FILE1</code> <code>FILE2</code> è¿›è¡Œæ¯”è¾ƒ</p>
<h2 id="aliasing">Aliasing</h2>
<p>ä½ å¯ä»¥åƒåœ¨å…¶å®ƒä¸»æµçš„shell é‚£æ ·ç»™Eshellå‘½ä»¤èµ‹äºˆåˆ«åï¼Œæ“ä½œæ˜¯ä¸€æ ·æ»´ï¼Œæ­¤å¤–ï¼Œä½ ç”šè‡³å¯ä»¥æ··åˆä½¿ç”¨elisp å‡½æ•°å’ŒEshell å‘½ä»¤ã€‚</p>
<p><code>alias</code> å‘½ä»¤çš„æ ¼å¼æ˜¯ <code>alias alias-name definition</code> <code>definition</code> å¿…é¡»ç”±ä¸€å¯¹å•å¼•å· <code>''</code> åŒ…å›´ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒshell çš„å‚æ•°å¼•ç”¨å½¢å¼ï¼š</p>
<p>ä¾‹å¦‚ <code>$1</code> æŒ‡ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ <code>$2</code> æŒ‡ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾æ­¤ç±»æ¨ï¼Œæˆ–è€… <code>$=</code> æŒ‡æ‰€æœ‰çš„å‚æ•°ã€‚
å½“å‚æ•°æ²¡æœ‰åœ¨ <code>definition</code> è¢«å¼•ç”¨ï¼ŒEshell ä¼šè‡ªåŠ¨æŠŠå‚æ•°æ·»åŠ åˆ°å‘½ä»¤çš„æœ«å°¾ï¼Œå¹¶æŠŠå‚æ•°å¿½ç•¥</p>
<p>å¦‚æœæƒ³ç§»é™¤ä¸€æ¡å‘½ä»¤çš„åˆ«åï¼Œåªéœ€ä¸å¯¹å˜é‡ <code>definition</code> èµ‹å€¼ (å³ <code>alias alias-name</code>) åˆ«åå°±ä¼šè¢«è‡ªåŠ¨ç§»é™¤ï¼Œå¦‚æœæƒ³åˆ—å‡ºæ‰€æœ‰çš„åˆ«åï¼Œåªéœ€è¾“å…¥ <code>alias</code></p>
<p>Eshell ä¼šæŠŠå‘½ä»¤çš„åˆ«ååŠå…¶å®šä¹‰å†™å…¥åˆ°å˜é‡ <code>eshell-aliases-file</code> ç„¶åç»Ÿä¸€è¢«å˜é‡ <code>Eshell-directory-name</code> ç®¡ç†ï¼›ç„¶ååˆ«åé»˜è®¤ä¼šè¢«ç»Ÿä¸€å†™å…¥åˆ° <code>~/.Eshell/alias</code>.</p>
<p>æ¯æ¬¡ä½ æ›´æ”¹ä¸€ä¸ªå‘½ä»¤åˆ«åï¼Œéƒ½ä¼šé‡å¤ä¸Šé¢çš„æµç¨‹, å¦å¤–ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç‰¹æ€§å°±æ˜¯åˆ«åè‡ªåŠ¨ä¿®æ­£ (<em>auto-correcting aliasing</em>),
å¦‚æœä½ è¾“å…¥ ä¸€ä¸ªæ— æ•ˆçš„å‘½ä»¤å¤ªå¤šæ¬¡ (å˜é‡ <code>eshll-bad-command-tolerance</code> è¡¨ç¤ºè§¦å‘è‡ªåŠ¨æ›´æ­£çš„æœ€ä½ æ¬¡æ•°ï¼Œé»˜è®¤å€¼ä¸º3),Eshellä¼šä¸ºä½ çœŸæ­£æƒ³æ‰§è¡Œçš„å‘½ä»¤æä¾›åˆ«å.</p>
<p>ä¾‹å¦‚ä½ æƒ³è¾“å…¥çš„æ˜¯ <code>cp</code> ä½†æ˜¯è¾“å…¥äº†å¤ªå¤šæ¬¡çš„ <code>co</code>,æ‰€ä»¥ä¸‹æ¬¡ä½ è¾“å…¥ <code>co</code> çš„æ—¶å€™ï¼ŒEshell å°±ä¼šè‡ªåŠ¨æ‰§è¡Œ <code>cp</code>.</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ ä¸å–œæ¬¢è¿™ç§ç‰¹æ€§çš„è¯ï¼Œä½ å¯ä»¥æŠŠæœ€ä½æ¬¡æ•°è®¾å¾—å¾ˆå¤§</p>
<h3 id="useful-examples">Useful Examples</h3>
<p>è®©æˆ‘ä»¬æŠŠé•¿é•¿çš„ <code>find-file</code> å‘½ä»¤æ˜ å°„åˆ°æ›´é¡ºæ‰‹çš„åˆ«å <code>ff</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> ff <span class="s1">&#39;find-file $1&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠ <code>dired</code> æ˜ å°„åˆ° <code>d</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">alias</span> d <span class="s1">&#39;dired $1&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="visual-commands">Visual Commands</h2>
<p>æœ‰ä¸€äº›å¯¹Eshell è€Œè¨€æ˜¯å¤ªå¤æ‚çš„å‘½ä»¤ï¼ŒEshell æ˜¯æ— æ³•ç›´æ¥æ˜¾ç¤ºçš„ï¼Œæ‰€ä»¥éœ€è¦ç‰¹æ®Šçš„å¤„ç†</p>
<p>ä¾‹å¦‚ <code>top</code> ,æ˜¯æ— æ³•ä¸ä¸€äº›å“‘ç»ˆç«¯(dumb terminal)ä¸€èµ·æ­£å¸¸å·¥ä½œçš„ã€‚</p>
<p>ä¸ºäº†ä½¿è¿™äº›å‘½ä»¤æ­£å¸¸å·¥ä½œï¼ŒEshell ä¼šè¿è¡Œä¸€ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨ <code>term</code> æ¥æ‰§è¡Œè¿™äº›çš„å‘½ä»¤ (å³è¢«ç§°ä¸ºå¯è§†åŒ–çš„å‘½ä»¤)</p>
<p>å¦‚æœä½ æƒ³ä¿®æ”¹å¯è§†åŒ–å‘½ä»¤çš„åˆ—è¡¨ï¼Œä½ å¯ä»¥ä¿®æ”¹å˜é‡ <code>eshell-visual-commands</code></p>
<h2 id="command-history">Command History</h2>
<p>Eshell æœ‰åŠŸèƒ½ä¸°å¯Œçš„å‘½ä»¤è¡Œå†å²æœºåˆ¶ï¼Œä½†æ˜¯å› ä¸ºEshell ä¸æ˜¯ç»§æ‰¿ <code>comint-mode</code> çš„</p>
<p>æ‰€ä»¥ <code>comint-mode</code> ä¸å†å²ç›¸å…³çš„åŠŸèƒ½ï¼ŒEshell æ˜¯æ²¡æ³•ç”¨çš„ï¼Œä¸è¿‡å®ƒç»å¤§éƒ¨ä»½çš„åŠŸèƒ½éƒ½å·²ç»åœ¨Eshell é‡æ–°å®ç°äº†</p>
<h3 id="m-r-m-s">M-r /M-s</h3>
<p>å‘å‰æˆ–è€…å‘åæœç´¢å‘½ä»¤ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼</p>
<h3 id="m-p-m-n">M-p/M-n</h3>
<p>åœ¨å†å²å‘½ä»¤åˆ—è¡¨ä¸­å‰è¿›æˆ–è€…åé€€</p>
<h3 id="c-p-c-n">C-p/C-n</h3>
<p>Eshellä¸Šä¸€æ¡å‘½ä»¤æˆ–è€…ä¸‹ä¸€æ¡å‘½ä»¤</p>
<h3 id="c-c-m-r-c-c-m-s">C-c M-r /C-c M-s</h3>
<p>å›åˆ°ä¸Šä¸€æ¡/ä¸‹ä¸€æ¡å†å²å‘½ä»¤ï¼Œå†å²å‘½ä»¤å¿…é¡»ä¸ç°åœ¨çš„å‘½ä»¤è¾“å…¥ä¸€è‡´ã€‚</p>
<p>ä¾‹å¦‚ç°åœ¨çš„è¾“å…¥æ˜¯ï¼š
<code>ls</code> ,é‚£ä¹ˆå›åˆ°çš„ä¸Šä¸€æ¡ /ä¸‹ä¸€æ¡å†å²å‘½ä»¤å¿…é¡»æ˜¯ <code>ls</code>,æˆ–è€…ä»¥ <code>ls</code> å¼€å¤´çš„å‘½ä»¤ï¼Œå¦‚ <code>lsmod</code></p>
<p>ä¸è¶³çš„æ˜¯ï¼Œæ–°çš„ç»è¿‡ä¿®æ”¹çš„å‘½ä»¤ <code>comint-history-isearch-backward-regexp</code> (åœ¨ <code>comint</code> é”®ç»‘å®šæ˜¯ <code>M-r</code>)åœ¨Eshll æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå› ä¸ºEshell ä¸æ˜¯ç»§æ‰¿äº <code>comint</code> (æ‰€ä»¥åœ¨å‡çº§ä¸­è¢«å¿½ç•¥äº†)</p>
<h2 id="history-interaction">History Interaction</h2>
<p>åƒbash å’Œå…¶å®ƒshell é‚£æ ·ï¼ŒEshell ä¹Ÿæ”¯æŒå†å²çš„ä¿®æ”¹å’Œäº¤äº’ã€‚</p>
<p>å¦‚æœæƒ³è¦çŸ¥é“å†å²äº¤äº’æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼Œä½ å°±éœ€è¦å›å»ç¿»ä¸€ä¸‹ bash çš„æ‰‹å†Œäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šæ€»ç»“ä¸€ä¸‹Eshell å¤§éƒ¨ä»½çš„å†å²äº¤äº’ç”¨æ³•</p>
<h3 id="ef9fcd">!!</h3>
<p>é‡å¤ä¸Šä¸€æ¡å‘½ä»¤</p>
<h3 id="ls">!ls</h3>
<p>é‡å¤ä¸Šä¸€æ¡ä»¥ <code>ls</code> å¼€å¤´çš„å‘½ä»¤</p>
<h3 id="ls">!?ls</h3>
<p>é‡å¤ä¸Šä¸€æ¡åŒ…å« <code>ls</code> çš„å‘½ä»¤</p>
<h3 id="ls-n">!ls:n</h3>
<p>ä»ä¸Šä¸€æ¡ä»¥ <code>ls</code> å¼€å¤´çš„å‘½ä»¤æˆªå–ç¬¬nä¸ªå‚æ•°</p>
<h3 id="ls-tab">!ls&lt;tab&gt;</h3>
<p>ä½¿ç”¨å‘½ä»¤è¡¥å…¨ï¼Œæ˜¾ç¤ºè¡¥å…¨ç»“æœä¸­åŒ…å« <code>ls</code> çš„å‘½ä»¤</p>
<h3 id="old-new">^old^new</h3>
<p>å¿«é€Ÿæ›¿æ¢ï¼Œå¯¹äºä¸Šä¸€æ¡å‘½ä»¤ï¼Œä½¿ç”¨ <code>old</code> æ¥ä»£æ›¿å‘½ä»¤ä¸­çš„ <code>new</code> (å¤‡æ³¨ï¼šä¼¼ä¹æœ‰Bug)</p>
<h3 id="792e5b">$_</h3>
<p>è¿”å›ä¸Šä¸€æ¡æ‰§è¡Œçš„å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</p>
<p>Eshll ä¹Ÿæ”¯æŒbash å†å²ä¿®æ”¹(ä¾‹å¦‚ !!:s/old/new/),å¦‚æœä½ æƒ³äº†è§£æ›´å¤šçš„ä¿¡æ¯ï¼Œ
<a href="https://www.gnu.org/software/bash/manual/bash.html#History-Interaction">the bash reference on history interaction</a> å¯ä»¥å‘Šè¯‰ä½ ä½ æƒ³çŸ¥é“çš„ä¸œè¥¿</p>
<h2 id="commandline-interaction">Commandline Interaction</h2>
<h2 id="the-eshell-prompt">The Eshell Prompt</h2>
<p>ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹å˜é‡ <code>eshell-prompt-function</code> æ¥è‡ªå®šä¹‰Eshell çš„æç¤ºç¬¦ï¼›è¯¥å˜é‡
æœ‰ä¸€ä¸ªå‡½æ•°å®šä¹‰äº†Eshell å‘½ä»¤è¡Œæç¤ºç¬¦åº”è¯¥åŒ…å«çš„å†…å®¹ã€‚</p>
<p>é€šè¿‡ç”¨elisp æ¥ç®¡ç†Eshell å‘½ä»¤è¡Œæç¤ºç¬¦çš„é…ç½®ï¼Œä½ å°±å¯ä»¥å®ç°ä½ æƒ³è¦çš„ä»»ä½•ç‰¹æ€§ã€‚</p>
<p>ä½ éœ€è¦æ³¨æ„çš„äº‹æƒ…å°±æ˜¯ï¼šä½ éœ€è¦å‘Šè¯‰Eshell,å‘½ä»¤è¡Œæç¤ºç¬¦é•¿ä»€ä¹ˆæ ·å­ï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¿®æ”¹å˜é‡ <code>eshell-prompt-regexp</code>
,é‚£æ · Eshell å°±ä¼šçŸ¥é“ä½ æƒ³è¦çš„æç¤ºç¬¦é•¿ä»€ä¹ˆæ ·å­äº†</p>
<h2 id="the-commandline">The Commandline</h2>
<p>Eshell å¯ä»¥ä½¿ç”¨åæ–œæ  <code>\</code> æ¥è½¬ä¹‰æ–°è¡Œï¼Œä»¥åŠåŸºæœ¬çš„å¤šè¡Œè¾“å…¥ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªè¾“å…¥å¤šè¡Œçš„æ–‡å­¦å­—ç¬¦ä¸² (literal string)çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨å•å¼•å·ï¼šè¾“å…¥ä¸€ä¸ªå•å¼•å·ï¼Œç„¶åå›è½¦ï¼Œ
æ¥ç€ä½ å°±å¯ä»¥è¾“å…¥ä½ æƒ³è¾“å…¥çš„å†…å®¹ï¼Œæœ€åç”¨å¦å¤–ä¸€ä¸ªå•å¼•å·ç»“æŸè¾“å…¥ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨åŒå¼•å·çš„è¯ï¼ŒEshell ä¼šè‡ªåŠ¨å±•å¼€ subshell å‘½ä»¤å¹¶ä¸”å±•å¼€ç›¸åº”çš„å˜é‡å¾—ç›ŠäºEshell çš„è°ƒç”¨æœºåˆ¶ï¼Œä½ ç”šè‡³å¯ä»¥å›å»ç»§ç»­ä¿®æ”¹å¼•å·é‡Œé¢çš„æ–‡æœ¬ã€‚</p>
<p>å½“ä½ æƒ³å›å»ä¿®æ”¹ä½ ä¸å–œæ¬¢çš„å†…å®¹ï¼Œè®©Eshellåƒä½ é¢„æœŸé‚£æ ·å·¥ä½œçš„æ—¶å€™ï¼Œä½ å°±ä¼šè§‰å¾—è¿™ç§ç‰¹æ€§çœŸçš„ç›¸å½“
æœ‰ç”¨</p>
<h2 id="useful-keybindings">Useful Keybindings</h2>
<p>Eshell åšäº†å¾ˆå¤šä¸Eamcs è¿›è¡Œäº¤äº’çš„åŠŸèƒ½çš„æ”¹è¿›ï¼Œè€Œä¸”ï¼Œè¿™äº›æ”¹è¿›è¶³ä»¥å½±å“ä½ çš„ç”Ÿæ´»
è´¨é‡ï¼Œè®©æˆ‘ä¸ºä½ ä¸€ä¸€é“æ¥ï¼š</p>
<h3 id="c-c-m-b">C-c M-b</h3>
<p>å°†å·²ç»æŸä¸ªç¼“å†²åŒºçš„åå­—æ’å…¥åˆ°å½“å‰å…‰æ ‡</p>
<h3 id="c-c-m-i">C-c M-i</h3>
<p>å°†å·²ç»æŸä¸ªè¿›ç¨‹çš„åå­—æ’å…¥åˆ°å½“å‰å…‰æ ‡</p>
<h3 id="c-c-m-v">C-c M-v</h3>
<p>å°†ä¸€ä¸ªç¯å¢ƒå˜é‡çš„åå­—æ’å…¥åˆ°å½“å‰å…‰æ ‡</p>
<h3 id="c-c-m-d">C-c M-d</h3>
<p>åœ¨ç›´æ¥è¾“å…¥å’Œå»¶è¿Ÿè¾“å…¥(å›è½¦ç¡®è®¤)ä¹‹é—´åˆ‡æ¢ (å¯¹ä¸èƒ½ä¸æ¥æºäºå…¶ä»–ç¼“å†²åŒºçš„è¾“å…¥æ­£å¸¸å·¥ä½œ
çš„å‘½ä»¤æ¥è¯´å°±å¾ˆæœ‰ç”¨äº†)</p>
<h2 id="argument-predicates">Argument Predicates</h2>
<p>å‚æ•°è°“è¯æ˜¯ä¸€ä¸ªå¾ˆæ“…é•¿è¿‡æ»¤æ–‡ä»¶ï¼Œç”šè‡³elispåˆ—è¡¨çš„å·¥å…·ã€‚</p>
<p>Eshellçš„è°“è¯è¯­æ³•æ˜¯å‚ç…§zsh çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç†Ÿæ‚‰zshçš„å‚æ•°è°“è¯ï¼Œä½ ä¹Ÿå¯ä»¥ä»¥åŒæ ·çš„æ–¹å¼æ¥ä½¿ç”¨Eshell.</p>
<p>ä¸Eshell ç»å¤§éƒ¨åˆ†è¿¥å¼‚çš„æ˜¯ï¼Œå‚æ•°è°“è¯æ˜¯æœ‰è¯¦ç»†çš„æ–‡æ¡£çš„ã€‚ä½ å¯ä»¥é€šè¿‡è¾“å…¥ <code>eshell-display-predicate-help</code></p>
<p>æˆ–è€… <code>eshell-display-modifier-help</code> æ¥æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£å‚æ•°è°“è¯ç”¨æ¥è¿‡æ»¤æœ‰ç›¸åŒæ¨¡å¼çš„æ–‡ä»¶æ˜¯å¾ˆæœ‰ç”¨ï¼Œä½ ä¸éœ€å†èŠ±è´¹é¢å¤–çš„æ—¶é—´æ¥ä½¿ç”¨è¯¸å¦‚ <code>find</code> <code>ls</code> æ­¤ç±»å‘½ä»¤ã€‚</p>
<p>è™½ç„¶æœ‰å¸®åŠ©æ‰‹å†Œï¼Œä½†æ˜¯æ‰‹å†Œè¿˜æ˜¯å¾ˆç®€å•ï¼Œä¸å°½äººæ„ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±æ€»ç»“äº†ä¸€äº›ç”¨æ³•æ¥å¸®åŠ©è¯»è€…äº†è§£ç›¸å…³ç‰¹æ€§ã€‚</p>
<p>ä½†æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹æ³•è¿˜æ˜¯å¤šå°è¯•ï¼Œå¤šå‡ºé”™ï¼Œå¤šæ€»ç»“</p>
<h3 id="syntax-reference">Syntax Reference</h3>
<p>æˆ‘å°±ä¸æŠŠé‚£ä¹ˆå¤šçš„è°“è¯å’Œä¿®é¥°ç¬¦ä¸€ä¸€åˆ—å‡ºæ¥äº†ï¼Œå› ä¸ºEshell çš„æ‰‹å†Œå·²ç»ä½œäº†å¾ˆè¯¦ç»†çš„è§£é‡Šäº†ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯è‡ªå·±æŸ¥çœ‹</p>
<h3 id="globbing">Globbing</h3>
<p>Eshell çš„åŒ¹é…æ¨¡å¼å’Œå…¶ä»–å¸¸ç”¨shell çš„æ˜¯åŸºæœ¬ä¸€è‡´æ»´ï¼šshell ä¼šæ‰©å±•æ–‡ä»¶å’Œè·¯å¾„çš„åŒ¹é… æ¨¡å¼ï¼Œç„¶åå°†åŒ¹é…åçš„åˆ—è¡¨å½“ä½œå‚æ•°ä¼ é€’ç»™ç›¸åº”çš„å‘½ä»¤ï¼Œä¾‹å¦‚ <code>ls</code>.</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ ä¸€èµ·ä½¿ç”¨ <code>find</code> å’Œ <code>xargs</code> å‘½ä»¤çš„æ—¶å€™ï¼Œæœ€å¥½è¦æŠŠ <code>-print0</code> ä¼ é€’ç»™ <code>find</code> å¹¶ä¸”æŠŠ <code>-0</code>
ä¼ é€’ç»™ <code>xargs</code>.</p>
<p>å› ä¸ºå¦‚æœä½ ä¸è¿™æ ·åšçš„è¯ï¼Œæ–‡ä»¶åæˆ–è€…è·¯å¾„åä¸­çš„ç‰¹æ®Šå­—ç¬¦æˆ–è€…ç©ºæ ¼å°±ä¼š è®© <code>xargs</code> ä¸çŸ¥é“å¦‚ä½•æ­£ç¡®åœ°å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨ <code>NUL</code> å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä¿è¯å­—ç¬¦å¯ä»¥è¢«æ­£ç¡®åœ°æ ‡è®°ï¼Œå¹¶ä¸”æ–‡ä»¶ä¸­ç´§è·Ÿç€ <code>/</code> çš„ <code>NUL</code> å­—ç¬¦ä¼šè¢«æ ‡è®°ä¸ºæ— æ•ˆå­—ç¬¦</p>
<h3 id="elisp-lists">Elisp Lists</h3>
<p>å¦‚æœä½ æŠŠEshell çš„åˆ—è¡¨ç†è§£æˆè¾“å‡ºçš„ <code>form</code> çš„elispåˆ—è¡¨ï¼Œä½ ä¼šå‘ç°ç†è§£èµ·æ¥å˜å¾—å®¹æ˜“å› ä¸ºäº‹å®ä¸ŠEshell æ˜¯å¯ä»¥é€šè¿‡Elisp æ¥å¤„ç†åˆ—è¡¨çš„ï¼Œè€Œå¤„ç†åˆ—è¡¨æ°æ°æ˜¯Lisp æ“…é•¿çš„ä¸œè¥¿æœ€ç®€å•çš„æ¨¡å¼æ‰©å±•å°±æ˜¯ <code>echo *</code>,è¯¥å‘½ä»¤ä¼šæŠŠå½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶ä»¥åˆ—è¡¨çš„å½¢å¼ æ‰“å°å‡ºæ¥ã€‚</p>
<p>å› ä¸ºï¼Œæ­£å¦‚æˆ‘å…ˆå‰æåŠçš„é‚£æ ·ï¼Œé€šé…ç¬¦æ‰©å±•æ˜¯åŒæ­¥ä¸€è‡´è¿›è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥åœ¨ åœ¨ä½¿ç”¨ <code>*</code> çš„åŒæ—¶å†ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¿®é¥°ç¬¦ã€‚</p>
<p>ä¾‹å¦‚: æˆ‘ä»¬æŠŠå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åå˜æˆå¤§å†™çš„å½¢å¼ï¼Œå¹¶ä»¥åˆ—è¡¨çš„å½¢å¼æ‰“å°å‡ºæ¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ <span class="nb">echo</span> *<span class="o">(</span>:U<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span><span class="s2">&#34;BAR&#34;</span> <span class="s2">&#34;BIN/&#34;</span> <span class="s2">&#34;DEV/&#34;</span> <span class="s2">&#34;ETC/&#34;</span> <span class="s2">&#34;FOO&#34;</span> <span class="s2">&#34;HOME/&#34;</span> <span class="s2">&#34;LIB/&#34;</span> <span class="s2">&#34;TMP/&#34;</span> <span class="s2">&#34;USR/&#34;</span> <span class="s2">&#34;VAR/&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ï¼Œæˆ‘æ˜¯æ€æ ·åœ¨ä½¿ç”¨æ¨¡å¼æ‰©å±•çš„åŒæ—¶ä½¿ç”¨ <code>()</code>.è¿™å¯¹æ‹¬å·å¯ä»¥è®©ä½ ä½¿ç”¨å‚æ•°ä¿®é¥°ç¬¦æˆ–è€… æ˜¯è°“è¯ã€‚</p>
<p>ä¿®é¥°ç¬¦æ˜¯å¯ä»¥ä¿®é¥°ä½ çš„ç»“æœåˆ—è¡¨çš„(å¾ˆæƒŠè®¶å§).</p>
<p>ä¿®é¥°ç¬¦æ€»æ˜¯ä»¥å†’å· <code>:</code> å¼€å¤´æ»´ï¼Œ è€Œè°“è¯å´ä¸ä¸€æ ·ã€‚</p>
<p>æˆ‘ä¼šå±•ç¤ºå¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œè¿™æ¬¡è¿™ä¸ªä¾‹å­æˆ‘ä¼šä½¿ç”¨è°“è¯æ¥è¿‡æ»¤ç›®å½•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ <span class="nb">echo</span> *<span class="o">(</span>^/<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span><span class="s2">&#34;bar&#34;</span> <span class="s2">&#34;foo&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ª <code>^</code> åœ¨ä¸Šé¢çš„å‘½ä»¤çš„ä½œç”¨ï¼Œæ˜¯è·Ÿåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸€æ ·ï¼Œç”¨ä½œå–åï¼Œè€Œæ–œæ çš„ä½œç”¨ <code>/</code>
æ˜¯åªä»£è¡¨ç›®å½•ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä½œç”¨å°±æ˜¯æ‰“å°æ‰€æœ‰æ–‡ä»¶</p>
<p>å¯¹äºä¿®é¥°ç¬¦å’Œè°“è¯ï¼Œæˆ‘ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨æ¨¡å¼æ‰©å±•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ <span class="nb">echo</span> <span class="o">(</span><span class="s2">&#34;foo&#34;</span> <span class="s2">&#34;bar&#34;</span> <span class="s2">&#34;baz&#34;</span> <span class="s2">&#34;foo&#34;</span><span class="o">)(</span>:gs/foo/blarg<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span><span class="s2">&#34;blarg&#34;</span> <span class="s2">&#34;bar&#34;</span> <span class="s2">&#34;baz&#34;</span> <span class="s2">&#34;blarg&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ¬¡æˆ‘æ˜¯æŠŠæ‰€æœ‰çš„ <code>foo</code> ä»£æ›¿ä¸º <code>blarg</code>.</p>
<p>ä½ å¯ä»¥å‘ç°è¯­æ³•æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯è¿™æ¬¡æˆ‘ä¸æ˜¯ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è·å–æ–‡ä»¶åˆ—è¡¨ï¼Œè€Œæ˜¯ç›´æ¥è¾“å…¥æ–‡ä»¶çš„åˆ—è¡¨.</p>
<p>ä½¿ç”¨å‚æ•°è°“è¯å’Œä¿®é¥°ç¬¦çš„å¥½å¤„æ˜¯ä½ å¤§å¤§å‡å°‘äº†è¾“å…¥çš„å‘½ä»¤è¡Œæ•°é‡ï¼Œå› ä¸ºç”¨è°“è¯å¯ä»¥å¤„ç†æƒé™ ï¼Œå±ä¸»ï¼Œæ–‡ä»¶å±æ€§ï¼Œç”šè‡³æ›´å¤šæ–¹é¢çš„é—®é¢˜</p>
<h3 id="adding-new-modifiers-and-predicates">Adding New Modifiers and Predicates</h3>
<p>ä½ ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±çš„è°“è¯ (<code>eshell-predicate-alist</code>)æˆ–è€…ä¿®é¥°ç¬¦ (<code>eshell-modifier-alist</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;eshell-modifier-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="sc">?X</span> <span class="o">.</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">lambda</span><span class="p">(</span><span class="nv">lst</span><span class="p">)(</span><span class="nf">mapcar</span> <span class="ss">&#39;rot13</span> <span class="nv">lst</span><span class="p">))))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘å·²ç»å°† <code>rot13</code> ç»‘å®šåˆ° <code>X</code> äº†ï¼Œæ›¿æ¢ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ <span class="nb">echo</span> <span class="o">(</span><span class="s2">&#34;foo&#34;</span> <span class="s2">&#34;bar&#34;</span> <span class="s2">&#34;baz&#34;</span><span class="o">)(</span>:X<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span><span class="s2">&#34;sbb&#34;</span> <span class="s2">&#34;one&#34;</span> <span class="s2">&#34;onm&#34;</span><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="plan-9-smart-shell">Plan 9 Smart Shell</h2>
<p>Eshell æœ‰ä¸€ä¸ª <code>Plan 9</code> ç»ˆç«¯çš„å¼±åŒ–ç‰ˆï¼Œå«åš <strong>the Eshell smart display</strong>.</p>
<p>Eshell çš„æ™ºèƒ½å±•ç¤º(smart display)æ„å‘³ç€å®ƒæ”¹è¿›äº†æ‰€æœ‰é»‘å®¢æ‰€ä¹ æƒ¯çš„ <strong>è¾“å…¥ï¼è¿è¡Œï¼ä¿®æ”¹</strong> å·¥ä½œæµç¨‹ã€‚</p>
<p>æ™ºèƒ½å±•ç¤ºç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼ŒEshell çš„å…‰æ ‡ä¸ä¼šåƒæ™®é€šçš„shellé‚£æ ·ï¼Œè½åœ¨ä½ è¿è¡Œ
çš„å‘½ä»¤çš„è¾“å‡ºåé¢ï¼›</p>
<p>ç›¸åï¼Œå…‰æ ‡çš„ä½ç½®ä¼šä¿æŒåœ¨ä½ è¾“å…¥å‘½ä»¤çš„ä½ç½®ï¼Œè®©ä½ å¯ä»¥é€šè¿‡ <code>M-p</code> <code>M-n</code> æˆ–è€…å…¶ä»–ä¿®æ”¹å†å²çš„å‘½ä»¤æ›´å®¹æ˜“åœ°ä¿®æ”¹ä½ è¾“å…¥çš„å‘½ä»¤.</p>
<p>å¦‚æœä½ å¯ç”¨äº† <code>smart display</code> æ¨¡å¼ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>SPC</code> å‘ä¸‹ç¿»é¡µï¼Œæˆ–è€…ä½¿ç”¨ <code>BACKSPACE</code>
å‘ä¸Šç¿»é¡µæ¥æŸ¥çœ‹é‚£äº›é•¿æ—¶é—´è¿è¡Œçš„å‘½ä»¤çš„è¾“å‡ºã€‚</p>
<p>å¦‚æœä½ æŒ‰ä¸‹äº†ä»»ä½•å…¶å®ƒçš„æŒ‰é”®ï¼Œå…‰æ ‡ä¼šç›´æ¥è·³åˆ°ä½ ç¼“å†²åŒºçš„ç»“å°¾ï¼Œå°±å¥½åƒä½ æ²¡æœ‰å¯ç”¨ <code>smart display</code> è¿è¡Œå‘½ä»¤æ—¶é‚£æ ·</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœEshell æ£€æµ‹åˆ°ä½ æƒ³å›é¡¾æœ€åä¸€æ¡æ‰§è¡Œçš„å‘½ä»¤æ—¶ï¼ŒEshell ä¼šå¾ˆè´´å¿ƒåœ°å¸®ä½ å›é¡¾çš„ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æ²¡æœ‰è¿™æ ·çš„è¡Œä¸ºï¼ŒEshell çš„å…‰æ ‡ä¼šç›´æ¥è·³è½¬åˆ°ç¼“å†²åŒºçš„ç»“å°¾.</p>
<p>è¿™ä¹ˆçœ‹æ¥ï¼ŒEshellçœŸçš„å¾ˆæ™ºèƒ½ï¼Œè€Œä¸”å®ƒä¹Ÿæœ‰ä¸€äº›è®¾ç½®å¯ä»¥è®©ä½ å¾®è°ƒç›¸å…³çš„è¡Œä¸ºã€‚</p>
<p>ä½ ä¼šå‘ç°æ™ºèƒ½æ˜¾ç¤º (smart display)çœŸçš„éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯ä½ å¯ä»¥é€šè¿‡ç§»åŠ¨æŒ‰é”®å°±èƒ½ä¿®æ”¹</p>
<p>åˆšåˆšæ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼›ä¾‹å¦‚ä¿®æ”¹æ‹¼å†™é”™è¯¯çš„å‘½ä»¤æˆ–è€…æ˜¯ç»™ç›¸åº”çš„å‘½ä»¤æ·»åŠ å‚æ•°, æ™ºèƒ½æ˜¾ç¤ºè¿˜å¯ä»¥è¢«è®¾ç½®æˆå½“å‘½ä»¤æˆåŠŸæ‰§è¡Œæ—¶ï¼Œä¸ä½¿ç”¨æ‰©å±•çš„ <code>edit mode</code>;å¹¶ä¸”éšè—å‘½ä»¤è¾“å‡º, å°±å¥½åƒä½ æ‰§è¡Œ <code>chown</code> é‚£æ ·ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘å–œæ¬¢çš„ç©æ³•ï¼Œå¦‚æœä½ ä¹Ÿæƒ³è¯•è¯•è¿™ç§ç©æ³•ï¼Œä½ å¯ä»¥æŠŠä¸‹é¢çš„elisp ä»£ç æ·»åŠ åˆ°ä½ çš„ <code>.emacs</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;eshell</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;em-smart</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-where-to-jump</span> <span class="ss">&#39;begin</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-review-quick-commands</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-smart-space-goes-to-end</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœEshell å·²ç»è¢«åˆå§‹åŒ–(å³ä½ å·²ç»åœ¨Emacsè¿è¡Œäº†ä¸€ä¸ªEshellå®ä¾‹),é‚£æ ·çš„è¯ï¼Œè¿è¡Œ
ä¸Šé¢çš„ä»£ç æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ã€‚</p>
<p>ä½ å¿…é¡»åœ¨Eshell é‡Œé¢æŒ‰ä¸‹ <code>M-:</code> ç„¶åè¾“å…¥ <code>(shell-smart-initialize)</code> ,æˆ–è€…ç›´æ¥é‡å¯Emacs
æ™ºèƒ½æ˜¾ç¤ºçœŸçš„æ˜¯éå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯ä½ ä¸€æ—¶åŠåˆ»æ˜¯å¾ˆéš¾å®Œå…¨é¢†ä¼šå…¶å…¨éƒ¨çš„ç²¾å¦™ä¹‹å¤„æ»´ã€‚</p>
<p>ä½ ç›´æ¥è¾“å…¥ä¸€ä¸ªå‘½ä»¤ï¼ŒEshellçš„å…‰æ ‡å°±ä¼šè·³è½¬åˆ°ç¼“å†²åŒºçš„ç»“å°¾ï¼Œæ‰€ä»¥ä½ ä¼šè§‰å¾—å…‰æ ‡ä¼¼ä¹æœ¬æ¥å°±åœ¨é‚£é‡Œ</p>
<h2 id="redirection">Redirection</h2>
<p>Eshell çš„é‡å®šå‘è·Ÿå…¶å®ƒshell çš„å·¥ä½œæ–¹å¼åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ï¼Œæœ‰ä¸€é¡¹éå¸¸é‡è¦çš„å·®å¼‚å°±æ˜¯Eshell å¿…é¡»æ¨¡æ‹Ÿå¯èƒ½ä¸å­˜åœ¨çš„ä¼ªè®¾å¤‡ï¼Œä¾‹å¦‚Windows å¹³å°ä¸Šçš„ <code>/dev/null</code> å…¶å®æ˜¯ <code>NUL</code></p>
<p>å¦å¤–ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼šè™½ç„¶Eshell æ”¯æŒé‡å®šå‘ï¼Œä½†æ˜¯åªæ˜¯æ”¯æŒè¾“å‡ºé‡å®šå‘ï¼Œæ˜¯ ä¸æ”¯æŒè¾“å…¥é‡å®šå‘çš„ã€‚</p>
<p>ä¸ºäº†é¿å…è·³è¿›è¾“å…¥é‡å®šå‘è¿™ä¸ªå‘ï¼Œä½ æœ€å¥½ä½¿ç”¨ç®¡é“ã€‚</p>
<p>é‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ æ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯éƒ½æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œæ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é‡å®šå‘åˆ°å¤šä¸ªç›®æ ‡ï¼Œå¾ˆä¸é”™çš„ç‰¹æ€§å§</p>
<h2 id="to-emacs">To Emacs</h2>
<p>å› ä¸ºEshell åœ¨å†…éƒ¨ç”¨Elispé‡æ–°å®ç°äº†å„ç§ä¼ªè®¾å¤‡ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— éœ€è·ŸUnix çš„è®¾å¤‡æ–‡ä»¶æ‰“äº¤é“äº†ï¼Œç”šè‡³ï¼Œå¯ä»¥ç”¨Elispå®ç°è‡ªå·±çš„ä¼ªè®¾å¤‡ã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯ï¼Œä½ å¯ä»¥æŠŠé‡å®šå‘åˆ°ä¸€ä¸ªä½ é€‰æ‹©çš„ç¼“å†²åŒºï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å°±èƒ½å®ç°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ cat mylog.log &gt;&gt; <span class="c1">#&lt;buffer *scratch*&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä¹‹å‰æåˆ°çš„å¿«æ·é”® <code>C-c M-b</code> å°±æ˜¯å¯ä»¥æŠŠä¸€ä¸ªé€‰å®šçš„ç¼“å†²åŒºçš„åå­—æ’å…¥åˆ°å…‰æ ‡å‰</p>
<p>æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¾“å‡ºç›´æ¥é‡å®šå‘åˆ°Elisp çš„ç¬¦å·(ä¸è¿‡æ³¨æ„ï¼Œä¸è¦æ‰§è¡Œé”™è¯¯çš„è®¾ç½®)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/ $ <span class="nb">echo</span> foo bar baz &gt; <span class="c1">#&#39;myvar</span>
</span></span><span class="line"><span class="cl">/ $ <span class="nb">echo</span> <span class="k">$(</span>cadr myvar<span class="k">)</span>
</span></span><span class="line"><span class="cl">bar
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ å°†å˜é‡ <code>eshell-buffer-shorthand</code> è®¾ç½®ä¸º <code>t</code> çš„è¯ã€‚</p>
<p>ä½ å°±å¯ä»¥ä½¿ç”¨ç¼“å†²åŒºçš„é€Ÿè®°å, ä¾‹å¦‚ <code>#'*scratch*'</code>,ä½†æ˜¯ä½ å°±ä¸èƒ½ç›´æ¥é‡å®šå‘åˆ°Elisp çš„ç¬¦å·äº†</p>
<h2 id="to-pseudo-devices">To Pseudo-Devices</h2>
<p>Eshell é‡æ–°å®ç°äº†ä»¥ä¸‹çš„ä¼ªè®¾å¤‡ï¼š</p>
<h3 id="dev-eshell">/dev/eshell</h3>
<p>ä»¥äº¤äº’çš„æ–¹å¼ï¼ŒæŠŠç»“æœè¾“å‡ºåˆ°Eshell</p>
<h3 id="dev-null">/dev/null</h3>
<p>æŠŠç»“æœè¾“å‡ºåˆ° <code>NULL</code> è®¾å¤‡</p>
<h3 id="dev-clip">/dev/clip</h3>
<p>æŠŠç»“æœè¾“å‡ºåˆ°å‰ªåˆ‡æ¿</p>
<h3 id="dev-kill">/dev/kill</h3>
<p>æŠŠç»“æœè¾“å‡ºåˆ° <code>kill ring</code></p>
<p>è·Ÿé€šç”¨çš„shell ä¸€æ ·ï¼Œä½¿ç”¨ <code>&gt;</code> ä»£è¡¨è¦†ç›–(æˆ–è€…æ–°å»º);ä½¿ç”¨ <code>&gt;&gt;</code> ä»£è¡¨è¿½åŠ </p>
<h3 id="to-custom-virtual-target">To custom virtual target</h3>
<p>ä½ é€šè¿‡ä¿®æ”¹å˜é‡ <code>eshell-virtual-targets</code> åˆ›å»ºè‡ªå·±çš„å¯è§†åŒ–ç›®æ ‡(å³å­˜å‚¨ä½ æƒ³åˆ›å»ºçš„ ä¼ªè®¾å¤‡çš„åå­—çš„ä¸€ä¸ªåˆ—è¡¨),ä»¥åŠä¿®æ”¹ä»£è¡¨é‡å®šå‘è¡Œä¸º(å³è¦†ç›–æˆ–è¿½åŠ æˆ–æ’å…¥)çš„å‡½æ•° <code>mode</code></p>
<h2 id="tramp">TRAMP</h2>
<p>Eshell å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒTRAMP,è¿™æ„å‘³ç€å¦‚æœEshell æ‰€åœ¨çš„ç›®å½•æ˜¯åœ¨è¿œç¨‹æœåŠ¡å™¨çš„è¯ï¼Œ åƒ <code>su</code> <code>sudo</code> <code>whoami</code> è¿™æ ·çš„å‘½ä»¤ä¼šè‡ªåŠ¨ä½œç”¨åœ¨è¿œç¨‹æœåŠ¡å™¨</p>
<p>æƒ³ç›´æ¥ä½¿ç”¨TRAMP,ä½ å¯ä»¥åƒä½¿ç”¨ <code>C-x C-f</code> å¯»æ‰¾æ–‡ä»¶é‚£æ ·è¾“å…¥TRAMPçš„å‘½ä»¤ç¬¦ï¼Œç„¶åä½ å°±å¯ä»¥ä½¿ç”¨TRAMP äº†ã€‚</p>
<p>è™½ç„¶ä½ ä¼šè§‰å¾—Eshellé‡Œé¢ä½¿ç”¨TRAMPæœ‰ç‚¹å¥‡æ€ªï¼Œä½†æ˜¯ä½ çš„ç¡®å¾—åˆ°äº† ä¸€ä¸ªTRAMPçš„è¿œç¨‹shell,ä¸æ˜¯ä¹ˆï¼Ÿ</p>
<p>æ­¤å¤–ï¼Œä½ ä¸åº”æŠŠTRAMPå±€é™åœ¨ä½¿ç”¨è¿œç¨‹shell, ä½ å¯ä»¥åœ¨æœ¬åœ° ä½¿ç”¨ <code>sudo</code> å’Œ <code>su</code> å‘½ä»¤çš„</p>
<p>æœ‰å…³TRAMP çš„æ›´è¯¦ç»†çš„ç”¨æ³•ï¼Œæˆ‘æ€»ç»“åœ¨äº†å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼Œä¸è¿‡å¦‚æœä½ è¿«ä¸åŠå¾…æƒ³äº†è§£æ›´å¤š
æœ‰å…³TRAMPçš„ç”¨æ³•ï¼Œ<a href="http://www.gnu.org/software/tramp/">å®˜æ–¹æ‰‹å†Œ</a> æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©</p>
<h2 id="startup-scripts">Startup Scripts</h2>
<p>è·Ÿå…¶å®ƒçš„shell ä¸€æ ·ï¼ŒEshell ä¹Ÿæ”¯æŒ <code>login</code> å’Œ <code>profile</code> çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><code>login</code> å’Œ <code>profile</code> é…ç½®æ–‡ä»¶çš„ç»å¯¹è·¯å¾„åˆ†åˆ«ä¿å­˜åœ¨å˜é‡ <code>eshell-login-script</code> å’Œ <code>eshell-rc-script</code>
ä¸è¿‡é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸Šè¿°ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½ä¿å­˜åœ¨ <code>~/.eshell/</code>.</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒEshellçš„é…ç½®æ–‡ä»¶ä¹Ÿæ˜¯ä½¿ç”¨ <code>#</code> æ¥æ³¨é‡Šå˜é‡å’Œè¯­å¥çš„</p>
<h2 id="more-customization">More Customization</h2>
<p>å¦‚æœä½ æƒ³æŠ˜è…¾çš„è¯ï¼ŒEshell æœ‰æˆç™¾ä¸Šåƒçš„é€‰é¡¹ä¾›ä½ é€‰æ‹©ã€‚</p>
<p>å¦‚æœä½ æƒ³é…ç½®Eshell çš„è¯ï¼ŒæŒ‰ä¸‹ <code>M-x</code> ç„¶åè¾“å…¥ <code>customize-group</code> å›è½¦ï¼Œç„¶åè¾“å…¥ <code>eshell</code> å›è½¦ç¡®è®¤</p>
<h2 id="conclusion">Conclusion</h2>
<p>é¢ï¼Œæˆ‘è§‰å¾—æˆ‘å·²ç»æ€»ç»“äº†Eshell çš„å¤§éƒ¨ä»½ç”¨æ³•äº†ï¼Œå¸Œæœ›ä½ å¯ä»¥åœ¨å…¶ä¸­å‘ç°ä¹è¶£ã€‚</p>
<p>å› ä¸ºä¸Emacs çš„ç´§å¯†ç»“åˆï¼ŒEshell æœ‰äº†å„ç§å„æ ·çªå‡ºå¥½ç”¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯ä½ éœ€è¦ç†è§£çš„æ˜¯ï¼ŒEshell çš„è¯ç”Ÿä¸æ˜¯
ä¸ºäº†å…¨ç›˜å–ä»£bash æˆ–è€…å…¶å®ƒä½ å–œæ¬¢çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå®ƒåªæ˜¯å¸Œæœ›åœ¨Emacs é‡Œé¢å°±å¯ä»¥å®Œæˆæˆ‘ä»¬
æ—¥å¸¸å¿…éœ€çš„å‘½ä»¤è¡Œæ“ä½œã€‚</p>
<p>å¦‚æœä½ è¦è¿è¡Œå¾ˆå¤šäº¤äº’å¼çš„å‘½ä»¤ï¼ŒEshell å°±å¯èƒ½ä¸æ˜¯å¾ˆæœ‰ç”¨äº† å› ä¸ºä¸ºäº†è¿è¡Œä½ è¾“å…¥çš„æ¯ä¸€æ¡å¯è§†åŒ–å‘½ä»¤ï¼ŒEshell éƒ½ä¼šåœ¨Emacs é‡Œé¢å¯åŠ¨ä¸€ä¸ªæ–°çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚</p>
<p>Eshell æœ‰TRAMPæ”¯æŒï¼Œè‡ªå®šä¹‰ä¼ªè®¾å¤‡ï¼Œè¢–ççš„elisp REPLå’Œå¾ˆå¤šéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œä¾‹å¦‚å¯¹ä½ æ‰“å¼€çš„æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œè°ƒç”¨ <code>find-file</code> æˆ–è€… <code>dired</code>.æ­£æ˜¯è¿™ç§ç§æœ‰ç”¨çš„ç‰¹æ€§ï¼Œ è®©Eshell æˆä¸ºæˆ‘å·¥å…·ç®±é‡Œé¢ä¸€ä¸ªéå¸¸å¯é çš„å·¥å…·ã€‚</p>
<p>åŸæ–‡åœ°å€ <a href="https://www.masteringemacs.org/article/complete-guide-mastering-eshell">Mastering Eshell</a> ,åœ¨ä¸‹ç¿»è¯‘æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜æœ›æŒ‡å‡º</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>æé«˜Emacså¯åŠ¨é€Ÿåº¦</title>
      <link>https://ramsayleung.github.io/zh/post/2016/emacs_startup/</link>
      <pubDate>Sat, 22 Oct 2016 00:00:00 -0700</pubDate>
      <guid>https://ramsayleung.github.io/zh/post/2016/emacs_startup/</guid>
      <description>Tips to reduce emacs startup time</description>
      <content:encoded><![CDATA[<p>ä¹‹å‰çœ‹åˆ°ä¸ªç¬‘è¯ï¼š</p>
<blockquote>
<ul>
<li>A: åœ¨ç­‰å¾…emacs åŠ è½½çš„æ—¶é—´é‡Œï¼Œä½ ä¼šå¹²ä»€ä¹ˆï¼Ÿ</li>
<li>B: æ‰“å¼€Vim,ä¿®æ”¹ä»£ç ï¼Œä¿å­˜ï¼Œé€€å‡º</li>
</ul></blockquote>
<p>æœ‰æ—¶å€™ï¼Œç»å¸¸çœ‹åˆ°ç¤¾åŒºé‡Œé¢æœ‰äººåå˜ˆEmacs ä»€ä¹ˆéƒ½å¥½ï¼Œå°±æ˜¯å¯åŠ¨æ—¶é—´å¤ªé•¿äº†ï¼Œå…¶å®æ˜¯å­˜åœ¨ä¸€äº›æŠ€å·§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´çš„</p>
<h2 id="æŠ€å·§1"><span class="section-num">1</span> æŠ€å·§1</h2>
<p>åœ¨ä½ çš„ <code>.emacs</code> æˆ–è€…ç›¸åº”çš„åˆå§‹åŒ–æ–‡ä»¶é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">Increase</span> <span class="nv">the</span> <span class="nv">garbage</span> <span class="nv">collection</span> <span class="nv">threshold</span> <span class="nv">to</span> <span class="mi">128</span> <span class="nv">MB</span> <span class="nv">to</span> <span class="nv">ease</span> <span class="nv">startup</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">128</span> <span class="mi">1024</span> <span class="mi">1024</span> <span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">your</span> <span class="nv">configuration</span> <span class="nv">code</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="o">......</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">Garbage</span> <span class="nv">collector-decrease</span> <span class="nv">threshold</span> <span class="nv">to</span> <span class="mi">5</span> <span class="nv">MB</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">5</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nv">init.el</span> <span class="nv">ends</span> <span class="nv">here</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>gc-cons-threshold</code> æŒ‡å®šäº†emacs è¿›è¡Œåƒåœ¾å›æ”¶çš„é˜€å€¼ï¼Œé»˜è®¤å€¼æ˜¯ <code>800000byte</code>,å®åœ¨æ˜¯å¤ªå°äº†ï¼Œæ‰€ä»¥Emacs ä¼šåœ¨å¯åŠ¨æœŸé—´è¿›è¡Œéå¸¸å¤šæ¬¡çš„åƒåœ¾å›æ”¶ï¼Œå¯åŠ¨æ—¶é—´è‡ªç„¶é•¿äº†ã€‚</p>
<p>åœ¨åŠ è½½å®Œä»¥åï¼Œå†æŠŠ <code>gc-cons-threshold</code> çš„å€¼è°ƒä½ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ çš„å†…å­˜å¾ˆå¤§ï¼Œä¹Ÿå¯ä»¥ä¸æ”¹å›æ¥</p>
<h2 id="æŠ€å·§2"><span class="section-num">2</span> æŠ€å·§2</h2>
<p><code>(let((file-name-hander-alist nil))init.file)</code> åŒ…è£¹(wrap)ä½ çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œå³ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">500</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">file-name-handler-alist</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">**</span> <span class="nv">your</span> <span class="nv">config</span> <span class="nv">goes</span> <span class="nv">here</span> <span class="nv">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;after-init-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="p">(</span><span class="nf">*</span> <span class="mi">5</span> <span class="mi">1024</span> <span class="mi">1024</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">;;; init.el ends here</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸º <code>file-name-handler-alist</code> çš„é»˜è®¤å€¼æ˜¯ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´Emacs åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åŠ è½½elå’Œelc æ–‡ä»¶éƒ½ä¼šå°†æ–‡ä»¶åå’Œæ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…</p>
<h2 id="æŠ€å·§3"><span class="section-num">3</span> æŠ€å·§3</h2>
<p>Emacs lisp æœ‰ä¸€é¡¹auto-load çš„æŠ€æœ¯ï¼Œç±»ä¼¼å»¶è¿ŸåŠ è½½ï¼Œåˆç†è¿ç”¨å»¶è¿Ÿï¼Œè®©ç¬”è€…çš„Emacså¯åŠ¨åŠ è½½æ—¶é—´å‡å°‘ä¸€åŠï¼Œå› ä¸ºç¬”è€…ç”¨ <code>use-package</code> è¿™ä¸ªmacro,è€Œ <code>use-package</code> åˆé›†æˆäº†å»¶è¿ŸåŠ è½½çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ç¬”è€…å°±ç›´æ¥æ‹¿è‡ªå·±çš„ä»£ç ä¸¾ä¾‹äº†</p>
<h3 id="after"><span class="section-num">3.1</span> :after</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="c1">;;; Export to twitter bootstrap</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-twbs</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:after</span> <span class="nv">org</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="nv">ox-twbs</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>:after</code> å…³é”®å­—çš„ä½œç”¨åŸºæœ¬è·Ÿ <code>with-eval-after-load</code> çš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ç¬”è€…æ‰€
æœ‰ç±»ä¼¼çš„org-mode æ’ä»¶åŒ…éƒ½ä¼šåœ¨org-mode åŠ è½½ä»¥åæ‰ä¼šåŠ è½½</p>
<h3 id="commands"><span class="section-num">3.2</span> :commands</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">avy</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:commands</span> <span class="p">(</span><span class="nv">avy-goto-char</span> <span class="nv">avy-goto-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œå°±è´´ä¸Š<a href="https://github.com/jwiegley/use-package">use-package</a>æ–‡æ¡£ çš„è¯´æ˜äº†</p>
<blockquote>
<p>When you use the :commands keyword, it creates autoloads for those commands
and defers loading of the module until they are used</p></blockquote>
<p>ä¹Ÿå°±æ˜¯ <code>:commands</code> å…³é”®å­—å°±åˆ›å»ºäº†åé¢æ‰€æ¥çš„å‘½ä»¤çš„ <code>autoloads</code> æœºåˆ¶äº†</p>
<h3 id="bind-mode"><span class="section-num">3.3</span> :bind :mode</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">hi-lock</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;M-o l&#34;</span> <span class="o">.</span> <span class="nv">highlight-lines-matching-regexp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o r&#34;</span> <span class="o">.</span> <span class="nv">highlight-regexp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="s">&#34;M-o w&#34;</span> <span class="o">.</span> <span class="nv">highlight-phrase</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">vue-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:mode</span> <span class="p">(</span><span class="s">&#34;\\.vue\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">vue-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:config</span> <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nb">setq</span> <span class="nv">mmm-submode-decoration-level</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™„ä¸Šæ–‡æ¡£è¯´æ˜</p>
<blockquote>
<p>In almost all cases you don&rsquo;t need to manually specify :defer t. This is implied
whenever :bind or :mode or :interpreter is used</p></blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ ä½¿ç”¨äº† <code>:bind</code> æˆ–è€… <code>:mode</code> å…³é”®å­—çš„æ—¶å€™ï¼Œä¸ç”¨æ˜ç¡®æŒ‡å®š <code>:defer</code> ä¹Ÿå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚</p>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ï¼Œç›´æ¥ä½¿ç”¨ <code>:defer</code> å…³é”®å­—æ¥æŒ‡å®šå»¶è¿ŸåŠ è½½. ä¸è¿‡å‰ææ˜¯ï¼Œä½ è¦æ˜ç¡®å®ƒåŠ è½½çš„æ—¶æœº</p>
<blockquote>
<p>Typically, you only need to specify :defer if you know for a fact that some
other package will do something to cause your package to load at the appropriate
time, and thus you would like to defer loading even though use-package isn&rsquo;t
creating any autoloads for you.</p></blockquote>
<p>è´´ä¸Šç¬”è€…è‡ªå·±çš„ä»£ç ï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">anaconda-mode</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">  <span class="nb">:init</span><span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;anaconda-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;anaconda-eldoc-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ · <code>anaconda-mode</code> å°±ä¼šåœ¨ <code>python-mode</code> åŠ è½½ä»¥åè¢«åŠ è½½</p>
<p>Enjoy Emacs :)</p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
  </channel>
</rss>
