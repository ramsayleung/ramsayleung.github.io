<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Hbase on è¿‡æ²³å’</title>
    <link>http://localhost:1313/zh/categories/hbase/</link>
    <description>Recent content in Hbase on è¿‡æ²³å’</description>
    <image>
      <title>è¿‡æ²³å’</title>
      <url>http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.146.7</generator>
    <language>zh</language>
    <copyright>See this site&amp;rsquo;s source code here, licensed under GPLv3 Â·</copyright>
    <lastBuildDate>Thu, 24 Feb 2022 22:29:04 +0800</lastBuildDate>
    <atom:link href="http://localhost:1313/zh/categories/hbase/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>è®°å­˜å‚¨é›†ç¾¤çš„ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ï¼ˆä¸‹ï¼‰</title>
      <link>http://localhost:1313/zh/post/2018/store_cluster_migrate2/</link>
      <pubDate>Fri, 09 Mar 2018 13:55:00 +0800</pubDate>
      <guid>http://localhost:1313/zh/post/2018/store_cluster_migrate2/</guid>
      <description>&lt;p&gt;ä»Mysql, Hbase è¿ç§»æ•°æ®&lt;/p&gt;
&lt;h2 id=&#34;mysql-æ•°æ®è¿ç§»&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Mysql æ•°æ®è¿ç§»&lt;/h2&gt;
&lt;p&gt;æ­å»ºå®Œä¹‹åå°±æ˜¯æ•°æ®è¿ç§»äº†ï¼Œmysql çš„æ•°æ®è¿ç§»æ¯”è¾ƒç®€å•ã€‚åœ¨æ—§çš„æœºå™¨ç”¨ mysqldump æŠŠæ‰€ æœ‰çš„æ•°æ®å¯¼å‡ºæ¥ï¼Œç„¶åä¼ åˆ°æ–°çš„ç¯å¢ƒç„¶åå¯¼å‡ºï¼š&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>ä»Mysql, Hbase è¿ç§»æ•°æ®</p>
<h2 id="mysql-æ•°æ®è¿ç§»"><span class="section-num">1</span> Mysql æ•°æ®è¿ç§»</h2>
<p>æ­å»ºå®Œä¹‹åå°±æ˜¯æ•°æ®è¿ç§»äº†ï¼Œmysql çš„æ•°æ®è¿ç§»æ¯”è¾ƒç®€å•ã€‚åœ¨æ—§çš„æœºå™¨ç”¨ mysqldump æŠŠæ‰€ æœ‰çš„æ•°æ®å¯¼å‡ºæ¥ï¼Œç„¶åä¼ åˆ°æ–°çš„ç¯å¢ƒç„¶åå¯¼å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">æ—§ç¯å¢ƒå¯¼å‡º: mysqldump -u root -p --all-databases &gt; all_dbs.sql
</span></span><span class="line"><span class="cl">æ–°ç¯å¢ƒå¯¼å…¥: mysql -u root -p &lt; all_dbs.sql
</span></span></code></pre></td></tr></table>
</div>
</div><p>Mysql é›†ç¾¤åœ¨æ•°æ®è¿ç§»çš„æ—¶å€™æ˜¯åœ¨æä¾›æœåŠ¡çš„ï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæœ‰æ–°æ•°æ®å†™å…¥ï¼Œä½†å› ä¸ºæ˜¯æµ‹è¯•ç¯ å¢ƒï¼Œæ‰€ä»¥åœ¨è¿ç§»è¿‡ç¨‹ä¸­å¯ä»¥å¿½ç•¥æ–°æ•°æ®å†™å…¥çš„å½±å“ã€‚ä¸ç„¶è¿™åˆä¼šæ˜¯ä¸€ä¸ªå¤§é—®é¢˜~</p>
<h2 id="hbase-æ•°æ®è¿ç§»"><span class="section-num">2</span> Hbase æ•°æ®è¿ç§»</h2>
<h3 id="hbase-é›†ç¾¤å¤åˆ¶--cluster-replication"><span class="section-num">2.1</span> Hbase é›†ç¾¤å¤åˆ¶(cluster replication)</h3>
<h4 id="é…ç½®æ—§é›†ç¾¤å’Œæ–°é›†ç¾¤"><span class="section-num">2.1.1</span> é…ç½®æ—§é›†ç¾¤å’Œæ–°é›†ç¾¤</h4>
<p>åœ¨æ–°çš„é›†ç¾¤ï¼Œåˆ›å»ºå’Œæ—§é›†ç¾¤ä¸€æ ·çš„è¡¨ç»“æ„(table schema)å’Œåˆ—æ—(column family),è¿™æ ·æ–°çš„é›†ç¾¤å°±çŸ¥é“åœ¨æ¥æ”¶åˆ°æ—§é›†ç¾¤æ•°æ®æ—¶å€™æ€ä¹ˆå»ä¿å­˜ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„æ­¥éª¤ï¼š</p>
<ol>
<li>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Hbase Shell:</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hbase shell
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è·å–å·²æœ‰çš„è¡¨çš„å…ƒæ•°æ®ï¼š</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hbase&gt; describe <span class="s2">&#34;content&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å…¥ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Table content is ENABLED
</span></span><span class="line"><span class="cl">content, <span class="o">{</span><span class="nv">TABLE_ATTRIBUTES</span> <span class="o">=</span>&gt; <span class="o">{</span>coprocessor<span class="nv">$1</span> <span class="o">=</span>&gt; <span class="s1">&#39;|org.apache.phoenix.coprocessor.ScanRegionObserver|805306366|&#39;</span>, co
</span></span><span class="line"><span class="cl">processor<span class="nv">$2</span> <span class="o">=</span>&gt; <span class="s1">&#39;|org.apache.phoenix.coprocessor.UngroupedAggregateRegionObserver|805306366|&#39;</span>, coprocessor<span class="nv">$3</span> <span class="o">=</span>&gt; <span class="s1">&#39;|or
</span></span></span><span class="line"><span class="cl"><span class="s1">g.apache.phoenix.coprocessor.GroupedAggregateRegionObserver|805306366|&#39;</span>, coprocessor<span class="nv">$4</span> <span class="o">=</span>&gt; <span class="s1">&#39;|org.apache.phoenix.copr
</span></span></span><span class="line"><span class="cl"><span class="s1">ocessor.ServerCachingEndpointImpl|805306366|&#39;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">COLUMN FAMILIES DESCRIPTION
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="nv">NAME</span> <span class="o">=</span>&gt; <span class="s1">&#39;baseinfo&#39;</span>, <span class="nv">DATA_BLOCK_ENCODING</span> <span class="o">=</span>&gt; <span class="s1">&#39;NONE&#39;</span>, <span class="nv">BLOOMFILTER</span> <span class="o">=</span>&gt; <span class="s1">&#39;ROW&#39;</span>, <span class="nv">REPLICATION_SCOPE</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">COMPRESSION</span> <span class="o">=</span>&gt;
</span></span><span class="line"><span class="cl"><span class="s1">&#39;NONE&#39;</span>, <span class="nv">VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;1&#39;</span>, <span class="nv">MIN_VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">TTL</span> <span class="o">=</span>&gt; <span class="s1">&#39;FOREVER&#39;</span>, <span class="nv">KEEP_DELETED_CELLS</span> <span class="o">=</span>&gt; <span class="s1">&#39;FALSE&#39;</span>, <span class="nv">BLOCKSIZE</span> <span class="o">=</span>&gt; <span class="s1">&#39;65536&#39;</span>
</span></span><span class="line"><span class="cl">, <span class="nv">IN_MEMORY</span> <span class="o">=</span>&gt; <span class="s1">&#39;false&#39;</span>, <span class="nv">BLOCKCACHE</span> <span class="o">=</span>&gt; <span class="s1">&#39;true&#39;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="nv">NAME</span> <span class="o">=</span>&gt; <span class="s1">&#39;extrainfo&#39;</span>, <span class="nv">DATA_BLOCK_ENCODING</span> <span class="o">=</span>&gt; <span class="s1">&#39;NONE&#39;</span>, <span class="nv">BLOOMFILTER</span> <span class="o">=</span>&gt; <span class="s1">&#39;ROW&#39;</span>, <span class="nv">REPLICATION_SCOPE</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">COMPRESSION</span> <span class="o">=</span>&gt;
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;NONE&#39;</span>, <span class="nv">VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;1&#39;</span>, <span class="nv">MIN_VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">TTL</span> <span class="o">=</span>&gt; <span class="s1">&#39;FOREVER&#39;</span>, <span class="nv">KEEP_DELETED_CELLS</span> <span class="o">=</span>&gt; <span class="s1">&#39;FALSE&#39;</span>, <span class="nv">BLOCKSIZE</span> <span class="o">=</span>&gt; <span class="s1">&#39;65536
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span>, <span class="nv">IN_MEMORY</span> <span class="o">=</span>&gt; <span class="s1">&#39;false&#39;</span>, <span class="nv">BLOCKCACHE</span> <span class="o">=</span>&gt; <span class="s1">&#39;true&#39;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span> row<span class="o">(</span>s<span class="o">)</span> in 0.3060 seconds
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°ç¼–è¾‘å™¨ï¼Œå¹¶æŒ‰è¦æ±‚è¿›è¡Œä¿®æ”¹ï¼š</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">{</span><span class="nv">NAME</span> <span class="o">=</span>&gt; <span class="s1">&#39;baseinfo&#39;</span>, <span class="nv">DATA_BLOCK_ENCODING</span> <span class="o">=</span>&gt; <span class="s1">&#39;NONE&#39;</span>, <span class="nv">BLOOMFILTER</span> <span class="o">=</span>&gt; <span class="s1">&#39;ROW&#39;</span>, <span class="nv">REPLICATION_SCOPE</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">COMPRESSION</span> <span class="o">=</span>&gt;
</span></span><span class="line"><span class="cl"><span class="s1">&#39;NONE&#39;</span>, <span class="nv">VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;1&#39;</span>, <span class="nv">MIN_VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">TTL</span> <span class="o">=</span>&gt; <span class="s1">&#39;FOREVER&#39;</span>, <span class="nv">KEEP_DELETED_CELLS</span> <span class="o">=</span>&gt; <span class="s1">&#39;FALSE&#39;</span>, <span class="nv">BLOCKSIZE</span> <span class="o">=</span>&gt; <span class="s1">&#39;65536&#39;</span>
</span></span><span class="line"><span class="cl">, <span class="nv">IN_MEMORY</span> <span class="o">=</span>&gt; <span class="s1">&#39;false&#39;</span>, <span class="nv">BLOCKCACHE</span> <span class="o">=</span>&gt; <span class="s1">&#39;true&#39;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="nv">NAME</span> <span class="o">=</span>&gt; <span class="s1">&#39;extrainfo&#39;</span>, <span class="nv">DATA_BLOCK_ENCODING</span> <span class="o">=</span>&gt; <span class="s1">&#39;NONE&#39;</span>, <span class="nv">BLOOMFILTER</span> <span class="o">=</span>&gt; <span class="s1">&#39;ROW&#39;</span>, <span class="nv">REPLICATION_SCOPE</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">COMPRESSION</span> <span class="o">=</span>&gt;
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;NONE&#39;</span>, <span class="nv">VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;1&#39;</span>, <span class="nv">MIN_VERSIONS</span> <span class="o">=</span>&gt; <span class="s1">&#39;0&#39;</span>, <span class="nv">TTL</span> <span class="o">=</span>&gt; <span class="s1">&#39;FOREVER&#39;</span>, <span class="nv">KEEP_DELETED_CELLS</span> <span class="o">=</span>&gt; <span class="s1">&#39;FALSE&#39;</span>, <span class="nv">BLOCKSIZE</span> <span class="o">=</span>&gt; <span class="s1">&#39;65536
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span>, <span class="nv">IN_MEMORY</span> <span class="o">=</span>&gt; <span class="s1">&#39;false&#39;</span>, <span class="nv">BLOCKCACHE</span> <span class="o">=</span>&gt; <span class="s1">&#39;true&#39;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>å°†<code>TTL =&gt; 'FOREVER' with TTL</code> ä¿®æ”¹æˆ <code>org.apache.hadoop.hbase.HConstants::FOREVER</code></p>
</li>
<li>
<p>åœ¨åˆ—æ—çš„æè¿°ä¹‹é—´åŠ ä¸Šé€—å·<code>,</code>ç”¨æ¥åœ¨æ–°å»ºçš„æ—¶å€™åˆ†éš”åˆ—æ—</p>
</li>
<li>
<p>å»æ‰æ–‡æœ¬ä¸­çš„æ¢æ±‰ç¬¦(<code>\n, \r</code>), è¿™æ ·æ–‡æœ¬å°±ä¼šå˜æˆå•è¡Œæ–‡æœ¬</p>
</li>
<li>
<p>é€šè¿‡ä¸‹é¢çš„è¯­å¥åœ¨æ–°çš„é›†ç¾¤åˆ›å»ºæ–°çš„ç›¸åŒçš„è¡¨ï¼š</p>
</li>
</ul>
<h4 id="copytable"><span class="section-num">2.1.2</span> CopyTable</h4>
<p>æŒ‰ç…§Apache å®˜æ–¹<a href="https://hbase.apache.org/book.html#ops.backup">æ–‡æ¡£</a>çš„ä»‹ç»ï¼ŒHbase æ”¯æŒä¸¤ç§å½¢å¼çš„æ•°æ®å¤‡ä»½ï¼Œåˆ†åˆ«æ˜¯åœæœå’Œä¸åœæœçš„ã€‚</p>
<p>æˆ‘é€‰æ‹©çš„æ˜¯ä¸åœæœçš„å½¢å¼ï¼Œåœæœçš„ä»£ä»·å¤ªå¤§ã€‚è€Œä¸åœæœçš„æ•°æ®å¤‡ä»½æœ‰ä¸‰ç§æ–¹æ¡ˆï¼Œæˆ‘é€‰æ‹©æ˜¯çš„ <a href="https://hbase.apache.org/book.html#copy.table">CopyTable</a>æ–¹æ¡ˆã€‚</p>
<!--list-separator-->
<ol>
<li>
<p>Add Peer</p>
<p>å› ä¸º <code>CopyTable</code> éœ€è¦æºæœºæˆ¿å’Œç›®æ ‡æœºæˆ¿æ˜¯ç½‘ç»œè¿é€šï¼Œå¹¶ä¸”æ˜¯ç›®æ ‡é›†ç¾¤åœ¨æºé›†ç¾¤çš„ <code>peer</code> listé‡Œé¢ã€‚æ‰€ä»¥è¦å…ˆåœ¨æºé›†ç¾¤æ·»åŠ  <code>peer</code>. æŒ‰ç…§ Hbase <a href="https://hbase.apache.org/book.html#_cluster_replication">cluster replication</a> å…³äºæ·»åŠ  <code>peer</code> çš„è¯´æ˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">add_peer &lt;ID&gt; &lt;CLUSTER_KEY&gt;    Adds a replication relationship between two clusters.
</span></span><span class="line"><span class="cl">       + IDâ€‰â€”â€‰a unique string, which must not contain a hyphen.
</span></span><span class="line"><span class="cl">       + CLUSTER_KEY: composed using the following template, with appropriate
</span></span><span class="line"><span class="cl">	 place-holders:
</span></span><span class="line"><span class="cl">	 <span class="sb">`</span>hbase.zookeeper.quorum:hbase.zookeeper.property.clientPort:zookeeper.znode.parent<span class="sb">`</span>
</span></span><span class="line"><span class="cl">       + STATE<span class="o">(</span>optional<span class="o">)</span>: ENABLED or DISABLED, default value is ENABLED
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€Œ <code>hbase.zookeeper.quorum</code> å¯ä»¥åœ¨ç›®æ ‡é›†ç¾¤çš„ <code>$HBASE_HOME/conf/hbase-site.xml</code>
ç›®å½•æ‰¾åˆ°è®¾ç½®çš„å€¼ï¼› <code>hbase.zookeeper.property.clientPort</code> å¯ä»¥åœ¨ <code>$HBASE_HOME/conf/hbase-site.xml</code>æŒ‡å®šæˆ–è€…æ˜¯åœ¨ <code>$ZOOKEEPER_HOME/conf/zoo.cfg</code>é€š è¿‡ <code>clientPort</code> æŒ‡å®šï¼› <code>zookeeper.znode.parent</code> é»˜è®¤å€¼æ˜¯ <code>/hbase</code></p>
<p>æ‰€ä»¥ï¼Œåœ¨ Hbase Shell è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ·»åŠ  <code>peer</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">add_peer <span class="s1">&#39;1&#39;</span>, <span class="s2">&#34;node-master,node1,node2:2181:/hbase&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h4 id="å¤åˆ¶è¡¨å’Œæ•°æ®"><span class="section-num">2.1.3</span> å¤åˆ¶è¡¨å’Œæ•°æ®</h4>
<p><code>CopyTable</code> çš„å‘½ä»¤è¯´æ˜å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">./bin/hbase org.apache.hadoop.hbase.mapreduce.CopyTable --help
</span></span><span class="line"><span class="cl">/bin/hbase org.apache.hadoop.hbase.mapreduce.CopyTable --help
</span></span><span class="line"><span class="cl">Usage: CopyTable <span class="o">[</span>general options<span class="o">]</span> <span class="o">[</span>--starttime<span class="o">=</span>X<span class="o">]</span> <span class="o">[</span>--endtime<span class="o">=</span>Y<span class="o">]</span> <span class="o">[</span>--new.name<span class="o">=</span>NEW<span class="o">]</span> <span class="o">[</span>--peer.adr<span class="o">=</span>ADR<span class="o">]</span> &lt;tablename&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥æŒ‡å®šéœ€è¦å¤åˆ¶çš„æ•°æ®çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šã€‚é‚£ä¹ˆé»˜è®¤æ˜¯å…¨éƒ¨æ•°æ®ï¼Œä»¥ <code>cset_content</code> è¡¨ä¸ºä¾‹ï¼Œå¤åˆ¶ä¸€ä¸ªå°æ—¶çš„æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">bin/hbase org.apache.hadoop.hbase.mapreduce.CopyTable --starttime<span class="o">=</span><span class="m">1265875194289</span> --endtime<span class="o">=</span><span class="m">1265878794289</span>  --peer.adr<span class="o">=</span>node-master,node1,node2:2181:/hbase --families<span class="o">=</span>baseinfo,extrainfo cset_content
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åHadoop å°±ä¼šå¯åŠ¨ä¸€ä¸ª MapReduce çš„Jobæ¥è¿è¡Œè¿™ä¸ª <code>CopyTable</code>ä»»åŠ¡ã€‚è€Œæˆ‘è¦å¤åˆ¶æ‰€ æœ‰çš„æ•°æ®ï¼Œå°±éœ€è¦æŠŠåˆ—æ—å’Œè¡¨éƒ½åˆ—å‡ºæ¥</p>
<h2 id="ç»“è¯­"><span class="section-num">3</span> ç»“è¯­</h2>
<p>æŠ˜è…¾ä¸€æ³¢ä¹‹åï¼Œç»ˆäºæŠŠç¯å¢ƒå¼„å¥½ã€‚å¦‚æœç›®æ ‡æœºæˆ¿å’Œæºæœºæˆ¿ä¸åŒçš„è¯ï¼Œä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ Hbase çš„ <code>Exporter</code> å’Œ <code>Importer</code></p>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
    <item>
      <title>è®°å­˜å‚¨é›†ç¾¤çš„ä¸€æ¬¡è¿ç§»è¿‡ç¨‹ï¼ˆä¸Šï¼‰</title>
      <link>http://localhost:1313/zh/post/2018/store_cluster_migrate1/</link>
      <pubDate>Mon, 05 Mar 2018 17:39:00 +0800</pubDate>
      <guid>http://localhost:1313/zh/post/2018/store_cluster_migrate1/</guid>
      <description>&lt;p&gt;æ­å»ºå’Œé…ç½® Hadoop, Zookeeper, Hbase&lt;/p&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘è´Ÿè´£å…¬å¸æµ‹è¯•ç¯å¢ƒçš„è¿ç§»ï¼Œä¸»è¦åŒ…æ‹¬ Hbase+Mysql å­˜å‚¨é›†ç¾¤çš„è¿ç§»ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç¼“å­˜ç»„ä»¶çš„è¿ç§», è€Œæˆ‘æ‰“ç®—è¯´è¯´å­˜å‚¨é›†ç¾¤çš„è¿ç§»ã€‚å› ä¸ºå…¬å¸çš„æœºå™¨çš„Ip å’ŒHost ä¸ä¾¿åœ¨åšæ–‡å±•ç¤ºï¼Œæ‰€ä»¥æˆ‘ä¼šç”¨ï¼š&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>æ­å»ºå’Œé…ç½® Hadoop, Zookeeper, Hbase</p>
<h2 id="å‰è¨€"><span class="section-num">1</span> å‰è¨€</h2>
<p>æœ€è¿‘è´Ÿè´£å…¬å¸æµ‹è¯•ç¯å¢ƒçš„è¿ç§»ï¼Œä¸»è¦åŒ…æ‹¬ Hbase+Mysql å­˜å‚¨é›†ç¾¤çš„è¿ç§»ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç¼“å­˜ç»„ä»¶çš„è¿ç§», è€Œæˆ‘æ‰“ç®—è¯´è¯´å­˜å‚¨é›†ç¾¤çš„è¿ç§»ã€‚å› ä¸ºå…¬å¸çš„æœºå™¨çš„Ip å’ŒHost ä¸ä¾¿åœ¨åšæ–‡å±•ç¤ºï¼Œæ‰€ä»¥æˆ‘ä¼šç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">192.168.2.1: node-master</span>
</span></span><span class="line"><span class="cl"><span class="na">192.168.2.2: node1</span>
</span></span><span class="line"><span class="cl"><span class="na">192.168.2.3: node2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä»£æ›¿å…¬å¸çš„æœºå™¨å’ŒåŸŸåã€‚</p>
<h2 id="æ­å»ºæ–°ç¯å¢ƒ"><span class="section-num">2</span> æ­å»ºæ–°ç¯å¢ƒ</h2>
<h3 id="hadoop-æ­å»ºæµç¨‹"><span class="section-num">2.1</span> Hadoop æ­å»ºæµç¨‹</h3>
<h4 id="hadoop-é›†ç¾¤çš„æ¶æ„"><span class="section-num">2.1.1</span> Hadoop é›†ç¾¤çš„æ¶æ„</h4>
<p>åœ¨é…ç½® Hadoop çš„ä¸»ä»èŠ‚ç‚¹(master/slave)ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ Hadoop é›†ç¾¤çš„ç»„ä»¶ä½œç”¨ï¼›</p>
<ul>
<li><code>master</code> èŠ‚ç‚¹è´Ÿè´£æ‹…ä»»ç®¡ç†åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä»¥åŠè¿›è¡Œç›¸åº”çš„èµ„æºè°ƒåº¦çš„è§’è‰²:
<ul>
<li>NameNode: ç®¡ç†åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå¹¶ä¸”æ„ŸçŸ¥æ•°æ®å—åœ¨é›†ç¾¤çš„å­˜å‚¨ä½ç½®</li>
<li>ResourceManager: ç®¡ç† <code>YARN</code> ä»»åŠ¡ï¼Œå¹¶ä¸”è´Ÿè´£åœ¨ <code>slave</code> èŠ‚ç‚¹è°ƒåº¦å’Œå¤„ç†</li>
</ul>
</li>
<li><code>slave</code> èŠ‚ç‚¹è´Ÿè´£æ‹…ä»»å­˜å‚¨çœŸå®çš„æ•°æ®å¹¶ä¸”æä¾›è¿ç®— <code>YARN</code> ä»»åŠ¡çš„èƒ½åŠ›çš„è§’è‰²ï¼š
<ul>
<li>DataNode: è´Ÿè´£ç‰©ç†å­˜å‚¨çœŸå®çš„æ•°æ®</li>
<li>NodeManager: ç®¡ç†åœ¨è¯¥èŠ‚ç‚¹ <code>YARN</code> ä»»åŠ¡çš„å…·ä½“æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
<p><code>master</code> å’Œ <code>slave</code> çš„è§’è‰²ä¸ä¸€å®šåƒä¸Šé¢åˆ’åˆ†å¾—æ³¾æ¸­åˆ†æ˜ï¼Œæ¯”å¦‚ <code>master</code> èŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯ <code>dataNode</code>,è¿™ä¸ªå°±çœ‹å…·ä½“é…ç½®äº†ã€‚</p>
<h4 id="é…ç½®jdk"><span class="section-num">2.1.2</span> é…ç½®JDK</h4>
<p>Hadoop é›†ç¾¤éœ€è¦JAVA ç¯å¢ƒï¼Œè€ŒLinux çš„å‘è¡Œç‰ˆæœ¬ä¸€èˆ¬éƒ½æ˜¯é»˜è®¤å¸¦æœ‰JDK çš„ï¼Œåªæ˜¯OpenJDK è€Œä¸æ˜¯ Oracle JDK, å¦‚æœéœ€è¦ä¿®æ”¹JDK çš„ç‰ˆæœ¬ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå®‰è£…JDK çš„æ•™ç¨‹ï¼Œæˆ‘å°±ä¸ä¸€ä¸€è®²è§£äº†ã€‚</p>
<h4 id="ä¿®æ”¹host"><span class="section-num">2.1.3</span> ä¿®æ”¹host</h4>
<p>å› ä¸ºéœ€è¦ä¸åŒçš„æœºå™¨ä¹‹é—´é€šä¿¡ï¼Œæ‰€ä»¥éœ€è¦å…ˆé…ç½®å¥½Ip å’ŒåŸŸåçš„æ˜ å°„ã€‚ä¿®æ”¹æ¯å°æœºå™¨çš„ <code>/etc/hosts</code> æ–‡ä»¶ï¼ŒåŠ ä¸Šä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">192.168.2.1: nodw-master
</span></span><span class="line"><span class="cl">192.168.2.2: node1
</span></span><span class="line"><span class="cl">192.168.2.3: node2
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ–°å»º-hadoop-ç”¨æˆ·"><span class="section-num">2.1.4</span> æ–°å»º hadoop ç”¨æˆ·</h4>
<p>è™½è¯´æˆ‘å¯ä»¥ç”¨æˆ‘è‡ªå·±çš„ç™»å½•åæ¥é…ç½®å’Œè¿è¡Œ hadoop, ä½†æ˜¯å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œè¿˜æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿è¡Œ hadoop é›†ç¾¤çš„ç”¨æˆ·æ¯”è¾ƒå¥½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">useradd hadoop
</span></span><span class="line"><span class="cl">passwd hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ssh-å…å¯†ç ç™»å½•"><span class="section-num">2.1.5</span> SSH å…å¯†ç ç™»å½•</h4>
<p>å› ä¸ºåœ¨ Hadoop é›†ç¾¤ä¸­ï¼Œ <code>node-master</code> èŠ‚ç‚¹ä¼šé€šè¿‡SSHè¿æ¥å’Œå…¶ä»–èŠ‚ç‚¹è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥éœ€è¦ä¸º
Hadoop é›†ç¾¤é…ç½®å…å¯†ç æ ¡éªŒçš„é€šä¿¡ã€‚é¦–å…ˆä»¥ <code>hadoop</code> ç”¨æˆ·èº«ä»½ç™»å½•åˆ° <code>node-master</code> èŠ‚ç‚¹ï¼Œç„¶åç”Ÿæˆ SSHçš„å…¬ç§é’¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh-keygen -b <span class="m">4096</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæŠŠå…¬é’¥å¤åˆ¶åˆ°å…¶ä»–çš„èŠ‚ç‚¹ï¼Œå¦‚æœä½ æƒ³è¦æŠŠ <code>node-master</code>ä¹Ÿå½“ä½œ<code>dataNote</code>çš„è¯ï¼Œå°±éœ€è¦æŠŠå…¬é’¥ä¹Ÿå¤åˆ¶åˆ°
<code>master</code>èŠ‚ç‚¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ssh-copy-id -i $HOME/.ssh/id_rsa.pub hadoop@node-master
</span></span><span class="line"><span class="cl">ssh-copy-id -i $HOME/.ssh/id_rsa.pub hadoop@node1
</span></span><span class="line"><span class="cl">ssh-copy-id -i $HOME/.ssh/id_rsa.pub hadoop@node2
</span></span></code></pre></td></tr></table>
</div>
</div><p>è°¨è®°ï¼šå¤åˆ¶çš„æ˜¯â€å…¬é’¥â€,ä¸æ˜¯â€ç§é’¥â€.</p>
<h4 id="å®‰è£…hadoop-1-dot-ä¸‹è½½hadoop-å®‰è£…åŒ…-ä»¥-hadoop-ç™»å½•-node-master-é‡‡ç”¨-wgetå‘½ä»¤ä¸‹è½½"><span class="section-num">2.1.6</span> å®‰è£…hadoop 1. ä¸‹è½½hadoop å®‰è£…åŒ…ï¼Œä»¥ <code>hadoop</code>ç™»å½•<code>node-master</code>ï¼Œé‡‡ç”¨ wgetå‘½ä»¤ä¸‹è½½ï¼š</h4>
<p>wget <a href="http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.1.tar.gz">http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.7.1.tar.gz</a></p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªhadoopç›®å½•ï¼Œå°†å„ä¸ªç»„ä»¶éƒ½å®‰è£…åœ¨è¿™ä¸ªç›®å½•ã€‚</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mdkir ~/hadoop
</span></span><span class="line"><span class="cl">tar -zxvf hadoop-2.6.0-cdh5.7.1.tar.gz -C ~/hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><span class="section-num">2.1.7</span> ä¿®æ”¹é…ç½®æ–‡ä»¶</h4>
<p>æ‰€æœ‰ä¿®æ”¹çš„ hadoopé…ç½®æ–‡ä»¶éƒ½ä½äº ~/hadoop/etc/hadoop/ ç›®å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd ~/hadoop/etc/hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><!--list-separator-->
<ol>
<li>
<p>è®¾ç½® NameNode ä½ç½®</p>
<p><code>vim core-site.xml</code>: ä¿®æ”¹æˆä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>fs.defaultFS<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>hdfs://node-master:19000<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>fs.trash.interval<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>10080<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>fs.trash.checkpoint.interval<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>10080<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="2">
<li>
<p>è®¾ç½® HDFS è·¯å¾„</p>
<p><code>vim hdfs-site.xml</code>,ä¿®æ”¹å†…å®¹ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>dfs.replication<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>1<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hadoop.tmp.dir<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>/home/hadoop/hadoop/data/temp<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>dfs.namenode.http-address<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master:50070<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>dfs.namenode.secondary.http-address<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node1:50090<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>dfs.webhdfs.enabled<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>dfs.data.dir<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>/home/hadoop/hadoop/data/hdfs<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="3">
<li>
<p>å°† YARN è®¾ç½®æˆä»»åŠ¡è°ƒåº¦å™¨(Job Scheduler)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cp mapred-site.xml.template mapred-site.xml
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åä¿®æ”¹é…ç½®ï¼Œå°† <code>yarn</code> è®¾ç½®æˆ <code>MapReduce</code> æ“ä½œçš„é»˜è®¤æ¡†æ¶ï¼š
<code>vim mapred-site.xml</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>mapreduce.framework.name<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>yarn<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>mapreduce.jobhistory.address<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master:10020<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>mapreduce.jobhistory.webapp.address<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master:19888<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="4">
<li>
<p>é…ç½® YARN</p>
<p><code>vim yarn-site.xml</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.acl.enable<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>0<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.resourcemanager.hostname<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.nodemanager.aux-services<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>mapreduce_shuffle<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="5">
<li>
<p>é…ç½® master èŠ‚ç‚¹</p>
<p>å› ä¸ºå…¬å¸çš„æœºå™¨å†…å­˜è¾ƒå¤§ï¼Œå…¼ä¹‹æœºå™¨æ•°ä¸å¤šï¼Œæ‰€ä»¥æˆ‘å°±æŠŠä¸¤å°æœºå™¨éƒ½éƒ½å½“ä½œ <code>master</code>:
<code>vim masters</code>ä¿®æ”¹æ–‡ä»¶ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">node-master</span>
</span></span><span class="line"><span class="cl"><span class="na">node1</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="6">
<li>
<p>é…ç½® slave èŠ‚ç‚¹</p>
<p>æŠŠå…¨éƒ¨èŠ‚ç‚¹éƒ½å½“ä½œæ•°æ®å‡ ç‚¹(dataNode):
<code>vim slaves</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">node-master</span>
</span></span><span class="line"><span class="cl"><span class="na">node1</span>
</span></span><span class="line"><span class="cl"><span class="na">node2</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="7">
<li>
<p>ä¿®æ”¹ Hadoop ç¯å¢ƒå˜é‡é…ç½®</p>
<p>è¿™ä¸ªé…ç½®æ˜¯å¦ä¿®æ”¹å°±è§†æƒ…å†µè€Œå®šäº†ã€‚
<code>vim hadoop-env.sh</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">#å› ä¸ºsshçš„ç«¯å£ä¸æ˜¯é»˜è®¤çš„22,éœ€è¦é‡æ–°æŒ‡å®š</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HADOOP_SSH_OPTS</span><span class="o">=</span><span class="s2">&#34;-p 9922&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#å¦‚æœæŠ¥é”™java_homeæ‰¾ä¸åˆ°ï¼Œå¯åœ¨è¿™é‡Œé‡æ–°æŒ‡å®š</span>
</span></span><span class="line"><span class="cl"><span class="c1">#export JAVA_HOME=/usr/java/jdk1.8.0_161/</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="8">
<li>åœ¨å…¶å®ƒçš„èŠ‚ç‚¹å®‰è£…å¹¶ä¸”è§£å‹ï¼Œä¸è¦ä¿®æ”¹é…ç½®æ–‡ä»¶</li>
</ol>
<!--list-separator-->
<ol start="9">
<li>
<p>å°†é…ç½®æ–‡ä»¶åŒæ­¥åˆ°slaveä¸»æœº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">scp -r -P <span class="m">9922</span> /home/hadoop/hadoop/hadoop-2.6.0-cdh5.7.1/etc/hadoop/  node1:/home/hadoop/hadoop/hadoop-2.6.0-cdh5.7.1/etc
</span></span><span class="line"><span class="cl">scp -r -P <span class="m">9922</span> /home/hadoop/hadoop/hadoop-2.6.0-cdh5.7.1/etc/hadoop/  node2:/home/hadoop/hadoop/hadoop-2.6.0-cdh5.7.1/etc
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="10">
<li>ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦é…ç½®ï¼‰</li>
</ol>
<pre><code>ç¼–è¾‘ `.bash_profile`ï¼š
`vim ~/.bash_profile`
åŠ å…¥ï¼š

```shell
export JAVA_HOME=/usr/java/jdk1.8.0_161/
export JRE_HOME=/usr/java/jdk1.8.0_161/jre
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH
export HADOOP_HOME=/home/hadoop/hadoop/hadoop-2.6.0-cdh5.7.1
export HBASE_HOME=/home/hadoop/hadoop/hbase-1.2.0-cdh5.7.1
export HADOOP_MAPRED_HOME=${HADOOP_HOME}
export HADOOP_COMMON_HOME=${HADOOP_HOME}
export HADOOP_HDFS_HOME=${HADOOP_HOME}
export YARN_HOME=${HADOOP_HOME}
export HADOOP_YARN_HOME=${HADOOP_HOME}
export HADOOP_CONF_DIR=${HADOOP_HOME}/etc/hadoop
export HDFS_CONF_DIR=${HADOOP_HOME}/etc/hadoop
export YARN_CONF_DIR=${HADOOP_HOME}/etc/hadoop
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$HADOOP_HOME/bin
export PATH
```

ç„¶ååŠ è½½ `~/.bash_profile`:
`source ~/.bash_profile`
</code></pre>
<!--list-separator-->
<ol start="11">
<li>æ ¼å¼åŒ– HDFS</li>
</ol>
<pre><code>å°±åƒå…¶å®ƒçš„æ–‡ä»¶ç³»ç»Ÿé‚£æ ·ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦æ ¼å¼åŒ–ï¼ŒHDFS è¿™ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨ `node-master`,è¿è¡Œï¼š

```nil
hdfs namenode -format
```

é‚£ä¹ˆï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œ Hadoop å°±å·²ç»å®‰è£…å’Œé…ç½®å¥½äº†ã€‚
</code></pre>
<h4 id="è¿è¡Œå’Œç›‘æ§-hdfs"><span class="section-num">2.1.8</span> è¿è¡Œå’Œç›‘æ§ HDFS</h4>
<!--list-separator-->
<ol>
<li>
<p>å¯åŠ¨HDFS</p>
<p>åœ¨ <code>node-master</code> çš„ <code>/home/hadoop/hadoop/sbin/</code> ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ä»¥å¯åŠ¨ HDFS:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">./start-dfs.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå°±ä¼šå¯åŠ¨ <code>NameNode</code> å’Œ <code>SecondaryNameNode</code>, ç„¶åç»§ç»­å¯åŠ¨ <code>DataNode</code>.</p>
</li>
</ol>
<!--list-separator-->
<ol start="2">
<li>
<p>éªŒè¯HDFS</p>
<p>å¯ä»¥åœ¨å„ä¸ªèŠ‚ç‚¹é€šè¿‡ <code>jps</code> æ£€æŸ¥HDFS çš„è¿è¡ŒçŠ¶æ€ã€‚æ¯”å¦‚åœ¨ <code>node-master</code> è¿è¡Œ <code>jps</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">12243 NameNode</span>
</span></span><span class="line"><span class="cl"><span class="na">2677 ResourceManager</span>
</span></span><span class="line"><span class="cl"><span class="na">19593 Jps</span>
</span></span><span class="line"><span class="cl"><span class="na">15036 DataNode</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>node1</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">30464 DataNode</span>
</span></span><span class="line"><span class="cl"><span class="na">13094 Jps</span>
</span></span><span class="line"><span class="cl"><span class="na">28589 SecondaryNameNode</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="3">
<li>
<p>åœæ­¢HDFS</p>
<p>åœ¨ <code>node-master</code> çš„ <code>/home/hadoop/hadoop/sbin/</code> ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ä»¥åœæ­¢HDFS:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">./stop-dfs.sh
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<!--list-separator-->
<ol start="4">
<li>
<p>ç›‘æ§HDFS</p>
<p>å¦‚æœä½ åœ¨å¯åŠ¨ HDFS ä¹‹åï¼Œæƒ³è¦è·å–å…³äº HDFS çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>hdfs dfsadmin -report</code> å‘½ä»¤ï¼Œ ä¾‹å¦‚åœ¨ <code>node-master</code> è¿è¡Œ <code>hdfs dfsadmin -resport</code>, è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">Configured Capacity: 1201169780736 (1.09 TB)</span>
</span></span><span class="line"><span class="cl"><span class="na">Present Capacity: 1129442681745 (1.03 TB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining: 1129442358161 (1.03 TB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used: 323584 (316 KB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Under replicated blocks: 0</span>
</span></span><span class="line"><span class="cl"><span class="na">Blocks with corrupt replicas: 0</span>
</span></span><span class="line"><span class="cl"><span class="na">Missing blocks: 0</span>
</span></span><span class="line"><span class="cl"><span class="na">Missing blocks (with replication factor 1): 0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">-------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="na">Live datanodes (3):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">Name: 192.168.2.3:50010 (node2)</span>
</span></span><span class="line"><span class="cl"><span class="na">Hostname: node2</span>
</span></span><span class="line"><span class="cl"><span class="na">Decommission Status : Normal</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Capacity: 400389926912 (372.89 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used: 102400 (100 KB)</span>
</span></span><span class="line"><span class="cl"><span class="na">Non DFS Used: 24759164513 (23.06 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining: 375630659999 (349.83 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining%: 93.82%</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Cache Capacity: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used%: 100.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Xceivers: 11</span>
</span></span><span class="line"><span class="cl"><span class="na">Last contact: Mon Mar 05 14:05:38 CST 2018</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">Name: 192.168.2.2:50010 (node1)</span>
</span></span><span class="line"><span class="cl"><span class="na">Hostname: node1</span>
</span></span><span class="line"><span class="cl"><span class="na">Decommission Status : Normal</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Capacity: 400389926912 (372.89 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used: 77824 (76 KB)</span>
</span></span><span class="line"><span class="cl"><span class="na">Non DFS Used: 23483977479 (21.87 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining: 376905871609 (351.02 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining%: 94.13%</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Cache Capacity: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used%: 100.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Xceivers: 7</span>
</span></span><span class="line"><span class="cl"><span class="na">Last contact: Mon Mar 05 14:05:38 CST 2018</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="na">Name: 192.168.2.1:50010 (node-master)</span>
</span></span><span class="line"><span class="cl"><span class="na">Hostname: node-master</span>
</span></span><span class="line"><span class="cl"><span class="na">Decommission Status : Normal</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Capacity: 400389926912 (372.89 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used: 143360 (140 KB)</span>
</span></span><span class="line"><span class="cl"><span class="na">Non DFS Used: 23483956999 (21.87 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining: 376905826553 (351.02 GB)</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Used%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">DFS Remaining%: 94.13%</span>
</span></span><span class="line"><span class="cl"><span class="na">Configured Cache Capacity: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining: 0 (0 B)</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Used%: 100.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Cache Remaining%: 0.00%</span>
</span></span><span class="line"><span class="cl"><span class="na">Xceivers: 7</span>
</span></span><span class="line"><span class="cl"><span class="na">Last contact: Mon Mar 05 14:05:39 CST 2018</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ–è€…å¯ä»¥ä½¿ç”¨æ›´åŠ å‹å¥½çš„ Web ç®¡ç†ç•Œé¢ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ï¼š <a href="http://node-master-ip:50070">http://node-master-ip:50070</a>, ç„¶åä½ å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ç›‘æ§ç•Œé¢ï¼š
<img loading="lazy" src="https://imgur.com/jmIXxRy.jpg"></p>
</li>
</ol>
<!--list-separator-->
<ol start="5">
<li>
<p>ä½¿ç”¨ HDFS</p>
<p>æ—¢ç„¶ HDFS å¯ä»¥è·‘èµ·æ¥äº†ï¼Œç°åœ¨å°±éœ€è¦æ·»åŠ ä¸€ç‚¹æ•°æ®ä»¥æµ‹è¯• HDFS äº†ã€‚ åœ¨HDFS çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>test</code> ç›®å½•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">hdfs dfs -mkdir /test
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª <code>helloworld</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Bye world!
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ç€æŠŠ <code>helloworld</code> æ–‡ä»¶æ”¾ç½®åˆ°HDFSçš„ <code>/test</code> ç›®å½•ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">hdfs dfs -put helloworld /test
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åæŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">hdfs dfs -ls /test
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="å°ç»“"><span class="section-num">2.2</span> å°ç»“</h3>
<p>è‡³æ­¤ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œ é‚£ä¹ˆHadoop é›†ç¾¤å°±è¿è¡Œèµ·æ¥äº†ã€‚å› ä¸ºæˆ‘æ˜¯éœ€è¦ç”¨Hbase ä½œå­˜å‚¨é›†ç¾¤ï¼Œæš‚ä¸éœ€ç”¨<code>Yarn</code> ä½œè®¡ç®—ï¼Œæ‰€ä»¥æˆ‘å°±æ²¡æœ‰ä»‹ç»å¯åŠ¨ <code>Yarn</code> çš„ æµç¨‹äº†ã€‚</p>
<h3 id="zookeeper-æ­å»ºæµç¨‹"><span class="section-num">2.3</span> ZooKeeper æ­å»ºæµç¨‹</h3>
<p>å› ä¸ºéœ€è¦ç”¨ ZooKeeper æ¥ç®¡ç†é›†ç¾¤ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å®‰è£… ZooKeeper. è€Œ ZooKeeper çš„å®‰è£…å’Œ é…ç½®ä¹Ÿæ˜¯ç”¨ <code>hadoop</code> ç”¨æˆ·è¿›è¡Œæ“ä½œçš„ã€‚</p>
<h4 id="å®‰è£…zookeeper--æ¯ä¸ªèŠ‚ç‚¹åŒæ ·çš„æ“ä½œ--1-dot-ä¸‹è½½zookeeperå®‰è£…åŒ…-ç™»å½•ä¸»æœº-é‡‡ç”¨wgetå‘½ä»¤ä¸‹è½½"><span class="section-num">2.3.1</span> å®‰è£…zookeeper (æ¯ä¸ªèŠ‚ç‚¹åŒæ ·çš„æ“ä½œ) 1. ä¸‹è½½zookeeperå®‰è£…åŒ…ï¼Œç™»å½•ä¸»æœºï¼Œé‡‡ç”¨wgetå‘½ä»¤ä¸‹è½½ï¼š</h4>
<p>wget <a href="http://archive.cloudera.com/cdh5/cdh/5/zookeeper-3.4.5-cdh5.7.1.tar.gz">http://archive.cloudera.com/cdh5/cdh/5/zookeeper-3.4.5-cdh5.7.1.tar.gz</a></p>
<ol>
<li>è§£å‹å®‰è£…åˆ°hadoopç›®å½•ï¼Œå°†å„ä¸ªç»„ä»¶éƒ½å®‰è£…åœ¨è¿™ä¸ªç›®å½•ã€‚</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">tar -zxvf zookeeper-3.4.5-cdh5.7.1.tar.gz -C ~/hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="é…ç½®-zookeeper"><span class="section-num">2.3.2</span> é…ç½® ZooKeeper</h4>
<p>ä¿®æ”¹zoo.cfg (æ‰€æœ‰æœºå™¨ä¸€æ ·çš„é…ç½®): <code>vim /home/hadoop/hadoop/zookeeper-3.4.5-cdh5.7.1/conf/zoo.cfg</code>, é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="c1"># The number of milliseconds of each tick</span>
</span></span><span class="line"><span class="cl"><span class="na">tickTime</span><span class="o">=</span><span class="s">2000</span>
</span></span><span class="line"><span class="cl"><span class="na">maxSessionTimeout</span><span class="o">=</span><span class="s">300000</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The number of ticks that the initial</span>
</span></span><span class="line"><span class="cl"><span class="c1"># synchronization phase can take</span>
</span></span><span class="line"><span class="cl"><span class="na">initLimit</span><span class="o">=</span><span class="s">10</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The number of ticks that can pass between</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sending a request and getting an acknowledgement</span>
</span></span><span class="line"><span class="cl"><span class="na">syncLimit</span><span class="o">=</span><span class="s">5</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the directory where the snapshot is stored.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># do not use /tmp for storage, /tmp here is just</span>
</span></span><span class="line"><span class="cl"><span class="c1"># example sakes.</span>
</span></span><span class="line"><span class="cl"><span class="na">dataDir</span><span class="o">=</span><span class="s">/home/hadoop/hadoop/zookeeper-3.4.5-cdh5.7.1/data</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the port at which the clients will connect</span>
</span></span><span class="line"><span class="cl"><span class="na">clientPort</span><span class="o">=</span><span class="s">2181</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Be sure to read the maintenance section of the</span>
</span></span><span class="line"><span class="cl"><span class="c1"># administrator guide before turning on autopurge.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># The number of snapshots to retain in dataDir</span>
</span></span><span class="line"><span class="cl"><span class="c1">#autopurge.snapRetainCount=3</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Purge task interval in hours</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Set to &#34;0&#34; to disable auto purge feature</span>
</span></span><span class="line"><span class="cl"><span class="c1">#autopurge.purgeInterval=1</span>
</span></span><span class="line"><span class="cl"><span class="na">server.1</span><span class="o">=</span><span class="s">node-master:2888:3888</span>
</span></span><span class="line"><span class="cl"><span class="na">server.2</span><span class="o">=</span><span class="s">node1:2888:3888</span>
</span></span><span class="line"><span class="cl"><span class="na">server.3</span><span class="o">=</span><span class="s">node2:2888:3888</span>
</span></span></code></pre></td></tr></table>
</div>
</div><!--list-separator-->
<ol>
<li>
<p>åˆ›å»ºmyidæ–‡ä»¶ ï¼ˆä¸åŒä¸»æœºä¸åŒæ•°å­—ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="o">{</span>data_dir<span class="o">}</span> <span class="c1"># æŒ‰ç…§ä¸Šé¢çš„é…ç½®ï¼Œå°±åº”è¯¥æ˜¯/home/hadoop/hadoop/zookeeper-3.4.5-cdh5.7.1/data</span>
</span></span><span class="line"><span class="cl">vim myid
</span></span></code></pre></td></tr></table>
</div>
</div><p>myidçš„æ•°å­—è¦ä¸zoo.cfgé…ç½®çš„ä¸€ä¸€å¯¹åº”ã€‚å³è¦å¯¹åº”ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cfg" data-lang="cfg"><span class="line"><span class="cl"><span class="na">server.1</span><span class="o">=</span><span class="s">node-master:2888:3888</span>
</span></span><span class="line"><span class="cl"><span class="na">server.2</span><span class="o">=</span><span class="s">node1:2888:3888</span>
</span></span><span class="line"><span class="cl"><span class="na">server.3</span><span class="o">=</span><span class="s">node2:2888:3888</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå°±æ˜¯ <code>node-master</code> çš„ <code>myid</code>æ˜¯<code>1</code>, <code>node1</code>çš„ <code>myid</code>æ˜¯ <code>2</code>,ä¾æ¬¡ç±»æ¨ã€‚éœ€è¦æ³¨æ„çš„ æ˜¯ï¼Œæ•°å­—å‰åéƒ½ä¸èƒ½æœ‰ç©ºæ ¼ï¼</p>
</li>
</ol>
<!--list-separator-->
<ol start="2">
<li>
<p>å¯åŠ¨ ZooKeeper</p>
<p>åœ¨ <code>node-master</code> çš„ <code>/home/hadoop/hadoop/zookeeper-3.4.5-cdh5.7.1</code> ç›®å½•ï¼Œè¿è¡Œä»¥ ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sh bin/zkServer.sh start
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶å®ƒç›¸åº”çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯åŠ¨ZKæœåŠ¡: <code>sh bin/zkServer.sh start</code></li>
<li>æŸ¥çœ‹ZKæœåŠ¡çŠ¶æ€: <code>sh bin/zkServer.sh status</code></li>
<li>åœæ­¢ZKæœåŠ¡: <code>sh bin/zkServer.sh stop</code></li>
<li>é‡å¯ZKæœåŠ¡: <code>sh bin/zkServer.sh restart</code></li>
</ul>
</li>
</ol>
<!--list-separator-->
<ol start="3">
<li>
<p>éªŒè¯ ZooKeeper</p>
<p>å¯ä»¥é€šè¿‡è°ƒç”¨ <code>jps</code> æˆ–è€… <code>bin/zkCli.sh</code> æ¥éªŒè¯ Zookeeper çš„è¿è¡Œæƒ…å†µï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">./zkCli.sh -server 192.168.2.1:2181
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="hbase-æ­å»ºæµç¨‹"><span class="section-num">2.4</span> HBase æ­å»ºæµç¨‹</h3>
<h4 id="å®‰è£…hbase"><span class="section-num">2.4.1</span> å®‰è£…Hbase</h4>
<ol>
<li>ä¸‹è½½hbase å®‰è£…åŒ…ï¼Œç™»å½•ä¸»æœºï¼Œé‡‡ç”¨wgetå‘½ä»¤ä¸‹è½½ï¼š
wget <a href="http://archive.cloudera.com/cdh5/cdh/5/hbase-1.2.0-cdh5.7.1.tar.gz">http://archive.cloudera.com/cdh5/cdh/5/hbase-1.2.0-cdh5.7.1.tar.gz</a>
2ã€è§£å‹å®‰è£…åˆ°hadoopç›®å½•ï¼ˆ3å°ä¸»æœºåŒæ ·æ“ä½œï¼‰</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">tar -zxvf hbase-1.2.0-cdh5.7.1.tar.gz -C ~/hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¿®æ”¹hbaseçš„é…ç½®æ–‡ä»¶--æ‰€æœ‰ä¸»æœºä¸€æ ·çš„é…ç½®"><span class="section-num">2.4.2</span> ä¿®æ”¹hbaseçš„é…ç½®æ–‡ä»¶(æ‰€æœ‰ä¸»æœºä¸€æ ·çš„é…ç½®)</h4>
<p>ä¿®æ”¹ <code>hbase-1.2.0-cdh5.7.1/conf</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š 1. ä¿®æ”¹ <code>hbase-site.xml</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hbase.rootdir<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>hdfs://node-master:19000/hbase-${user.name}<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hbase.master<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hbase.cluster.distributed<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hbase.tmp.dir<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>/home/hadoop/hadoop/data/hbase-${user.name}<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>hbase.zookeeper.quorum<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>node-master, node1, node2<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>ä¿®æ”¹ <code>hbase-env.sh</code>:</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/java/jdk1.8.0_161/ <span class="o">(</span>æ— æ³•è¯†åˆ«ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™é‡Œç›´æ¥æŒ‡å®š<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HBASE_MANAGES_ZK</span><span class="o">=</span><span class="nb">false</span>  ï¼ˆå…³é—­è‡ªå¸¦çš„zookeeperï¼‰
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HBASE_SSH_OPTS</span><span class="o">=</span><span class="s2">&#34;-p 9922&#34;</span> <span class="o">(</span>ç«¯å£å·ä¸æ˜¯é»˜è®¤çš„22ï¼Œè¦æ”¹ä¸º9922<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>ä¿®æ”¹ =regionservers=(æŒ‡å®šregionserversçš„ä¸»æœºåœ°å€):</li>
</ol>
<!--listend-->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">node-master
</span></span><span class="line"><span class="cl">node1
</span></span><span class="line"><span class="cl">node2
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å¯åŠ¨-hbase"><span class="section-num">2.4.3</span> å¯åŠ¨ Hbase</h4>
<p>åœ¨ <code>node-master</code> çš„ <code>/home/hadoop/hadoop/hbase-1.2.0-cdh5.7.1/bin</code> ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">start-hbase.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç›‘æ§-hbase"><span class="section-num">2.4.4</span> ç›‘æ§ Hbase</h4>
<p>å¯ä»¥åœ¨æµè§ˆå™¨æŸ¥çœ‹ HBase é›†ç¾¤çš„ä¿¡æ¯ï¼š</p>
<ul>
<li>HMaster web ç®¡ç†ä¿¡æ¯ï¼š<a href="http://192.168.2.1:60010/master-status">http://192.168.2.1:60010/master-status</a></li>
<li>HregionServer ç®¡ç†ä¿¡æ¯ï¼š<a href="http://192.168.2.1:60030/">http://192.168.2.1:60030/</a> <a href="http://192.168.2.2:60030/">http://192.168.2.2:60030/</a></li>
</ul>
<p><a href="http://192.168.2.3:60030/">http://192.168.2.3:60030/</a></p>
<h2 id="ç»“è¯­"><span class="section-num">3</span> ç»“è¯­</h2>
<p>æ•´ä¸ª Hbase é›†ç¾¤åº”è¯¥æ­å»ºå®Œäº†ï¼Œå…³äºMysql æ­å»ºçš„æ–‡ç« å°±å¤ªå¤šäº†ï¼Œæˆ‘ä¹Ÿä¸èµ˜è¨€äº†ã€‚è‡³æ­¤ï¼Œæ‰€æœ‰å­˜å‚¨çš„ç»„ä»¶å°±å·²ç»å®‰è£…å®Œæ¯•å¹¶å·²å¯ç”¨ï¼Œä½†æ˜¯éƒ½æ˜¯æ²¡æœ‰æ•°æ®çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åšçš„æ˜¯å¦‚ä½•å°†æ—§çš„æµ‹è¯•ç¯å¢ƒçš„æ•°æ®è¿ç§»åˆ°æ–°çš„æµ‹è¯•ç¯å¢ƒã€‚è€ƒè™‘åˆ°è¿™ç¯‡å†…å®¹å·²ç»å¾ˆé•¿äº†ï¼Œå‰©ä¸‹çš„å†…å®¹æˆ‘å°±å¦å¤–å†™ä¸€ç¯‡åšæ–‡äº†ã€‚</p>
<h2 id="å‚è€ƒ"><span class="section-num">4</span> å‚è€ƒ</h2>
<ul>
<li><a href="http://blog.csdn.net/u010824591/article/details/51174099">http://blog.csdn.net/u010824591/article/details/51174099</a></li>
<li><a href="https://yq.aliyun.com/articles/26415">https://yq.aliyun.com/articles/26415</a></li>
<li><a href="https://linode.com/docs/databases/hadoop/how-to-install-and-set-up-hadoop-cluster/">https://linode.com/docs/databases/hadoop/how-to-install-and-set-up-hadoop-cluster/</a></li>
</ul>
<div center class="qr-container">
<img src="/ox-hugo/qrcode_gh_e06d750e626f_1.jpg" alt="qrcode_gh_e06d750e626f_1.jpg" width="160px" height="160px" center="t" class="qr-container" />
å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»
</div>
]]></content:encoded>
    </item>
  </channel>
</rss>
